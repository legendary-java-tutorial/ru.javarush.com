Знакомство с NoSQL базами данных
<p>----------------------------------------</p>
Как работает база данных NoSQL. 
Для чего можно использовать базы данных NoSQL?
Типы баз данных NoSQL. 
Сравнение баз данных SQL (реляционных) и NoSQL (нереляционных).
<p>----------------------------------------</p>
<h2>1.1 Как работает база данных NoSQL </h2>

<p>Базы данных NoSQL используют разнообразные модели данных для доступа к данным и управления ими. Базы данных таких типов оптимизированы для приложений, которые работают с большим объемом данных, нуждаются в низкой задержке и гибких моделях данных. Все это достигается путем смягчения жестких требований к непротиворечивости данных, характерных для других типов БД. </p>

<p>Рассмотрим пример моделирования схемы для простой базы данных книг. </p>

<ul>
<li><p>В реляционной базе данных запись о книге часто разделяется на несколько частей (или «нормализуется») и хранится в отдельных таблицах, отношения между которыми определяются ограничениями первичных и внешних ключей. В этом примере в таблице <strong>«Книги»</strong> имеются столбцы <strong>«ISBN»</strong>, <strong>«Название книги»</strong> и <strong>«Номер издания»</strong>, в таблице <strong>«Авторы»</strong> – столбцы <strong>«ИД автора»</strong> и <strong>«Имя автора»</strong>, а в таблице <strong>«Автор–ISBN»</strong> – столбцы <strong>«Автор»</strong> и <strong>«ISBN»</strong>. Реляционная модель создана таким образом, чтобы обеспечить целостность ссылочных данных между таблицами в базе данных. Данные нормализованы для снижения избыточности и в целом оптимизированы для хранения. </p></li>

<li><p>В базе данных NoSQL запись о книге обычно хранится как документ JSON. Для каждой книги, или элемента, значения <strong>«ISBN»</strong>, <strong>«Название книги»</strong>, <strong>«Номер издания»</strong>, <strong>«Имя автора»</strong> и <strong>«ИД автора»</strong> хранятся в качестве атрибутов в едином документе. В такой модели данные оптимизированы для интуитивно понятной разработки и горизонтальной масштабируемости. </p></li>
</ul>
 
<h2>1.2 Для чего можно использовать базы данных NoSQL? </h2>

<p>Базы данных NoSQL хорошо подходят для многих современных приложений, например мобильных, игровых, интернет‑приложений, когда требуются гибкие масштабируемые базы данных с высокой производительностью и широкими функциональными возможностями, способные обеспечивать максимальное удобство использования. </p>

<ul>
<li><p><strong>Гибкость</strong>. Как правило, базы данных NoSQL предлагают гибкие схемы, что позволяет осуществлять разработку быстрее и обеспечивает возможность поэтапной реализации. Благодаря использованию гибких моделей данных БД NoSQL хорошо подходят для частично структурированных и неструктурированных данных. </p></li>
<li><p><strong>Масштабируемость</strong>. Базы данных NoSQL рассчитаны на масштабирование с использованием распределенных кластеров аппаратного обеспечения, а не путем добавления дорогих надежных серверов. Некоторые поставщики облачных услуг проводят эти операции в фоновом режиме, обеспечивая полностью управляемый сервис. </p></li>
<li><p><strong>Высокая производительность</strong>. Базы данных NoSQL оптимизированы для конкретных моделей данных и шаблонов доступа, что позволяет достичь более высокой производительности по сравнению с реляционными базами данных. </p></li>
<li><p><strong>Широкие функциональные возможности</strong>. Базы данных NoSQL предоставляют API и типы данных с широкой функциональностью, которые специально разработаны для соответствующих моделей данных. </p></li>
</ul>
 
<h2>1.3 Типы баз данных NoSQL </h2>

<p>NoSQL базы данных используются там, где не слишком удобно хранить данные в виде таблиц. Поэтому они хранятся в весьма различных форматах. Обычно выделяются 6 основных типов данных NoSQL-баз.</p>
 
<h4>БД на основе пар «ключ‑значение»</h4>

<p>Базы данных с использованием пар «ключ‑значение» поддерживают высокую разделяемость и обеспечивают беспрецедентное горизонтальное масштабирование, недостижимое при использовании других типов БД. Хорошими примерами использования для баз данных типа «ключ‑значение» являются игровые, рекламные приложения и приложения IoT.  </p>

<p>Например, Amazon DynamoDB обеспечивает стабильную работу БД с задержкой не более нескольких миллисекунд при любом масштабе. Такая устойчивая производительность послужила основной причиной переноса Snapchat Stories в сервис DynamoDB, поскольку эта возможность Snapchat связана с самой большой нагрузкой на запись в хранилище. </p>

<h4>Документ</h4>

<p>В коде приложения данные часто представлены как объект или документ в формате, подобном JSON, поскольку для разработчиков это эффективная и интуитивная модель данных. Документные базы данных позволяют разработчикам хранить и запрашивать данные в БД с помощью той же документной модели, которую они используют в коде приложения. Гибкий, полуструктурированный, иерархический характер документов и документных баз данных позволяет им развиваться в соответствии с потребностями приложений.  </p>

<p>Документная модель хорошо работает в каталогах, пользовательских профилях и системах управления контентом, где каждый документ уникален и изменяется со временем. Amazon DocumentDB (совместимая с MongoDB) и MongoDB — распространенные документные базы данных, которые предоставляют функциональные и интуитивно понятные API для гибкой разработки. </p>

<h4>Графовые БД</h4>

<p>Графовые базы данных упрощают разработку и запуск приложений, работающих с наборами сложносвязанных данных. Типичные примеры использования графовых баз данных – социальные сети, сервисы рекомендаций, системы выявления мошенничества и графы знаний. Amazon Neptune – это полностью управляемый сервис графовых баз данных. Neptune поддерживает модель Property Graph и Resource Description Framework (RDF), предоставляя на выбор два графовых API: TinkerPop и RDF / SPARQL. К числу распространенных графовых БД относятся Neo4j и Giraph. </p>

<h4>БД в памяти</h4>

<p>Часто в игровых и рекламных приложениях используются таблицы лидеров, хранение сессий и аналитика в реальном времени. Такие возможности требуют отклика в пределах нескольких микросекунд, при этом резкое возрастание трафика возможно в любой момент.  </p>

<p>Amazon MemoryDB для Redis – это совместимый с Redis надежный сервис базы данных в памяти, который уменьшает задержку чтения до миллисекунд и обеспечивает надежность в нескольких зонах доступности. MemoryDB специально создана для обеспечения сверхвысокой производительности и надежности, поэтому ее можно использовать как основную базу данных для современных приложений на базе микросервисов.  </p>

<p>Amazon ElastiCache – это полностью управляемый сервис кэширования в памяти, совместимый с Redis и Memcached для обслуживания рабочих нагрузок с низкой задержкой и высокой пропускной способностью. Такие клиенты, как Tinder, которым требуется, чтобы их приложения давали отклик в режиме реального времени, пользуются системами хранения данных в памяти, а не на диске. Еще одним примером специально разработанного хранилища данных является Amazon DynamoDB Accelerator (DAX). DAX позволяет DynamoDB считывать данные в несколько раз быстрее. </p>

<h4>Поисковые БД</h4>

<p>Многие приложения формируют журналы, чтобы разработчикам было проще выявлять и устранять неполадки. Сервис Amazon OpenSearch – специально разработанный сервис для визуализации и аналитики автоматически генерируемых потоков данных в режиме, близком к реальному времени, путем индексирования, агрегации частично структурированных журналов и метрик и поиска по ним. </p>
 
<p>Кроме того, сервис Amazon OpenSearch – это мощный, высокопроизводительный сервис для полнотекстового поиска. Компания Expedia задействует более 150 доменов сервиса Amazon OpenSearch, 30 ТБ данных и 30 миллиардов документов для разнообразных особо важных примеров использования – от операционного мониторинга и устранения неисправностей до отслеживания стека распределенных приложений и оптимизации затрат. </p>
 
<h2>1.4 Сравнение баз данных SQL (реляционных) и NoSQL (нереляционных) </h2>

<p>NoSQL имеет много преимуществ, поэтому вы должны хотя бы в теории знать, что уже существует нужный вам инструмент, прежде чем писать его самим. Ниже я приведу сравнение NoSQL и SQL баз данных: </p>

<h4>Подходящие рабочие нагрузки </h4>

<p><span class="text-green">Реляционные БД предназначены для транзакционных и строго непротиворечивых приложений обработки транзакций в режиме реального времени (OLTP) и хорошо подходят для аналитической обработки в режиме реального времени (OLAP).	</span></p>
 
<p><span class="text-red">Базы данных NoSQL предназначены для работы с целым рядом шаблонов доступа к данным, в том числе приложений с низкой задержкой. Поисковые БД NoSQL предназначены для аналитики частично структурированных данных.  </span></p>

<h4>Модель данных</h4>	
 
<p><span class="text-green">Реляционная модель нормализует данные и преобразует их в таблицы, состоящие из строк и столбцов. Схема жестко задает таблицы, строки, столбцы, индексы, отношения между таблицами и прочие элементы базы данных. Такая БД обеспечивает целостность ссылочных данных в отношениях между таблицами.  </span></p>

<p><span class="text-red">Базы данных NoSQL предоставляют разнообразные модели данных, такие как пары «ключ-значение», документы и графы, оптимизированные для высокой производительности и масштабируемости.  </span></p>

<h4>Свойства ACID</h4>	
 
<span class="text-green"><p>Реляционные базы данных обеспечивают набор свойств ACID: атомарность, непротиворечивость, изолированность, надежность. </p>

<ul>
<li>Атомарность требует, чтобы транзакция выполнялась полностью или не выполнялась вообще. </li>
<li>Непротиворечивость означает, что сразу по завершении транзакции данные должны соответствовать схеме базы данных. </li>
<li>Изолированность требует, чтобы параллельные транзакции выполнялись отдельно друг от друга. </li>
<li>Надежность подразумевает способность восстанавливаться до последнего сохраненного состояния после непредвиденного сбоя в системе или перебоя в подаче питания. </li>
</ul></span>

<p><span class="text-red">Базы данных NoSQL зачастую предлагают компромисс, смягчая жесткие требования свойств ACID ради более гибкой модели данных, которая допускает горизонтальное масштабирование. Благодаря этому БД NoSQL – отличный выбор для примеров использования с высокой пропускной способностью и низкой задержкой, в которых требуется горизонтальное масштабирование, не ограниченное рамками одного инстанса. </span></p>

<h4>Производительность</h4>
 
<p><span class="text-green">Производительность главным образом зависит от дисковой подсистемы. Для обеспечения максимальной производительности часто требуется оптимизация запросов, индексов и структуры таблицы.	</span></p>
 
<p><span class="text-red">Производительность обычно зависит от размера кластера базового аппаратного обеспечения, задержки сети и вызывающего приложения. </span></p>

<h4>Масштабирование</h4>
 
<p><span class="text-green">Реляционные базы данных обычно масштабируются путем увеличения вычислительных возможностей аппаратного обеспечения или добавления отдельных копий для рабочих нагрузок чтения.	</span></p>
 
<p><span class="text-red">Базы данных NoSQL обычно поддерживают высокую разделяемость благодаря шаблонам доступа с возможностью масштабирования на основе распределенной архитектуры. Это повышает пропускную способность и обеспечивает устойчивую производительность почти в неограниченных масштабах. </span></p>

<h4>API	</h4>
 
<p><span class="text-green">Запросы на запись и извлечение данных составляются на языке SQL. Эти запросы анализирует и выполняет реляционная база данных.</span></p>
 
<p><span class="text-red">Объектно‑ориентированные API позволяют разработчикам приложений без труда осуществлять запись и извлечение структур данных. Благодаря использованию ключей секций приложения могут вести поиск по парам «ключ‑значение», наборам столбцов или частично структурированным документам, содержащим серийные объекты и атрибуты приложений. </span></p>