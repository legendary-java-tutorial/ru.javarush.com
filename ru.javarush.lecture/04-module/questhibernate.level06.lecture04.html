Удаление данных в таблице
<p>----------------------------------------</p>
Оператор DELETE FROM
Удаляем вообще все
<p>----------------------------------------</p>
<h2>5.1 Оператор DELETE FROM</h2>
<p>Что просто делать в SQL, так это удалять данные. Ты можешь удалить абсолютно все очень быстро, и у тебя даже никто не спросит никаких подтверждений.</p>
<p>Начнем с самого простого сценария: <strong>как удалить одну строку в таблице</strong>.</p>
<p>Этот сценарий ты будешь встречать чаще всего, обычно это удаление какой-то конкретной записи, и стандартный запрос обычно имеет вид:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DELETE FROM</span> <span class="text-yellow">таблица</span>  
<span class="text-brown">WHERE</span> <span class="text-green">id</span> = <span class="text-viola">133</span>;
        </code></pre>
</div>
<p>Это единственный запрос, где не нужно указывать имена колонок: данные ведь удаляются сразу строками.</p>
<p>Второй сценарий – это <strong>удаление строк, которые заданы списком id</strong>, тут тоже все довольно просто:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DELETE FROM</span> <span class="text-yellow">таблица</span>  
<span class="text-brown">WHERE</span> <span class="text-green">id</span> <span class="text-brown">IN</span> <span class="text-viola">(1, 2, 3, …)</span>;
        </code></pre>
</div>
<p>Третий сценарий – это удаление строк, которые соответствуют определенному условию:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DELETE FROM</span> <span class="text-yellow">таблица</span>  
<span class="text-brown">WHERE</span> <span class="text-user">условие</span>;
        </code></pre>
</div>
<p>Допустим, мы хотим уволить всех наших программистов, тогда нужно написать запрос типа:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DELETE FROM</span> <span class="text-yellow">employee</span>  
<span class="text-brown">WHERE</span> <span class="text-green">occupation</span> = <span class="text-user">'Программист'</span>;
        </code></pre>
</div>
<p>И, наконец, если ты хочешь удалить все записи, то можешь написать такой запрос:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DELETE FROM</span> <span class="text-yellow">таблица</span> 
</code></pre> 
</div>
<p>Такого простого запроса достаточно, чтобы удалить все записи из таблицы. Кстати, никакого Ctrl+Z при этом не будет. Записи просто удаляются без возможности восстановления и все. <strong>Так что делай бэкапы, да почаще</strong>.</p>
<h2>5.2 Удаляем вообще все</h2>
<p>Для быстрого удаления (чтобы добавить юзерам головной боли) у SQL есть еще несколько команд.</p>
<p>Как быстро удалить все данные в таблице? Воспользуйся <strong>оператором</strong> <code>TRUNCATE</code>:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">TRUNCATE TABLE</span> <span class="text-yellow">таблица</span>
        </code></pre>
</div>
<p>Одна опечатка в названии таблицы — и пара дней восстановления данных тебе обеспечены. Радуйся, что ты не админ баз данных.</p>
<p>Если тебе нужно удалить не просто данные в таблице, а и саму таблицу, то для этого есть <strong>оператор</strong> <code>DROP</code>:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DROP TABLE</span> <span class="text-yellow">таблица</span>
        </code></pre>
</div>
<p>Кстати, аналогичные варианты есть и со <strong>схемами баз данных</strong>. Если хочешь удалить саму базу, то:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DROP SCHEME</span> <span class="text-yellow">база_данных</span>
        </code></pre>
</div>
<p>или:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
<span class="text-brown">DROP DATABASE</span> <span class="text-yellow">база_данных</span>
        </code></pre>
</div>
<p>Также с помощью DROP можно удалять:</p>
<ul>
	<li>EVENT</li>
	<li>FUNCTION</li>
	<li>PROCEDURE</li>
	<li>INDEX</li>
	<li>VIEW</li>
	<li>TRIGGER</li>
</ul>
<p>И вот тебе пару интересных историй, связанных с удалением данных:</p>
<p><a href="https://secretmag.ru/news/proval-dnya-gitlab-udalil-300-gb-dannyh-klientov-iz-za-oshibki-sisadmina-01-02-2017.htm" target="_blank">Провал дня. GitLab удалил 300 ГБ данных клиентов из-за ошибки сисадмина</a></p>
<p><a href="https://habr.com/ru/company/southbridge/blog/321074/" target="_blank">sudo rm -rf, или Хроника инцидента с базой данных GitLab.com от 2017/01/31</a></p>
<p><a href="https://www.youtube.com/watch?v=SOuhTLeyVCE" target="_blank">Кремниевая Долина "Silicon Valley" - Удаление данных</a> </p>