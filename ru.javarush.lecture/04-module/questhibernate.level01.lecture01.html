Язык SQL
<p>----------------------------------------</p>
Знакомство с языком SQL
Расширенный вид SQL-запроса
Комментарии в SQL запросах
Произношение SQL
<p>----------------------------------------</p>
<h2>2.1 Знакомство с языком SQL</h2>
<p>Если у тебя есть база данных (БД), а в ней – таблица с какими-то данными, то наиболее часто возникающая задача – это найти определенные данные в этой таблице. Именно для этого 40 лет назад был придуман язык SQL. </p>
<p>SQL расшифровывается как <strong>Structured Query Language</strong>.</p>
<p>Самый простой SQL-запрос имеет вид:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> колонка1, колонка2, … колонкаN <span class="text-red">FROM</span> таблица
        </code></pre>
</div>
<p>Допустим, у тебя есть <strong>таблица employee</strong> со списком сотрудников вашего стартапа:</p>
<table>
    <tbody>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>occupation</th>
        <th>salary</th>
        <th>age</th>
        <th>join_date</th>
    </tr>
    <tr>
    	<td>1</td>
        <td>Иванов Иван</td>
        <td>Программист</td>
        <td>100,000</td>        
        <td>25</td>
        <td>2012-06-30</td>
        
    </tr>
    <tr>
        <td>2</td>
        <td>Петров Петр</td>
        <td>Программист</td>        
        <td>80,000</td>
        <td>23</td>
        <td>2013-08-12</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Иванов Сергей</td>
        <td>Тестировщик</td>        
        <td>40,000</td>
        <td>30</td>
        <td>2014-01-01</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Рабинович Мойша</td>
        <td>Директор</td>        
        <td>200,000</td>
        <td>35</td>
        <td>2015-05-12</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Кириенко Анастасия</td>
        <td>Офис-менеджер</td>        
        <td>40,000</td>
        <td>25</td>
        <td>2015-10-10</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Васька</td>
        <td>кот</td>        
        <td>1,000</td>
        <td>3</td>
        <td>2018-01-01</td>
    </tr>

    </tbody>
</table>
<p>Ты хочешь написать запрос, который отобразит <code class="text-green">имена сотрудников</code> и их <code class="text-user">зарплаты</code>, тогда тебе нужно написать запрос:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> <span class="text-green">name</span>, <span class="text-user">salary</span> <span class="text-red">FROM</span> <span class="text-yellow">employee</span>
        </code></pre>
    </div>
<p>Ты получишь результат запроса:</p>
<table>
    <tbody>
    <tr>
        <th>name</th>
        <th>salary</th>
    </tr>
    <tr>
        <td>Иванов Иван</td>
        <td>100,000</td>
    </tr>
    <tr>
        <td>Петров Петр</td>
        <td>80,000</td>
    </tr>
    <tr>
        <td>Иванов Сергей</td>
        <td>40,000</td>
    </tr>
    <tr>
        <td>Рабинович Мойша</td>
        <td>200,000</td>
    </tr>
    <tr>
        <td>Кириенко Анастасия</td>
        <td>40,000</td>
    </tr>
    <tr>
        <td>Васька</td>
        <td>1,000</td>
    </tr>

    </tbody>
</table>
<p>Если хочешь отобразить <strong>все колонки своей таблицы</strong>, то вместо перечисления имен всех колонок можно просто написать звездочку. Пример: </p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> * <span class="text-red">FROM</span> <span class="text-yellow">employee</span>
        </code></pre>
    </div>
<p>Ты получишь результат запроса:</p>

<table>
    <tbody>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>occupation</th>
        <th>salary</th>
        <th>age</th>
        <th>join_date</th>
    </tr>
    <tr>
    	<td>1</td>
        <td>Иванов Иван</td>
        <td>Программист</td>
        <td>100,000</td>        
        <td>25</td>
        <td>2012-06-30</td>
        
    </tr>
    <tr>
        <td>2</td>
        <td>Петров Петр</td>
        <td>Программист</td>        
        <td>80,000</td>
        <td>23</td>
        <td>2013-08-12</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Иванов Сергей</td>
        <td>Тестировщик</td>        
        <td>40,000</td>
        <td>30</td>
        <td>2014-01-01</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Рабинович Мойша</td>
        <td>Директор</td>        
        <td>200,000</td>
        <td>35</td>
        <td>2015-05-12</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Кириенко Анастасия</td>
        <td>Офис-менеджер</td>        
        <td>40,000</td>
        <td>25</td>
        <td>2015-10-10</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Васька</td>
        <td>кот</td>        
        <td>1,000</td>
        <td>3</td>
        <td>2018-01-01</td>
    </tr>

    </tbody>
</table>

<h2>2.2 Расширенный вид SQL-запроса</h2>
<p>Язык SQL спроектировали максимально user-friendly.</p>
<p>Во-первых, <strong>регистр текста запроса не играет значения</strong>. Ты можешь написать SELECT, Select, или select и все будет работать. Во-вторых, <strong>перенос строк никак не учитывается</strong>. СУБД все равно превратит запрос в одну длинную строку, так что можешь писать ее как тебе будет угодно.</p>
<p>Как ты уже, наверное, догадываешься, ключевыми словами SELECT и FROM дело не ограничивается. Иначе бы не было столько разговоров вокруг SQL.  Расширенный вид SQL запроса имеет вид:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
  <span class="text-red">SELECT</span> колонки 
  <span class="text-red">FROM</span> таблица
  <span class="text-orange">WHERE</span> условие
  <span class="text-orange">GROUP BY</span> колонки
  <span class="text-orange">HAVING</span> колонки
  <span class="text-orange">ORDER BY</span> сортировка
        </code></pre>
    </div>
<p>С помощью ключевого слова <code>WHERE</code> ты можешь задать условие / фильтр для выбираемых строк.</p>
<p><strong>Пример 1</strong>. Давай напишем запрос, который отберет сотрудников с профессией «Программист»:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> * <span class="text-red">FROM</span> <span class="text-yellow">employee</span> <span class="text-red">WHERE</span> <span class="text-user">occupation</span> = <span class="text-green">'Программист'</span>
        </code></pre>
    </div>
<p>И получим такой результат запроса:</p>
<table>
    <tbody>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>occupation</th>
        <th>salary</th>
        <th>age</th>
        <th>join_date</th>
    </tr>
    <tr>
    	<td>1</td>
        <td>Иванов Иван</td>
        <td>Программист</td>
        <td>100,000</td>        
        <td>25</td>
        <td>2012-06-30</td>
        
    </tr>
    <tr>
        <td>2</td>
        <td>Петров Петр</td>
        <td>Программист</td>        
        <td>80,000</td>
        <td>23</td>
        <td>2013-08-12</td>
    </tr>
    </tbody>
</table>
<p>Как видишь, в результате выполнения запроса отображаются только строки, где профессия сотрудника называется «Программист».</p>
<p>Ключевые слова <code>GROUP BY</code>, <code>ORDER BY</code> и <code>HAVING</code> мы рассмотрим в следующих лекциях. А в этой разберем еще парочку примеров со словом WHERE.  </p>
<p><strong>Пример 2</strong>. Теперь давай напишем запрос, который покажет нам всех сотрудников с зарплатой больше 100К. Вот как он будет выглядеть:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> * <span class="text-red">FROM</span> <span class="text-yellow">employee</span> <span class="text-red">WHERE</span> <span class="text-user">salary</span> &gt; 100000

        </code></pre>
    </div>
<p>Получим такой результат запроса:</p>
<table>
    <tbody>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>occupation</th>
        <th>salary</th>
        <th>age</th>
        <th>join_date</th>
    </tr>
    <tr>
        <td>4</td>
        <td>Рабинович Мойша</td>
        <td>Директор</td>        
        <td>200,000</td>
        <td>35</td>
        <td>2015-05-12</td>
    </tr>
    </tbody>
</table>
<p><strong>Пример 3</strong>. А теперь попробуем что-нибудь посложнее. Как отобразить всех сотрудников, которые были наняты в 2015 году? А вот так:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> * <span class="text-red">FROM</span> <span class="text-yellow">employee</span> <span class="text-red">WHERE</span> <span class="text-user">YEAR(join_date)</span> = 2015
        </code></pre>
    </div>
<p>Получим такой результат запроса:</p>
<table>
    <tbody>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>occupation</th>
        <th>salary</th>
        <th>age</th>
        <th>join_date</th>
    </tr>
    <tr>
        <td>4</td>
        <td>Рабинович Мойша</td>
        <td>Директор</td>        
        <td>200,000</td>
        <td>35</td>
        <td>2015-05-12</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Кириенко Анастасия</td>
        <td>Офис-менеджер</td>        
        <td>40,000</td>
        <td>25</td>
        <td>2015-10-10</td>
    </tr>
    </tbody>
</table>
<p>В этом запросе мы используем специальную функцию <code>YEAR()</code>, которая позволяет получить год из даты, а затем сравниваем год даты с числом 2015.</p>
<h2>2.3 Комментарии в SQL запросах</h2>
<p>И еще один важный момент – это комментарии в SQL-запросах. Комментарии – это очень полезная вещь. Во-первых, в них можно писать пояснения и / или свои идеи. Во-вторых, с помощью комментариев можно отключить неработающий код. Или закомментировать старый вариант кода.</p>
<p>В SQL, как и в Java, есть однострочные и многострочные комментарии. Более того, многострочный комментарий выглядит совсем как в Java. Его вид:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present"><code>
/*
 	текст комментария
 	текст комментария
 	текст комментария
*/
        </code></pre>
</div>
<p>Конечно, его можно использовать и в одну строку тоже. Пример:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present"><code>
/*текст комментария*/
        </code></pre>
</div>
<p>Также есть вид комментария «от начала и до конца строки», аналогичный джавовому «//». Только в SQL нужно написать <strong>два символа минус и пробел</strong>. Общий вид такого комментария:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
-- текст комментария
        </code></pre>
</div>
<p>Пример:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present"><code>
        <span class="text-red">SELECT</span> * <span class="text-red">FROM</span> <span class="text-yellow">employee</span> <span class="token comment">-- WHERE YEAR(join_date) = 2015 </span>
        </code></pre>
    </div>
<p>В примере выше мы закомментировали условие запроса, поэтому MySQL выполнит только запрос:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">SELECT</span> * <span class="text-red">FROM</span> <span class="text-yellow">employee</span>
        </code></pre>
    </div>
<h2>2.4 Произношение SQL</h2>
<p>Если ты будешь общаться с иностранными заказчиками или проходить онлайн собеседование в американскую компанию, то тебя могут спросить про опыт работы с <strong>языком сиквел</strong>. Ты честно скажешь, что с ним не работал и тут же завалишь собеседование.</p>
<p>А все дело в том, что язык SQL изначально назывался SEQUEL, что произносится как <strong>сиквел</strong> (ˈsēkwəl), поэтому очень часто в США и других англоязычных источниках вы будете слышать не «эскюэль», а «сиквел». Пишется SQL, а читается сиквел. Вот такой вот исторический парадокс.</p>

