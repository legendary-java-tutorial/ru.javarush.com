Основные этапы проектирования баз данных
<p>----------------------------------------</p>
Определяемся с сущностями
Определяемся с таблицами и полями
Определяемся с зависимостями
Физическое проектирование
<p>----------------------------------------</p>
<h2>2.1. Концептуальное проектирование </h2>
<p>Проектирование базы данных осуществляется в три этапа: </p>
<ol>
	<li>концептуальное проектирование; </li>
	<li>логическое проектирование;</li>
	<li>физическое проектирование. </li>
</ol>
<p>Цель этапа <strong>концептуального проектирования</strong> – создание концептуальной модели данных исходя из представлений пользователей о предметной области. Для ее достижения выполняется ряд последовательных процедур. 
Пример сущностной (концептуальной) схемы: </p>
<img data-max-width="512" data-id="1f15edd2-6cd1-40a5-8563-9d52fcab7db0" src="https://cdn.javarush.com/images/article/1f15edd2-6cd1-40a5-8563-9d52fcab7db0/512.jpeg" alt="">
<p><strong>1. Определение сущностей и их документирование.</strong> Для идентификации сущностей определяются объекты, которые существуют независимо от других. Такие объекты являются сущностями. Каждой сущности присваивается осмысленное имя, понятное пользователям. Имена и описания сущностей заносятся в словарь данных. Если возможно, то устанавливается ожидаемое количество экземпляров каждой сущности. </p>
<p><strong>2. Определение связей между сущностями и их документирование.</strong> Определяются только те связи между сущностями, которые необходимы для удовлетворения требований к проекту базы данных. Устанавливается тип каждой из них. Выявляется класс принадлежности сущностей. Связям присваиваются осмысленные имена, выраженные глаголами. Развернутое описание каждой связи с указанием ее типа и класса принадлежности сущностей, участвующих в связи, заносится в словарь данных. </p>
<p><strong>3. Создание ER-модели предметной области.</strong> Для представления сущностей и связей между ними используются ER-диаграммы. На их основе создается единый наглядный образ моделируемой предметной области – ER-модель предметной области. </p>
<p><strong>4. Определение атрибутов и их документирование.</strong> Выявляются все атрибуты, описывающие сущности созданной ER-модели. Каждому атрибуту присваивается осмысленное имя, понятное пользователям. О каждом атрибуте в словарь данных помещаются следующие сведения:</p>
<ul>
	<li>имя атрибута и его описание; </li>
	<li>тип и размерность значений; </li>
	<li>значение, принимаемое для атрибута по умолчанию (если такое имеется); </li>
	<li>может ли атрибут иметь NULL-значения; </li>
	<li>является ли атрибут составным, и если это так, то из каких простых атрибутов он состоит. Например, атрибут "Ф.И.О. клиента" может состоять из простых атрибутов "Фамилия", "Имя", "Отчество", а может быть простым, содержащим единые значения, как-то "Сидорский Евгений Михайлович". Если пользователь не нуждается в доступе к отдельным элементам "Ф.И.О.", то атрибут представляется как простой; </li>
	<li>является ли атрибут расчетным, и если это так, то как вычисляются его значения. </li>
</ul>
<p><strong>5. Определение значений атрибутов и их документирование.</strong> Для каждого атрибута сущности, участвующей в ER-модели, определяется набор допустимых значений и ему присваивается имя. Например, атрибут "Тип счета" может иметь только значения "депозитный", "текущий", "до востребования", "карт-счет". Обновляются записи словаря данных, относящиеся к атрибутам, – в них заносятся имена наборов значений атрибутов. 
</p>
<p><strong>6. Определение первичных ключей для сущностей и их документирование.</strong> На этом шаге руководствуются определением первичного ключа – как атрибута или набора атрибутов сущности, позволяющего уникальным образом идентифицировать ее экземпляры. Сведения о первичных ключах помещаются в словарь данных. 
</p>
<p><strong>7. Обсуждение концептуальной модели данных с конечными пользователями.</strong> Концептуальная модель данных представляется ER-моделью с сопроводительной документацией, содержащей описание разработанной модели данных. Если будут обнаружены несоответствия предметной области, то в модель вносятся изменения до тех пор, пока пользователи не подтвердят, что предложенная им модель адекватно отображает их личные представления.</p>
<h2>2.2 Логическое проектирование</h2>
<p>Цель этапа логического проектирования – преобразование концептуальной модели на основе выбранной модели данных в логическую модель, не зависимую от особенностей используемой в дальнейшем СУБД для физической реализации базы данных. Для ее достижения выполняются следующие процедуры. </p>
<p>Пример логической схемы БД. </p>
<img data-max-width="800" data-id="b0705daf-febc-4ae7-910b-90dc0ea8c852" src="https://cdn.javarush.com/images/article/b0705daf-febc-4ae7-910b-90dc0ea8c852/800.jpeg" alt="">
<p><strong>1. Выбор модели данных.</strong> Чаще всего выбирается реляционная модель данных в связи с наглядностью табличного представления данных и удобства работы с ними.</p>
<p><strong>2. Определение набора таблиц исходя из ER-модели и их документирование.</strong> Для каждой сущности ER-модели создается таблица. Имя сущности – имя таблицы. Устанавливаются связи между таблицами посредством механизма первичных и внешних ключей. Структуры таблиц и установленные связи между ними документируются. </p>
<p><strong>3. Нормализация таблиц.</strong> Для правильного выполнения нормализации проектировщик должен глубоко изучить семантику и особенности использования данных. На этом шаге он проверяет корректность структуры таблиц, созданных на предыдущем шаге, посредством применения к ним процедуры нормализации. Она заключается в приведении каждой из таблиц, по крайней мере, к 3-й НФ. В результате нормализации получается очень гибкий проект базы данных, позволяющий легко вносить в нее нужные расширения. </p>
<p><strong>4. Проверка логической модели данных на предмет возможности выполнения всех транзакций, предусмотренных пользователями.</strong> Транзакция – это набор действий, выполняемых отдельным пользователем или прикладной программой с целью изменения содержимого базы данных. Так, примером транзакции в проекте БАНК может быть передача права распоряжаться счетами некоторого клиента другому клиенту. В этом случае в базу данных потребуется внести сразу несколько изменений. Если во время выполнения транзакции произойдет сбой в работе компьютера, то база данных окажется в противоречивом состоянии, так как некоторые изменения уже будут внесены, а остальные еще нет. Поэтому все частичные изменения должны быть отменены для возвращения базы данных в прежнее непротиворечивое состояние.</p>
<p>Перечень транзакций определяется действиями пользователей в предметной области. Используя ER-модель, словарь данных и установленные связи между первичными и внешними ключами, производится попытка выполнить все необходимые операции доступа к данным вручную. Если какую-либо операцию выполнить вручную не удается, то составленная логическая модель данных является неадекватной и содержит ошибки, которые надо устранить. Возможно, они связаны с пропуском в модели сущности, связи или атрибута. </p>
<p><strong>5. Определение требований поддержки целостности данных и их документирование.</strong> Эти требования представляют собой ограничения, которые вводятся с целью предотвратить помещение в базу данных противоречивых данных. На этом шаге вопросы целостности данных освещаются безотносительно к конкретным аспектам ее реализации. Должны быть рассмотрены следующие типы ограничений: </p>
<ul>
	<li><strong>обязательные данные.</strong> Выясняется, есть ли атрибуты, которые не могут иметь NULL-значений; </li>
	<li><strong>ограничения для значений атрибутов.</strong> Определяются допустимые значения для атрибутов;</li>
	<li><strong>целостность сущностей.</strong> Она достигается, если первичный ключ сущности не содержит NULL-значений; </li>
	<li><strong>ссылочная целостность.</strong> Она понимается так, что значение внешнего ключа должно обязательно присутствовать в первичном ключе одной из строк таблицы для родительской сущности;</li>
	<li><strong>ограничения, накладываемые бизнес-правилами.</strong> Например, в случае с проектом БАНК может быть принято правило, запрещающее клиенту распоряжаться, скажем, более чем тремя счетами. </li>
</ul>
<p>Сведения обо всех установленных ограничениях целостности данных помещаются в словарь данных. </p>
<p><strong>6. Создание окончательного варианта логической модели данных и обсуждение его с пользователями.</strong> На этом шаге подготавливается окончательный вариант ER-модели, представляющей логическую модель данных. Сама модель и обновленная документация, включая словарь данных и реляционную схему связи таблиц, представляется для просмотра и анализа пользователям, которые должны убедиться, что она точно отображает предметную область.</p>
<h2>2.3. Физическое проектирование </h2>
<p>Цель этапа физического проектирования – описание конкретной реализации базы данных, размещаемой во внешней памяти компьютера. Это описание структуры хранения данных и эффективных методов доступа к данным базы. При логическом проектировании отвечают на вопрос – что надо сделать, а при физическом – выбирается способ, как это сделать. Процедуры физического проектирования следующие. </p>
<p><strong>1. Проектирование таблиц базы данных средствами выбранной СУБД.</strong> Осуществляется выбор реляционной СУБД, которая будет использоваться для создания базы данных, размещаемой на машинных носителях. Глубоко изучаются ее функциональные возможности по проектированию таблиц. Затем выполняется проектирование таблиц и схемы их связи в среде СУБД. Подготовленный проект базы данных описывается в сопровождающей документации. </p>
<p><strong>2. Реализация бизнес-правил в среде выбранной СУБД.</strong> Обновление информации в таблицах может быть ограничено бизнес-правилами. Способ их реализации зависит от выбранной СУБД. Одни системы для реализации требований предметной области предлагают больше возможностей, другие – меньше. В некоторых системах вообще отсутствует поддержка реализации бизнес-правил. В таком случае разрабатываются приложения для реализации их ограничений. </p>
<p>Все решения, принятые в связи с реализацией бизнес-правил предметной области, подробно описываются в сопроводительной документации. </p>
<p><strong>3. Проектирование физической организации базы данных.</strong> На этом шаге выбирается наилучшая файловая организация для таблиц. Выявляются транзакции, которые будут выполняться в проектируемой базе данных, и выделяются наиболее важные из них. Анализируется пропускная способность транзакций – количество транзакций, которые могут быть обработаны за заданный интервал времени, и время ответа – промежуток времени, необходимый для выполнения одной транзакции. Стремятся к повышению пропускной способности транзакций и уменьшению времени ответа. </p>
<p>На основании указанных показателей принимаются решения об оптимизации производительности базы данных путем определения индексов в таблицах, ускоряющих выборку данных из базы, или снижения требований к уровню нормализации таблиц. Проводится оценка дискового объема памяти, необходимого для размещения создаваемой базы данных. Стремятся к его минимизации. </p>
<p>Принятые решения по изложенным вопросам документируются. </p>
<p><strong>4. Разработка стратегии защиты базы данных.</strong> База данных представляет собой ценный корпоративный ресурс, и организации ее защиты уделяется большое внимание.  Для этого проектировщики должны иметь полное и ясное представление обо всех средствах защиты, предоставляемых выбранной СУБД. </p>
<p><strong>5. Организация мониторинга функционирования базы данных и ее настройка.</strong> После создания физического проекта базы данных организуется непрерывное слежение за ее функционированием.  Полученные сведения об уровне производительности базы данных используются для ее настройки. Для этого привлекаются и средства выбранной СУБД. </p>
<p>Решения о внесении любых изменений в функционирующую базу данных должны быть обдуманными и всесторонне взвешенными.</p>
