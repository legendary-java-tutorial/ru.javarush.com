Формат данных XML
<p>----------------------------------------</p>
Текстовые форматы удобны для хранения информации, потому что могут быть созданы и обработаны как программами, так и человеком. Текстовые файлы (файлы в текстовом формате) можно открыть, прочитать и отредактировать в большом количестве...
<p>----------------------------------------</p>
    <h2>Зачем нужны текстовые форматы?</h2>

    <p>Текстовые форматы удобны для хранения информации, потому что могут быть созданы и обработаны как программами, так и человеком.</p>

    <p>Текстовые файлы (файлы в текстовом формате) можно открыть, прочитать и отредактировать в большом количестве текстовых редакторов.</p>

    <p>В файлах конфигурации многих программ применяется текстовый формат, даже если там представлены числа и двоичные переключатели (да / нет). </p>

    <p>Это несколько усложняет программы из-за необходимости преобразования текстовых данных во внутренний формат и обратно, но зато дает возможность править конфигурацию вручную, без использования средств настройки самой программы.</p>

    <h2>Где сейчас используют XML?</h2>

    <p>XML используют в различных сферах IT. Это могут быть как файлы конфигураций (настроек) программ, так и файлы, при помощи которых данные передаются между программами. Один из наиболее распространенных случаев использования в Java – в конфигурировании инструмента для автоматизации сборки проектов Maven.</p>

    <h2>Структура XML-документа</h2>

    <p>Выделяют физическую и логическую структуры документа XML. Согласно физической структуре документ состоит из сущностей (entities), каждая из которых может ссылаться на другую. </p>

    <p>Единственный корневой элемент — документная сущность. Сущность — это самая маленькая часть в документе. У всех сущностей есть имя и они содержат символы.</p>

    <p>Символы в свою очередь разделены на два типа: символы данных (character data) и символы разметки. </p>

    <p>К разметке относятся:</p>

    <ul>
        <li>теги (tags), обозначают границы элементов,</li>
        <li>объявления и инструкции обработки, включая их атрибуты (attributes),</li>
        <li>ссылки на сущности,</li>
        <li>комментарии,</li>
        <li>последовательности символов, обрамляющие секции "CDATA".</li>
    </ul>

    <p>Согласно логической структуре документ состоит из элементов (elements), комментариев (comments), объявлений (declarations), ссылок на сущности (character references) и инструкций обработки (processing instructions). Все это в документе структурируется разметкой (markup).</p>

    <p>Все составляющие части документа делятся на пролог и корневой элемент. Корневой элемент — обязательная часть, составляющая суть XML-документа, а пролог может вообще не существовать. Корневой элемент может состоять из вложенных элементов, символьных данных и комментариев. Вложенность элементов документа должна быть правильной: любой элемент, который начинается внутри другого, должен заканчиваться внутри этого же элемента.</p>

    <h2>Символы разметки</h2>

    <p>Разметка всегда начинается символом <span class="code">&lt;</span> и заканчивается символом <span class="code">&gt;</span>.</p>

    <p>Вместе с символами <span class="code">&lt;</span> и <span class="code">&gt;</span> (угловые скобки) специальную роль отведена также символу <span class="code">&</span> (амперсанд). Границы элементов, инструкций обработки и некоторых других последовательностей обозначаются угловыми скобками. Амперсанд же помогает при замене текста при помощи сущностей.</p>

    <h2>Объявление XML</h2>

    <p>При объявлении XML указывается версия языка, использованная для написания документа. Спецификация предписывает начинать документ с объявления XML, потому что от версии языка зависит трактование содержимого документа. </p>

    <p>И если в первой (1.0) версии языка объявление было не обязательным, то в новых версиях это обязательно, и если объявление отсутствует, то под этим понимается версия 1.0. В объявлении также может содержаться информация о кодировке документа.</p>

    <p>Пример:</p>

    <div class="terminal">&lt;?XML version="1.1" encoding="UTF-8" ?&gt;</div>

    <h2>Теги</h2>

    <p>Тег (tag) — конструкция разметки, которая содержит имя элемента. Теги могут быть открывающимися (начальными) и закрывающимися (конечными). Также существуют теги пустого элемента, которые совмещают в себе открывающийся и закрывающийся.</p>

    <p>Примеры:</p>

    <ul>
        <li><p>Начальный тег: <span class="code">&lt;tag1&gt;</span></p></li>
        <li><p>Конечный тег: <span class="code">&lt;/tag1&gt;</span></p></li>
        <li><p>Тег пустого элемента: <span class="code">&lt;empty_tag1 /&gt;</spam></p></li>
    </ul>

    <h2>Атрибуты</h2>

    <p>Еще одной частью элементов XML являются атрибуты. У элемента может быть несколько уникальных атрибутов. Атрибуты позволяют нам указать больше информации об элементе. Правильнее сказать, что атрибуты определяют свойства элементов. </p>

    <p>Атрибут всегда является парой имя=значение:</p>

    <div class="terminal">name = "value"</div>

    <p>Пример атрибута в теге:</p>

    <div class="terminal">&lt;tag1 name = "value"&gt;element&lt;/tag1&gt;</div>

    <p>Значение атрибута должно быть в двойных (<span class="code">""</span>) или в одинарных кавычках (<span class="code">''</span>). Атрибуты используются только в начальном теге и теге пустого элемента.</p>

    <h2>Кодировка пяти служебных символов (&lt;,&gt;,’,”,&)</h2>

    <p>Очевидно, что символы <span class="code">&lt;</span>, <span class="code">&gt;</span> и <span class="code">&</span> не могут быть использованы в символьных данных и в значениях атрибутов в таком виде. Для их представления нужно использовать специальные последовательности. Также специальные последовательности используются при написании апострофов и кавычек внутри значений атрибутов:</p>

    <table>
        <tbody>
            <tr>
                <th>Символ</th>
                <th>Замена</th>
            </tr>
            <tr>
                <td>&lt;</td>
                <td>&amp;lt;</td>
            </tr>
            <tr>
                <td>&gt;</td>
                <td>&amp;gt;</td>
            </tr>
            <tr>
                <td>&</td>
                <td>&amp;amp;</td>
            </tr>
            <tr>
                <td>'</td>
                <td>&amp;apos;</td>
            </tr>
            <tr>
                <td>"</td>
                <td>&amp;quot;</td>
            </tr>
        </tbody>
    </table>

    <p>Кроме того, для написания символа <span class="code">\</span> необходимо использовать <span class="code">\\</span>.</p>

    <h2>Секция CDATA</h2>

    <p>Секция CDATA не является логической единицей текста. Эта секция может встречаться в документе в том месте, где синтаксис позволяет нам размещать символьные данные. </p>

    <p>Секция начинается с <span class="code">&lt;![CDATA[</span> и завершается <span class="code">]]&gt;</span>. Между этой разметкой размещаются символьные данные, и при этом символы <span class="code">&lt;</span>, <span class="code">&gt;</span> и <span class="code">&</span> могут быть использованы в их непосредственной форме.</p>
    
    <h2>Комментарии</h2>

    <p>Комментарии (comment) не относятся к символьным данным документа. Комментарий начинается с <span class="code">&lt;!--</span> и заканчивается <span class="code">--&gt;</span>, внутри комментария не может быть использована последовательность символов <span class="code">--</span>. Также внутри комментария символ амперсанда не используется в качестве разметки.</p>

    <p>Пример:</p>

    <div class="terminal">&lt;!-- это комментарий --&gt;</div>

    <h2>Имена</h2>

    <p>В языке XML все имена могут содержать только буквы, входящие в секцию букв кодировки Unicode, цифры (арабские), точки, двоеточия, дефисы и знаки подчеркивания. Начинаться имена могут с буквы, двоеточия или символа подчеркивания. Обрати внимание, что строка <span class="code">XML</span> в любом регистре не может быть началом для имени.</p>

    <h4>Пример</h4>

    <p>Посмотрим на Java-класс и объект этого класса. Потом попробуем сериализовать объект в формат XML. Код класса:</p>

    <pre class='language-java line-numbers'><code>
public class Book {
   private String title;
   private String author;
   private Integer pageCount;
   private List&lt;String&gt; chapters;

   public Book(String title, String author, Integer pageCount, List&lt;String&gt; chapters) {
       this.title = title;
       this.author = author;
       this.pageCount = pageCount;
       this.chapters = chapters;
   }
// геттеры/сеттеры
}
</code></pre>

    <p>и создание объекта:</p>

    <pre class='language-java line-numbers'><code>
Book book = new Book("My Favorite Book", "Amigo", 999, Arrays.asList("Chapter 1", "Chapter 2", "Chapter 3", "Chapter 4", "Chapter 5", "Chapter 6"));
</code></pre>

    <p>Вот так выглядит пример валидного XML-представления Java-объекта, который содержит 4 поля, одно из которых представляет собой коллекцию (Java-код выше):</p>

    <div class="terminal">&lt;Book&gt;<br />
&nbsp;&nbsp;&lt;title&gt;My Favorite Book&lt;/title&gt;<br />
&nbsp;&nbsp;&lt;author&gt;Amigo&lt;/author&gt;<br />
&nbsp;&nbsp;&lt;pageCount&gt;999&lt;/pageCount&gt;<br />
&nbsp;&lt;chapters&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;chapters&gt;Chapter 1&lt;/chapters&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;chapters&gt;Chapter 2&lt;/chapters&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;chapters&gt;Chapter 3&lt;/chapters&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;chapters&gt;Chapter 4&lt;/chapters&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;chapters&gt;Chapter 5&lt;/chapters&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;chapters&gt;Chapter 6&lt;/chapters&gt;<br />
&nbsp;&lt;/chapters&gt;<br />
&lt;/Book&gt;</div>

    <h2>XML Schema</h2>

    <p>XML Schema — язык описания структуры XML-документа. Спецификация XML Schema является рекомендацией W3C.</p>

    <p>XML Schema была придумана для определения правил, которым должен подчиняться XML-документ. Но что самое интересное, XML Schema была разработана так, чтобы ее можно было использовать при разработке ПО для обработки XML-документов, то есть мы можем проверять корректность XML-документа программно.</p>

    <p>Файл, который содержит XML Schema, имеет расширение «.xsd» (XML Schema definition). Проектирование XML Schema выходит за рамки этой лекции, поэтому просто знай, что такая возможность существует.</p>