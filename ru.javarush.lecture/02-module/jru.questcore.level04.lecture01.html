Оператор instanceof
<p>----------------------------------------</p>
Сегодня мы продолжим знакомство с оператором instanceof. Вы уже слышали о таком в предыдущих лекциях, он проверяет, является ли объект объектом определенного класса. Сегодня вы изучите, при каких обстоятельствах, как и где его можно и нужно использовать, учитывает ли он наследование и интерфейсы.
<p>----------------------------------------</p>
<p>&#8212; Привет, Амиго! Ты уже раньше знакомился с оператором <strong><span class="text-red">instanceof</span></strong>. Сегодня я расскажу тебе, как и где его можно использовать. <strong>instanceof</strong> – это очень простой и эффективный в использовании оператор.</p>
<p><span class="text-user">&#8212; Звучит, как реклама!</span></p>
<p>&#8212; Он, и правда, очень простой. Он используется в виде: <strong><span class="text-red">«объект» instanceof «класс».</span></strong></p>
<p>Он проверяет, является ли объект объектом определенного класса. Все еще проще, чем я говорю. Смотри пример:</p>
<table>
<tbody>
<tr>
<th>Код</th>
<th>Описание</th>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>Object o = new Integer(3);
boolean isInt = o <span class="text-red">instanceof</span> Integer;</code></pre>
</td>
<td><strong>isInt</strong> будет равно <strong>true</strong>. Объект, на который ссылается переменная o, является объектом класса <strong>Integer</strong>.</td>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>Object o = "Mama";
boolean isInt = o <span class="text-red">instanceof</span> Integer;</code></pre>
</td>
<td><strong>isInt</strong> будет равно <strong>false</strong>. Объект, на который ссылается переменная o, не является объектом класса <strong>Integer</strong>, он является объектом класса <strong>String</strong>.</td>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>InputStream is = new FileInputStream("");
boolean isFIS = is <span class="text-red">instanceof</span>
FileInputStream;</code></pre>
</td>
<td><strong>isFIS</strong> будет равно <strong>true</strong>. Объект, на который ссылается переменная is, является объектом класса <strong>FileInputStream</strong>.</td>
</tr>
</tbody>
</table>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.task14.task1423"></div>
<p><span class="text-user">&#8212; Да, очень просто.</span></p>
<p>&#8212; Этот оператор учитывает и наследование. Вот смотри.</p>
<table>
<tbody>
<tr>
<th>Код</th>
<th>Описание</th>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>class Animal
{
}
class Cat extends Animal
{
}
class Tiger extends Cat
{
}</code></pre>
</td>
<td>Тут мы видим три объявленных класса: животное, кот и тигр. Кот наследуется от Животного. А Тигр от Кота.</td>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>Object o = new Tiger();
boolean isCat = o instanceof Cat;
boolean isTiger = o instanceof Tiger;
boolean isAnimal = o instanceof Animal;</code></pre>
</td>
<td><strong>isCat</strong> будет равно <strong>true</strong>.<br />
<strong>isTiger</strong> будет равно <strong>true</strong>.<br />
<strong>isAnimal</strong> будет равно <strong>true</strong>.</td>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>Object o = new Animal();
boolean isCat = o instanceof Cat;
boolean isTiger = o instanceof Tiger;
boolean isAnimal = o instanceof Animal;</code></pre>
</td>
<td><strong>isCat</strong> будет равно <strong>false</strong>.<br />
<strong>isTiger</strong> будет равно <strong>false</strong>.<br />
<strong>isAnimal</strong> будет равно <strong>true</strong>.</td>
</tr>
</tbody>
</table>
<p>И даже интерфейсы:</p>
<table>
<tbody>
<tr>
<th>Код</th>
<th>Описание</th>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>interface Moveable
{
}
class Cat
{
}
class TomCat extends Cat implements Moveable
{
}</code></pre>
</td>
<td>Создадим два класса: Cat, TomCat и интерфейс Moveable</td>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>Cat o = new TomCat();
boolean isCat = o instanceof Cat;
boolean isMoveable = o instanceof Moveable;
boolean isTom = o instanceof TomCat;</code></pre>
</td>
<td><strong>isCat</strong> будет равно <strong>true</strong>.<br />
<strong>isMoveable</strong> будет равно <strong>true</strong>.<br />
<strong>isTom</strong> будет равно <strong>true</strong>.</td>
</tr>
<tr>
<td>
<pre class="line-numbers language-java" data-line="" data-start=""><code>Cat o = new Cat();
boolean isCat = o instanceof Cat;
boolean isMoveable = o instanceof Moveable;
boolean isTom = o instanceof TomCat;</code></pre>
</td>
<td><strong>isCat</strong> будет равно <strong>true</strong>.<br />
<strong>isMoveable</strong> будет равно <strong>false</strong>.<br />
<strong>isTom</strong> будет равно <strong>false</strong>.</td>
</tr>
</tbody>
</table>
<p>Оператор instanceof имеет вид: <strong><span class="text-red">a</span></strong> <strong>instanceof</strong> <strong><span class="text-user">B</span></strong>.</p>
<p>Другими словами, оператор <strong>instanceof</strong> вернет значение <strong>true</strong>, если:</p>
<p><strong>1)</strong> переменная <strong><span class="text-red">а</span></strong> хранит ссылку на объект типа <strong><span class="text-user">B</span></strong></p>
<p><strong>2)</strong> переменная <strong><span class="text-red">a</span></strong> хранит ссылку на объект, класс которого унаследован от <strong><span class="text-user">B</span></strong></p>
<p><strong>3)</strong> переменная <strong><span class="text-red">а</span></strong> хранит ссылку на объект реализующий интерфейс <span class="text-user"><strong>B</strong></span></p>
<p>Иначе оператор <strong>instanceof</strong> вернет значение <strong>false</strong>.</p>
<p><span class="text-user">&#8212; Понятно. А зачем это нужно, дядя Риша?</span></p>
<p>&#8212; Об этом сегодня тебе расскажет Элли. Это очень хороший оператор. Сегодня ты в этом убедишься.</p>
