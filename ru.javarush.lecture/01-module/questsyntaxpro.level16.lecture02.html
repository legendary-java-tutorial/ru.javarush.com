Класс Calendar
<p>----------------------------------------</p>
Переход от класса Date к классу Calendar
 
 Программисты любили класс Date за его простоту и поддержку стандартов Unix, но как известно, наши недостатки – это продолжения наших достоинств.
 Программисты хотели иметь «умный класс Date». И такой класс появился, им стал класс Calendar. Он задумывался
<p>----------------------------------------</p>
<h2>1. Переход от класса <code>Date</code> к классу <code>Calendar</code></h2>
<p><img data-id="0453906c-dc93-442f-882d-05a9d614734e" src="https://cdn.javarush.com/images/article/0453906c-dc93-442f-882d-05a9d614734e/original.png" alt="Переход от класса Date к классу Callendar"></p>
<p>Программисты любили класс <code>Date</code> за его простоту и поддержку стандартов Unix, но, как известно, наши недостатки — это продолжение наших достоинств.</p>
<p>Программисты хотели иметь «умный класс <code>Date</code>». И такой класс появился: им стал класс <code><span class="text-viola">Calendar</span></code>. Он задумывался как инструмент не только хранения, но и сложной работы с датами.</p>
<p>Полное имя класса <code>Calendar</code> — java.util.Calendar. Не забывайте добавлять его в import, если решите использовать в своем коде.</p>
<p>Создать объект <code>Calendar</code> можно командой:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Calendar</span> <span class="code text-green">date</span> = <span class="text-viola">Calendar</span>.<span class="text-orange">getInstance</span>();</code></pre>
</div>
<p>Статический метод <code><span class="text-orange">getInstance</span>()</code> класса <code><span class="text-viola">Calendar</span></code> создаст объект <code>Calendar</code>, инициализированный текущей датой. В зависимости от настроек компьютера, на котором выполняется программа, будет создан нужный календарь.</p>
<p>Более правильно было бы сказать — актуальный. Дело в том, что на Земле не один, а много календарей. И почти каждый из них связан с какой-нибудь религией или страной. Класс <code>Calendar</code> поддерживает 3 из них:</p>
<table>
    <tbody>
    <tr>
        <th>Календарь</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td><strong>GregorianCalendar</strong></td>
        <td>Христианский Григорианский календарь</td>
    </tr>
    <tr>
        <td><strong>BuddhistCalendar</strong></td>
        <td>Буддистский календарь</td>
    </tr>
    <tr>
        <td><strong>JapaneseImperialCalendar</strong></td>
        <td>Японский Императорский календарь</td>
    </tr>
    </tbody>
</table>
<p>А ведь есть еще Китайский и Арабский календари. В общем, работа со временем не такая простая, как кажется.</p>
<p><span class="text-viola">В Китае на момент написания этой лекции официально 4716 год. А по мусульманскому календарю — 1398. Добро пожаловать в большой мир, мой друг-программист.</span></p>
<h2>2. Создание объекта календарь</h2>
<p><span class="text-viola">Мы будем использовать Григорианский календарь как самый распространенный в мире. По крайней мере, пока Китай не купит компанию Oracle и не сделает свой календарь основным.</span></p>
<p>Объект календарь с произвольной датой создается командой:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Calendar</span> <span class="code text-green">date</span> = new <span class="text-neon">GregorianCalendar</span>(<span class="text-red">год</span>, <span class="text-red">месяц</span>, <span class="text-red">день</span>);</code></pre>
</div>
<p>Да, каждый раз придется писать <code><span class="text-neon">GregorianCalendar</span></code>. Можно и вместо <code><span class="text-viola">Calendar</span></code> писать <code>GregorianCalendar</code>: так тоже будет работать. Но просто <code>Calendar</code> писать короче.</p>
<p><span class="text-viola">Год нужно писать полностью: никаких 19 вместо 2019. Месяцы по-прежнему нумеруются с нуля. А дни месяца по-прежнему нумеруются не с нуля (слабаки!).</span></p>
<p>Чтобы задать не только дату, но и время, нужно передать их дополнительными параметрами:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present-sm language-java"><code>... = new <span class="text-neon">GregorianCalendar</span>(год, месяц, день, <span class="text-red">часы</span>, <span class="text-red">минуты</span>, <span class="text-red">секунды</span>);</code></pre>
</div>
<p>Можно даже передать миллисекунды, если это необходимо: их указывают следующим параметром после секунд.</p>
<h2>3. Вывод объекта календарь на экран</h2>
<p>Если просто вывести объект-календарь на экран, результат вас не сильно порадует.</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-viola">Calendar</span> <span class="text-green">calendar</span> = new <span class="text-neon">GregorianCalendar</span>(2019, 03, 12);
System.out.println(<span class="text-green">calendar</span>);</code></pre>
        </td>
    </tr>
    <tr>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre><code style="word-break: break-all; white-space: normal;">java.util.GregorianCalendar[time=?,areFieldsSet=false,areAllFieldsSet=false,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Europe/Helsinki",offset=7200000,dstSavings=3600000,useDaylight=true,transitions=118,lastRule=java.util.SimpleTimeZone[id=Europe/Helsinki,offset=7200000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=-1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=?,YEAR=2019,MONTH=3,WEEK_OF_YEAR=?,WEEK_OF_MONTH=?,DAY_OF_MONTH=12,DAY_OF_YEAR=?,DAY_OF_WEEK=?,DAY_OF_WEEK_IN_MONTH=?,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=?,ZONE_OFFSET=?,DST_OFFSET=?]</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Все дело в том, что <span class="text-viola">календарь — это именно календарь, а не дата</span>: у него много всяких настроек, и они все выводятся на экран.</p>
<p>Правильно будет отображать объект календарь с помощью класса <code>SimpleDateFormat</code>, но пока мы его не изучили, можно использовать лайфхак.</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>Date <span class="code text-user">date</span> = <span class="code text-orange">calendar</span>.<span class="text-red">getTime</span>();</code></pre>
</div>
<p>Дело в том, что объект типа <code>Calendar</code> можно легко преобразовать к объекту типа <code>Date</code>, а как выводить на экран объект типа <code>Date</code>, вы уже знаете. Примерно так можно преобразовать объект <code>Calendar</code> в <code>Date</code>:</p>
<p>Использование метода <code><span class="text-red">getTime</span>()</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-viola">Calendar</span> <span class="code text-green">calendar</span> = new <span class="text-neon">GregorianCalendar</span>(2019, 03, 12);
System.out.println(<span class="code text-green">calendar</span>.<span class="text-red">getTime</span>());</code></pre>
        </td>
        <td>
            <pre><code> Fri Apr 12 00:00:00 EEST 2019</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Совсем другое дело, не так ли?</p>
<h2>4. Работа с фрагментами даты</h2>
<p>Чтобы получить фрагмент даты (год, месяц, ...), у класса <code><span class="text-viola">Calendar</span></code> есть специальный метод — <code><span class="text-red">get</span>()</code>. Метод один, зато с параметрами:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>int <span class="code text-user">month</span> = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.<span class="text-orange">MONTH</span>);</code></pre>
</div>
<p>Где <code class="text-green">calendar</code> — это переменная типа <code><span class="text-viola">Calendar</span></code>, а <code><span class="text-orange">MONTH</span></code> — это переменная-константа класса <code><span class="text-viola">Calendar</span></code>.</p>
<p>В метод <code><span class="text-red">get</span></code> в качестве параметра вы передаете специальную константу класса <code><span class="text-viola">Calendar</span></code>, и в результате получаете нужное значение.</p>
<p>Примеры</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Calendar <span class="code text-green">calendar</span> = Calendar.getInstance();

int era = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.ERA);
int year = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.YEAR);
int month = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.MONTH);
int day = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.DAY_OF_MONTH);

int dayOfWeek = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.DAY_OF_WEEK);
int hour = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.HOUR);
int minute = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.MINUTE);
int second = <span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.SECOND);</code></pre>
        </td>
        <td><br><br>эра (до нашей эры или после)<br>
            год<br>
            месяц<br>
            день месяца<br><br>
            день недели<br>
            часы<br>
            минуты<br>
            секунды
        </td>
    </tr>
    </tbody>
</table>
<p>Для изменения фрагмента даты используется метод <code><span class="text-red">set</span></code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="code text-green">calendar</span>.<span class="text-red">set</span>(<span class="text-viola">Calendar</span>.<span class="text-orange">MONTH</span>, <span class="text-user">значение</span>);</code></pre>
</div>
<p>Где <code class="text-green">calendar</code> — это переменная типа <code><span class="text-viola">Calendar</span></code>, а <code><span class="text-orange">MONTH</span></code> — это переменная-константа класса <code><span class="text-viola">Calendar</span></code>.</p>
<p>В метод <code><span class="text-red">set</span></code> в качестве первого параметра вы передаете специальную константу класса <code><span class="text-viola">Calendar</span></code>, а в качестве второго параметра — новое значение.</p>
<p>Примеры</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Calendar <span class="code text-green">calendar</span> = new GregorianCalendar();

<span><span class="code text-green">calendar</span>.set(<span class="text-viola">Calendar</span>.YEAR, <span class="text-user">2019</span>);
</span><span class="code text-green">calendar</span>.set(<span><span class="text-viola">Calendar</span></span>.MONTH, <span class="text-user">6</span>);
<span class="code text-green">calendar</span>.set(<span><span class="text-viola">Calendar</span></span>.DAY_OF_MONTH, <span class="text-user">4</span>);
<span class="code text-green">calendar</span>.set(<span><span class="text-viola">Calendar</span></span>.HOUR_OF_DAY, <span class="text-user">12</span>);
<span class="code text-green">calendar</span>.set(<span><span class="text-viola">Calendar</span></span>.MINUTE, <span class="text-user">15</span>);
<span class="code text-green">calendar</span>.set(<span><span class="text-viola">Calendar</span></span>.SECOND, <span class="text-user">0</span>);

System.out.println(<span class="code text-green">calendar</span>.getTime());</code></pre>
        </td>
        <td><br><br>год = 2019<br>
            месяц = Июль (нумерация с 0)<br>
            4 число<br>
            часы<br>
            минуты<br>
            секунды
        </td>
    </tr>
    </tbody>
</table>
<h2>5. Константы класса <code>Calendar</code></h2>
<p>В классе <code><span class="text-viola">Calendar</span></code> есть константы не только для названия фрагментов даты, а кажется, на все случаи жизни.</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present-sm language-java"><code><span class="text-viola">Calendar</span> <span class="code text-green">date</span> = new <span class="text-neon">GregorianCalendar</span>(2019, <span class="text-viola">Calendar</span>.<span class="text-red">JANUARY</span>, 31);</code></pre>
</div>
<p>Например, есть константы для обозначения месяцев:</p>
<p>Или, например, для дней недели:</p>
<pre class="language-java"><code>Calendar <span class="code text-green">calendar</span> = new GregorianCalendar(2019, <span class="text-viola">Calendar</span>.<span class="text-neon">JANUARY</span>, 31);
if (<span class="code text-green">calendar</span>.<span class="text-red">get</span>(<span class="text-viola">Calendar</span>.<span class="text-neon">DAY_OF_WEEK</span>) == <span class="text-viola">Calendar</span>.<span class="text-red">FRIDAY</span>)
{
   System.out.println("Это пятница");
}</code></pre>
<p>Всего перечислять не будем. Просто хотим, чтобы вы не удивлялись, если встретите такие записи в коде.</p>
<p>Использование констант позволяет сделать код более читабельным, поэтому программисты их и добавили. Ну а месяцы нумеруются с нуля тоже ради читабельности. Или нет.</p>
<h2>6. Изменение даты в объекте <code>Calendar</code></h2>
<p>У класса <code><span class="text-viola">Calendar</span></code> есть метод, который позволяет проводить с датой более умные операции. Например, добавить к дате год, месяц или несколько дней. Или отнять. Называется этот метод <code><span class="text-red">add</span>()</code>. Выглядит работа с ним примерно так:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="code text-green">calendar</span>.<span class="text-red">add</span>(<span class="text-viola">Calendar</span>.<span class="text-orange">MONTH</span>, <span class="text-user">значение</span>);</code></pre>
</div>
<p>Где <code class="text-green">calendar</code> — это переменная типа <code><span class="text-viola">Calendar</span></code>, а <code><span class="text-orange">MONTH</span></code> — это переменная-константа класса <code><span class="text-viola">Calendar</span></code>.</p>
<p>В метод <code><span class="text-red">add</span></code> в качестве первого параметра вы передаете специальную константу класса <code><span class="text-viola">Calendar</span></code>, и в качестве второго параметра — значение, которое нужно добавить.</p>
<p>Особенность этого метода в том, что он умный. Давайте сами посмотрим, насколько:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Calendar <span class="code text-green">calendar</span> = new GregorianCalendar(2019, <span class="text-viola">Calendar</span>.<span class="text-orange">FEBRUARY</span>, 27);
<span class="code text-green">calendar</span>.<span class="text-red">add</span>(<span class="text-viola">Calendar</span>.<span class="text-orange">DAY_OF_MONTH</span>, 2);
System.out.println(<span class="code text-green">calendar</span>.getTime());</code></pre>
        </td>
    </tr>
    <tr>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre><code>Fri <span class="text-red">Mar 01 </span>00:00:00 EET 2019</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Этот метод понимает, что в феврале 2019 года всего 28 дней, и итоговая дата — 1 марта.</p>
<p>А теперь давайте отнимем 2 месяца! Что должно получиться? 27 декабря 2018 года! Сейчас проверим.</p>
<p><span class="text-viola">Чтобы выполнить действие, уменьшающее дату, нужно в метод <code><span class="text-viola">add()</span></code> передать значение с отрицательным знаком:</span></p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Calendar <span class="code text-green">calendar</span> = new GregorianCalendar(2019, <span class="text-viola">Calendar</span>.<span class="text-orange">FEBRUARY</span>, 27);
<span class="code text-green">calendar</span>.<span class="text-red">add</span>(<span class="text-viola">Calendar</span>.<span class="text-neon">MONTH</span>, <span class="text-user">-2</span>);
System.out.println(<span class="code text-green">calendar</span>.getTime());</code></pre>
        </td>
    </tr>
    <tr>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre><code>Thu <span class="text-red">Dec 27</span> 00:00:00 EET 2018</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Работает!</p>
<p>Этот метод учитывает длины месяцев и високосные годы. В общем, отличный метод. Именно то, что нужно большинству программистов, которые плотно работают с датами.</p>
<h2>7. Прокручивание фрагментов даты</h2>
<p>Но иногда бывают ситуации, когда такое умное поведение излишне: хочется что-то сделать с одной частью даты, не меняя все остальное.</p>
<p>Для этого у класса <code><span class="text-viola">Calendar</span></code> есть специальный метод — <code><span class="text-red">roll</span>()</code>. По своей сигнатуре он полностью аналогичен методу <code><span class="text-red">add</span>()</code>, но любые изменения с его помощью затрагивают один параметр, остальные остаются неизменными.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Calendar <span class="code text-green">calendar</span> = new GregorianCalendar(2019, <span class="text-viola">Calendar</span>.<span class="text-orange">FEBRUARY</span>, 27);
<span class="code text-green">calendar</span>.<span class="text-red">roll</span>(<span class="text-viola">Calendar</span>.<span class="text-neon">MONTH</span>, -2);
System.out.println(<span class="code text-green">calendar</span>.getTime());</code></pre>
        </td>
    </tr>
    <tr>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre><code>Fri <span class="text-red">Dec</span> 27 00:00:00 EET <span class="text-red">2019</span></code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Месяц мы поменяли, а год и число остались неизменными.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1604"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1605"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1606"></div>