Работа с ArrayList, часть 2
<p>----------------------------------------</p>
Вставка элемента в середину (или в начало) списка
 Если же мы хотим вставить элемент с середину списка, то внутри списка происходит вот что.
 Допустим у нас есть список из 11 элементов:
 
 Мы хотим вставить число 10,000 в список под номером 5, для этого нужно всего лишь выполнить команду:
 
 list.add(
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="14506d08-247a-43b0-af2c-470b2308a61c" src="https://cdn.javarush.com/images/article/14506d08-247a-43b0-af2c-470b2308a61c/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="145867e3-b95b-421e-a5bb-bb48a3ce5701" src="https://cdn.javarush.com/images/article/145867e3-b95b-421e-a5bb-bb48a3ce5701/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="2cdf1653-1b9f-4a95-8363-b0161ac69733" src="https://cdn.javarush.com/images/article/2cdf1653-1b9f-4a95-8363-b0161ac69733/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Вставка элемента в середину (или в начало) списка</h2>
<p>Если же мы хотим вставить элемент в середину списка, то внутри списка происходит вот что.</p>
<p>Допустим есть список из 11 элементов:</p>
<p><img data-id="c2640c8e-6216-4736-b263-66796f94587f" src="https://cdn.javarush.com/images/article/c2640c8e-6216-4736-b263-66796f94587f/original.png" alt="Вставка элемента в середину (или в начало) списка"></p>
<p>Мы хотим вставить число 10,000 в список под номером 5, для этого нужно всего лишь выполнить команду:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-green">list</span>.<span class="text-red">add</span>(<span class="text-user">5</span>, <span class="text-viola">10000</span>);</code></pre>
</div>
<p>Где <code><span class="text-green">list</span></code> — это переменная типа <code>ArrayList</code>, метод <code><span class="text-red">add</span>(int index, тип value)</code> добавляет значение 10000 в позицию 5 в списке. Вот что при этом произойдет в методе <code>add()</code> :</p>
<p>Шаг 1: все элементы массива начиная с 5-го будут сдвинуты (скопированы) на 1 элемент к концу массива:</p>
<p><img data-id="909cf11a-b44e-4b1b-ab23-07e116b358b4" src="https://cdn.javarush.com/images/article/909cf11a-b44e-4b1b-ab23-07e116b358b4/original.png" alt="Вставка элемента в середину (или в начало) списка 1"></p>
<p>Обратите внимание: элементы в 5-й и 6-й ячейке массива теперь одинаковые.</p>
<p>Шаг 2: записываем в 5-ю ячейку значение 10,000:</p>
<p><img data-id="4dc26adc-abc0-4b43-8afa-bfba1c131d62" src="https://cdn.javarush.com/images/article/4dc26adc-abc0-4b43-8afa-bfba1c131d62/original.png" alt="Вставка элемента в середину (или в начало) списка 2"></p>
<p>Теперь в списке есть все элементы массива, а в пятой ячейке записано число 10,000. Как мы и хотели.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1213"></div>
<hr>
<h2>2. Удаление элемента из списка</h2>
<p>Операция удаления элемента из списка аналогична его вставке, только процесс обратный.</p>
<p>Давайте удалим из списка элемент с индексом 3, для этого нужно выполнить команду:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-green">list</span>.<span class="text-red">remove</span>(<span class="text-user">3</span>);</code></pre>
</div>
<p>Вот что при этом произойдет в методе remove():</p>
<p>Шаг 1: элементы массива начиная с 4-го будут сдвинуты (скопированы) на одну позицию ближе к началу массива:</p>
<p><img data-id="4cdebe1d-6ea8-4fc1-878b-b794a8297406" src="https://cdn.javarush.com/images/article/4cdebe1d-6ea8-4fc1-878b-b794a8297406/original.png" alt="Удаление элемента из списка 1"></p>
<p>Шаг 2: значение переменной <code>size</code> будет уменьшено на 1.</p>
<p><img data-id="e800e233-8fc7-4a48-b9e8-067bddc8bc64" src="https://cdn.javarush.com/images/article/e800e233-8fc7-4a48-b9e8-067bddc8bc64/original.png" alt="Удаление элемента из списка 2"></p>
<p>Обратите внимание: в конце массива, который отмечен серым цветом, есть какие-то значения. Технически это мусор. Его нужно удалить, чтобы не мешать процессу <span class="term">сборки мусора</span>.</p>
<p>Шаг 3: стирание мусора</p>
<p><img data-id="777ae9d5-01c3-46e8-8d27-7308caf35037" src="https://cdn.javarush.com/images/article/777ae9d5-01c3-46e8-8d27-7308caf35037/original.png" alt="Удаление элемента из списка 3"></p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1214"></div>
<hr>
<h2>3. Практические примеры работы со списком в Java</h2>
<p>Давайте напишем несколько примеров работы со списками:</p>
<p>Занесём в список все четные числа от 1 до 20:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">ArrayList</span>&lt;<span class="text-viola">Integer</span>&gt; list = new <span class="text-neon">ArrayList</span>&lt;<span class="text-viola">Integer</span>&gt;();

for (int i = 1; i &lt;= 20; i++)
   if (i%2 == 0)
      <span class="text-user">list</span>.<span class="text-red">add</span>(i);</code></pre>
        </td>
        <td>Создаем объект-список<br><br>
            цикл по всем числам <code>1</code> .. <code>20</code><br>
            если число делится на <code>2</code> без остатка,<br>
            добавить его в список
        </td>
    </tr>
    </tbody>
</table>
<p>А теперь выведем все элементы списка на экран:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">ArrayList</span>&lt;Integer&gt; <span class="text-user">list</span> = new <span class="text-neon">ArrayList</span>&lt;Integer&gt;();

for (int i = 1; i &lt;= 20; i++)
   if (i%2 == 0)
      <span class="text-user">list</span>.<span class="text-red">add</span>(i);

for (int i = 0; i &lt; <span class="text-user">list</span>.size(); i++)
   System.out.println(<span class="text-user">list</span>.<span class="text-red">get</span>(i));</code></pre>
        </td>
        <td>Создаем объект-список<br>
            цикл по всем числам <code>1</code> .. <code>20</code><br><br>
            если число делится на <code>2</code> без остатка<br>
            добавить его в список<br><br>
            цикл от нуля до размера списка<br>
            выводим каждый элемент на экран
        </td>
    </tr>
    </tbody>
</table>
<p>Удаление элементов:</p>
<p>А теперь давайте удалим все элементы, которые делятся на 4. Обратите внимание, что сразу после удаления одного элемента из списка <span class="text-red">позиции остальных элементов меняются.</span></p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">ArrayList</span>&lt;Integer&gt; <span class="text-user">list</span> = new <span class="text-neon">ArrayList</span>&lt;Integer&gt;();

for (int i = 1; i &lt;= 20; i++)
   if (i%2 == 0)
      <span class="text-user">list</span>.<span class="text-red">add</span>(i);

for (int i = 0; i &lt; <span class="text-user">list</span>.<span class="text-red">size</span>(); i++)
   if (<span class="text-user">list</span>.<span class="text-red">get</span>(i)%4 == 0)
   {
      <span class="text-user">list</span>.<span class="text-red">remove</span>(i);
      i--;
   }</code></pre>
        </td>
        <td>Создаем объект-список<br><br>
            цикл по всем числам <code>1</code> .. <code>20</code><br>
            если число делится на <code>2</code> без остатка,<br>
            добавить его в список.<br><br>
            цикл от нуля до размера списка<br>
            если элемент списка делится на <code>4</code> без остатка:<br><br>
            а) удаляем элемент<br>
            б) уменьшаем счетчик <code>i</code>, чтобы на следующем витке цикла опять попасть на тот же элемент
        </td>
    </tr>
    </tbody>
</table>
<p>Допустим, вам нужно удалить 3 последних элемента списка.</p>
<p>Как это сделать неправильно:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">ArrayList</span>&lt;Integer&gt; <span class="text-user">list</span> = new <span class="text-neon">ArrayList</span>&lt;Integer&gt;();

for (int i = 1; i &lt;= 20; i++)
   if (i%2 == 0)
      <span class="text-user">list</span>.<span class="text-red">add</span>(i);

int <span class="text-green">n</span> = <span class="text-user">list</span>.<span class="text-red">size</span>();
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 3);
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 2);
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 1);</code></pre>
        </td>
        <td>Создаем объект-список<br><br>
            в списке 10 элементов: <code>2</code>, <code>4</code>, <code>6</code>, ... <code>20</code><br><br><br><br>
            <code><span class="text-green">n</span> = 10</code><br>
            <code><span class="text-green">n</span> - 3 = 7</code> (в списке осталось 9 элементов)<br>
            <code><span class="text-green">n</span> - 2 = 8</code> (в списке осталось 8 элементов)<br>
            <code><span class="text-green">n</span> - 1 = 9</code> (в списке осталось 7 элементов)
        </td>
    </tr>
    </tbody>
</table>
<p>После удаления 7 и 8 элементов, в списке останется всего 8 элементов. Поэтому 9-й элемент удалить не получится — в программе возникнет ошибка.</p>
<p>Как нужно было удалить элементы:</p>
<table>
    <tbody>
    <tr>
        <th>Вариант 1</th>
        <th>Вариант 2</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>int <span class="text-green">n</span> = <span class="text-user">list</span>.<span class="text-red">size</span>();
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 3);
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 3);
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 3);
</code></pre>
        </td>
        <td>
<pre class="language-java"><code>int <span class="text-green">n</span> = <span class="text-user">list</span>.<span class="text-red">size</span>();
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 1);
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 2);
<span class="text-user">list</span>.<span class="text-red">remove</span>(<span class="text-green">n</span> - 3);
</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Элементы нужно или удалять с конца, или просто в одном и том же месте, а после каждого удаления элементы будут сдвигаться на один.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1215"></div>