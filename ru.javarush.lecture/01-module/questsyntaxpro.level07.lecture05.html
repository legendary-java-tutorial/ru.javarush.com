Причины появления ООП
<p>----------------------------------------</p>
История о компании Хочу рассказать вам одну историю, которая демонстрирует как ООП помогает бороться со сложностью больших систем. Это необходимо, чтобы вы поняли назначение ООП. Жила-была небольшая компания, которая занималась доставкой товаров в космосе… Назовем ее Galaxy Rush. И работало в не
<p>----------------------------------------</p>
<h2>1. История о компании</h2>
<p>Хочу рассказать вам одну историю, которая демонстрирует как <span class="term">ООП</span> помогает бороться со сложностью больших систем. Это необходимо, чтобы вы поняли назначение <span class="term">ООП</span>.</p>
<p>Жила-была небольшая компания, которая занималась доставкой товаров в космосе...</p>
<p>Назовем ее Galaxy Rush. И работало в ней 5 человек. Один занимался финансами, второй работал на складе, третий выполнял доставку, четвертый руководил рекламой, а пятый управлял всем этим.</p>
<p>Они были очень старательными, и все у них получалось. У компании была хорошая репутация, и она зарабатывала много денег. Но с каждым годом заказов было все больше, так что директору пришлось нанимать дополнительных сотрудников. Несколько на склад, несколько на доставку, еще одного кассира и рекламщика для расширения рынка.</p>
<p><span class="text-red">И тут начались проблемы. Людей <strong>стало больше</strong>, и они <strong>начали друг другу мешать.</strong></span></p>
<p>Маркетолог тратит все деньги на новую рекламную кампанию, и <span class="text-orange">в кассе нет денег на закупку товара, который надо срочно отправлять.</span></p>
<p>На складе есть 10 коробок с новенькими гипер-двигателями, которые поставляют раз в месяц. Курьер полетел отвозить один гипер-двигатель, и заказ на 10 гипер-двигателей от другого клиента вынужден ждать еще месяц. <span class="text-orange">Первый курьер просто не знал о другом заказе, который выполняет второй курьер.</span></p>
<p>Новый помощник директора отправляет курьера на корабле для закупки товара, и <span class="text-orange">все остальные ждут, пока появится доступный корабль.</span> Есть куча срочных доставок, но этот помощник заведует только закупками и <strong>старается хорошо выполнять свою работу.</strong> <span class="text-green">Чем лучше человек выполнял свои обязанности, тем больше он мешал остальным.</span></p>
<p>Пытаясь проанализировать ситуацию, директор понял, что такие важные ресурсы, как корабль, наличность и товар расходуются не оптимально, а по принципу «кто первый встал — того и тапки». Любой мог взять нужный всем ресурс для своей работы, поставив при этом под удар остальных сотрудников, да и всю компанию в целом.</p>
<p>Нужно было что-то делать, и <span class="text-green">директор решил разделить монолитную компанию на несколько отделов.</span> Появился отдел доставки, отдел маркетинга, отдел закупок, финансовый отдел и отдел запасов. Теперь уже никто не мог просто так взять корабль. Директор отдела доставки получал всю информацию о доставках и выдавал корабль тому курьеру, чей заказ был выгоднее для компании. Склад тоже не разрешал любому курьеру взять любой товар, а контролировал этот процесс. Финансовый отдел мог не дать денег на маркетинг, если знал, что скоро будет закупка. У каждого отдела было одно публичное лицо — его начальник. <span class="text-red">Внутреннее устройство каждого отдела было его внутренним делом. </span>Если курьер хотел получить товар, он шел к начальнику склада, а не на склад. Если появлялась новая заявка, ее получал директор отдела доставки (<code>public person</code>), а не курьер (<code>private person</code>).</p>
<p>Другими словами, <span class="text-green">директор объединил в группы (отделы) ресурсы и действия над ними</span>, <span class="text-orange">а также запретил другим вмешиваться во внутреннюю структуру отделов.</span> <span class="text-viola">Контактировать можно было строго с определенным лицом.</span></p>
<p>С точки зрения <span class="term">ООП</span>, это не что иное, как <span class="text-green">разбиение программы на объекты. Монолитная программа, состоящая из функций и переменных, превращается в программу, состоящую из объектов. </span>А объекты содержат в себе переменные и функции.</p>
<p><span class="text-user">Проблема была в том, что <span class="text-red">любой сотрудник мог бесконтрольно работать с любым ресурсом и отдавать команды любому человеку. </span></span><span class="text-user">Мы ввели небольшое ограничение, но получили больше порядка. А также смогли лучше контролировать все это.</span></p>
<p>Разделяй и властвуй в чистом виде.</p>
<hr>
<h2>2. Процесс создания программ</h2>
<p>Хотелось бы затронуть еще один важный момент, который раскрывает еще одно преимущество <span class="term">ООП</span>. Видите ли, программы больше напоминают не строения, а животных. <strong><span class="text-green">Их не строят, их выращивают. </span></strong><span class="text-green">Разработка — это постоянные изменения.</span> В строительстве вы можете иметь хороший план и четко ему следовать. В случае с разработкой программ это не так.</p>
<p>Очень часто в программировании что-то нельзя сделать тем способом, который ты себе наметил вначале, и приходится многое переделывать. Еще чаще меняются требования заказчика.</p>
<p>А если заказчик проекта дал очень точную его спецификацию? Тогда все еще хуже. Взгляните на ситуацию с продуктом во времени.</p>
<p><span class="text-orange">Успех продукта приведет к тому, что заказчик захочет выпустить его новую версию, а затем еще и еще. </span>И,конечно, нужно будет всего лишь добавить «небольшие изменения» в уже существующий продукт. <span class="text-green">Поэтому разработка продукта — это последовательность постоянных изменений. </span>Только масштаб времени разный. Каждая новая версия может выходить раз в неделю, раз в месяц или раз в полгода.</p>
<p>И какой вывод можно сделать из всего этого? <span class="text-red">Внутреннюю структуру продукта нужно поддерживать в таком состоянии, которое позволит внести значительные (и не очень) изменения с минимальными переделками.</span></p>
<p><strong>Связность объектов</strong></p>
<p><span class="text-user">Но сделать это сложнее, чем решить сделать. </span>Мы уже говорили, что программа состоит из объектов, которые взаимодействуют между собой. Давайте нанесем на доску все объекты нашей программы, обозначив их жирными точками. И проведем от каждого объекта (точки) стрелочки ко всем объектам (точкам), с которыми он взаимодействуют.</p>
<p>Теперь мы будем объединять объекты (точки) в группы. Точки должны быть объединены в группу, если связи между ними гораздо интенсивнее, чем с остальными точками. Если большинство стрелочек от точки идет к точкам ее же группы, тогда разбиение на группы произошло правильно. Точки внутри одной группы мы будем называть <strong>сильно связанными</strong>, а точки из разных групп — слабо связанными.</p>
<p><strong>Принцип слабой связности</strong></p>
<p>Это называется «принцип слабой связности». Программа разбивается на несколько частей, часто слоев, логика которых сильно завязана на их внутреннем устройстве и очень слабо — на других слоях/частях. <span class="text-orange">Обычно взаимодействие слоев очень регламентировано. Один слой может обращаться ко второму и использовать только небольшую часть его классов. <span class="text-user">Тот же принцип «разделения на отделы» только в большем масштабе.</span></span></p>
<p>Это приводит к тому, что мы можем реорганизовать отдел, повысить его эффективность, нанять в него еще больше людей, но <span class="text-red">если мы не изменим протокол взаимодействия других отделов с нашим, все сделанные изменения останутся локальными. </span>Никому не придется переучиваться. Не придется переделывать всю систему. Каждый отдел может заниматься такой внутренней оптимизацией, если общие механизмы взаимодействия выбраны удачно.</p>
<p>Выбраны удачно. А что будет, если они выбраны неудачно? Тогда «<strong>запас изменений</strong>» быстро иссякнет и придется переделывать всю систему. Такое приходится делать время от времени. Нельзя предугадать, что будет в будущем, но можно свести количество переделок к минимуму.</p>
<p><strong>Принцип Абстракции</strong></p>
<p>Выбор структуры отделов и способа их взаимодействия — это «<strong>принцип Абстракции</strong>». В программировании он используется для определения, на какие части лучше разбить программу, и как эти части должны взаимодействовать. Данный принцип также можно применять к разделению полученных частей, пока мы не разобьем программу на отдельные классы.</p>
<p><span class="text-user">А сокрытие внутренней структуры этих частей и жёсткие ограничения на взаимодействие с другими частями — это <strong>Инкапсуляция</strong>.</span> <span class="text-green">Инкапсуляция + Абстракция — это краеугольные камни <span class="term">ООП</span>.</span> Хорошая программа обязана следовать этим двум принципам. В дальнейшем мы рассмотрим остальные принципы и поймем, какие преимущества они дают.</p>