Работа с ArrayList
<p>----------------------------------------</p>
Как устроен ArrayList ArrayList – самый распространённый класс в Java для хранения элементов. Так как же устроен этот ArayList и почему он так всем нравится? Устройство ArrayList простое и гениальное по своей сути. Внутри каждого объекта ArrayList есть два поля:  Массив со списком элементов Пере
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="ea79663d-0684-441d-ae32-a2d77ce7943a" src="https://cdn.javarush.com/images/article/ea79663d-0684-441d-ae32-a2d77ce7943a/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="adbc2ebc-90d0-45dd-b8b8-038d8e6fa84f" src="https://cdn.javarush.com/images/article/adbc2ebc-90d0-45dd-b8b8-038d8e6fa84f/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="6dad1215-1909-4f2f-a5e0-d06315eb3c7d" src="https://cdn.javarush.com/images/article/6dad1215-1909-4f2f-a5e0-d06315eb3c7d/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Как устроен <code>ArrayList</code></h2>
<p><code>ArrayList</code> — самый распространённый класс в Java для хранения элементов. Так как же устроен этот <code>ArrayList</code> и почему он так всем нравится?</p>
<p>Устройство <code>ArrayList</code> простое и гениальное по своей сути. Внутри каждого объекта <code>ArrayList</code> есть два поля:</p>
<ul>
    <li>Массив со списком элементов</li>
    <li>Переменная <code>size</code>, которая хранит количество элементов списка</li>
</ul>
<p>Внутри объекта <code>ArrayList</code> содержится самый обычный массив! Но не только. Там есть еще переменная <strong>size</strong>, которая хранит длину списка. Вот как это работает:</p>
<p>Изначально длина массива внутри списка — 10 элементов. А переменная <code>size</code> равна 0.</p>
<p>Если в список добавить элемент, он будет сохранен в 0-ю ячейку массива, а <code>size</code> увеличится до 1.</p>
<p>Если добавить еще один элемент, он будет сохранен в 1-ю ячейку, а <code>size</code> снова увеличится на 1 и теперь будет равняться двум.</p>
<p>Если при добавлении очередного элемента в список в массиве уже нет места, в методе <code>add()</code> происходит следующее:</p>
<ol>
    <li><strong>создается новый массив</strong> в полтора раза длиннее предыдущего</li>
    <li>в него <strong>копируются все элементы</strong> из существующего массива</li>
    <li>в объекте <code>ArrayList</code> вместо старого массива <strong>сохраняется ссылка на новый</strong>.</li>
    <li>В 10-ю ячейку нового массива <strong>записывается переданный элемент</strong></li>
    <li><strong>size</strong><strong> увеличивается на 1</strong> и теперь будет равняться 11</li>
</ol>
<p>Аналогично при добавлении (вставке) элемента в середину списка. Существующие элементы сдвигаются на 1 вправо, и в свободную ячейку массива записывается нужный элемент.</p>
<p>Самые основные сценарии использования списка мы сейчас рассмотрим:</p>
<hr>
<h2>2. Добавление элемента в <code>ArrayList</code></h2>
<p>Давайте разберём, что происходит внутри списка, когда в него добавляются элементы. Сразу после создания объекта ArrayList мы имеем в памяти примерно такую картину:</p>
<p><img data-id="a03874c7-c918-473a-b2d3-84bbbcba5322" src="https://cdn.javarush.com/images/article/a03874c7-c918-473a-b2d3-84bbbcba5322/original.png" alt="Добавление элемента в ArrayList"></p>
<p>У нас есть объект типа <code>ArrayList</code>, внутри которого два поля (две переменные): массив (<code>data</code>) и количество элементов (<code>size</code>). <code>data</code> хранит ссылку на контейнер (массив) из 10 элементов.</p>
<p>Если мы решим добавить в массив число 5, получится такая картина:</p>
<p><img data-id="f9476257-4b96-49b6-bc7b-9a0a869fba86" src="https://cdn.javarush.com/images/article/f9476257-4b96-49b6-bc7b-9a0a869fba86/original.png" alt="Добавление элемента в ArrayList"></p>
<p>В массиве теперь хранится элемент 5, а переменная <code>size == 1</code>.</p>
<p>Если сейчас кто-то вызовет метод <code>size()</code> у нашего объекта <code>ArrayList</code>, он получит количество элементов списка — 1. <span class="text-green">Количество элементов списка — это не размер массива.</span></p>
<p>Ни действительный размер массива, ни сам массив никогда не будут доступны (видны) вне объекта <code>ArrayList</code>. Это внутренние данные <code>ArrayList</code>, и они всегда ими останутся.</p>
<p>Давайте добавим в список еще 7 чисел: 10, 20, 30, 40, 50, 60, 70.</p>
<p>Тогда картина в памяти будет уже такой:</p>
<p><img data-id="1a096493-d1cf-486d-a803-e9ae880a5fd2" src="https://cdn.javarush.com/images/article/1a096493-d1cf-486d-a803-e9ae880a5fd2/original.png" alt="Добавление элемента в ArrayList 2"></p>
<p>Если сейчас вызвать метод <code>size()</code>, он вернет число 8 — новое количество элементов в списке. К размеру массива оно не имеет никакого отношения.</p>
<div class="lesson-note lesson-note--important">
    <div class="lesson-note__container">
        <div class="lesson-note__head">Важно:</div>
        <div class="lesson-note__content">
            <p>На этой картинке есть одна неточность.</p>
            <p>Класс <code>ArrayList</code> не может хранить примитивные типы, поэтому вместо типа <code>int</code> он использует тип <code>Integer</code>. Контейнер хранит не значения 5-70, а ссылки на объекты типа <code>Integer</code>. Все пустые ячейки контейнера хранят <code>null</code>.</p>
        </div>
    </div>
</div>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1212"></div>
<hr>
<h2>3. Увеличение длины списка</h2>
<p>Давайте разберем, что происходит внутри списка, когда в его массиве заканчиваются свободные ячейки.</p>
<p>Допустим, у нас был список из 10 элементов:</p>
<p><img data-id="adc3ced1-37d5-4fbb-8c5a-15257fc12454" src="https://cdn.javarush.com/images/article/adc3ced1-37d5-4fbb-8c5a-15257fc12454/original.png" alt="Увеличение длинны списка"></p>
<p>Мы решили добавить в него число <strong>100</strong>, вот что при этом произойдет в методе <code>add()</code> :</p>
<p>Шаг 1 — создание нового массива:</p>
<p><img data-id="4e96016a-c5e9-4c84-bdc8-011b857309d1" src="https://cdn.javarush.com/images/article/4e96016a-c5e9-4c84-bdc8-011b857309d1/original.png" alt="Увеличение длинны списка 1"></p>
<p>Шаг 2 — копирование всех элементов из старого массива в новый:</p>
<p><img data-id="59e3a98c-35a5-41e1-8fba-7aabb6dd15c8" src="https://cdn.javarush.com/images/article/59e3a98c-35a5-41e1-8fba-7aabb6dd15c8/original.png" alt="Увеличение длинны списка"></p>
<p>Шаг 3 — замена массива (изменение ссылки на массив внутри объекта <code>ArrayList</code>):</p>
<p><img data-id="ae8df2cd-7681-4a02-b1c0-ea647650fe10" src="https://cdn.javarush.com/images/article/ae8df2cd-7681-4a02-b1c0-ea647650fe10/original.png" alt="Увеличение длинны списка 3"></p>
<p>Шаг 4 — добавление нового числа, ради чего мы так старались:</p>
<p><img data-id="2ecaeca1-b92f-4dfa-a558-3f96e77ef8be" src="https://cdn.javarush.com/images/article/2ecaeca1-b92f-4dfa-a558-3f96e77ef8be/original.png" alt="Увеличение длинны списка 4"></p>