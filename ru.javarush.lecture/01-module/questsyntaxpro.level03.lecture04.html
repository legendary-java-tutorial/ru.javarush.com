Лайфхаки: как писать код лучше и быстрее
<p>----------------------------------------</p>
Выражения vs Команды Все команды в Java делятся на две категории: команды (Statement) и выражения (Expression). Про команду обычно говорят, что она выполняется, а про выражение, что оно вычисляется. Но это не главное. Основное отличие между командой и выражением в том, что у выражения есть «резу
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="10fe4404-0c47-4699-8be7-c6ab418d5c8d" data-max-width="1024" src="https://cdn.javarush.com/images/article/10fe4404-0c47-4699-8be7-c6ab418d5c8d/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="fe92c6e3-8cc4-45a9-89cc-0e0374c25c51" data-max-width="512" src="https://cdn.javarush.com/images/article/fe92c6e3-8cc4-45a9-89cc-0e0374c25c51/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="1c3624df-d3a6-4db0-9133-4536e84033aa" data-max-width="512" src="https://cdn.javarush.com/images/article/1c3624df-d3a6-4db0-9133-4536e84033aa/original.png" alt="">
        </div>
    </div>
</div>

<hr>

<h2>1. Выражения vs Команды</h2>
<p>Все команды в Java делятся на две категории: <span class="term text-yellow">команды</span> (<span class="term">Statement</span>) и <span class="term text-viola">выражения</span> (<span class="term">Expression</span>). Про команду обычно говорят, что она <span class="term text-yellow">выполняется</span>, а про выражение — что оно <span class="term text-viola">вычисляется</span>. Но это не главное.</p>
<p>Основное отличие между командой и выражением в том, что у выражения есть <span class="term">результат вычисления</span>. И у этого результата, во-первых, есть тип, а во-вторых, этот результат можно куда-то присвоить, ну или использовать в каком-то другом выражении.</p>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th width="50%">Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
            <code class="text-yellow">int x;</code>
        </td>
        <td>Команда</td>
    </tr>
    <tr>
        <td>
            <code class="text-viola">(a &lt; 10)</code>
        </td>
        <td>Выражение, тип <code>boolean</code></td>
    </tr>
    <tr>
        <td>
            <code class="text-viola">i++;</code>
        </td>
        <td>Выражение, тип совпадает с типом переменной <code>i</code></td>
    </tr>
    <tr>
        <td>
            <code class="text-viola">x = 5;</code>
        </td>
        <td>Выражение, тип совпадает с типом переменной <code>x</code></td>
    </tr>
    </tbody>
</table>
<p>И что это нам дает?</p>
<p>Во-первых, мы можем использовать тот факт, что очень много команд на самом деле являются выражением (имеют результат вычисления). Например, такой код будет работать:</p>
<table>
    <tbody>
    <tr>
        <th width="50%">Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>int x, y, z;
x = y = z = 1;</code></pre>
        </td>
        <td>
<pre class="language-java"><code>int x, y, z;
x = (y = (z = 1));</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Во-вторых, мы можем игнорировать результат вычисления выражения, если хотим.</p>
<table>
    <tbody>
    <tr>
        <th width="50%">Код</th>
        <th>Код, где мы игнорируем результат:</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>int <span class="text-green">x</span> = scanner.<span class="text-red">nextInt</span>();</code></pre>
            <pre class="language-java"><code>boolean <span class="text-green">m</span> = (5 &lt; 10);</code></pre>
        </td>
        <td>
            <pre class="language-java"><code>scanner.<span class="text-red">nextInt</span>();</code></pre>
            <pre class="language-java"><code>(5 &lt; 10);</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Игнорировать результат вычисления выражения нужно, например, если выражение кроме результата делает еще что-то полезное, и нам это действие важно, а сам результат — нет.</p>
<hr>
<h2>2. Тернарный оператор</h2>
<p><img data-id="689f357f-dfea-44c4-86cf-b8d470daad3a" src="https://cdn.javarush.com/images/article/689f357f-dfea-44c4-86cf-b8d470daad3a/original.png" alt=""></p>
<p>Этот лайфхак уже поинтереснее предыдущего. В Java есть специальный <span class="term">тернарный</span> (тройной) <span class="term">оператор</span>. Чем-то он похож на сокращенную запись оператора <code>if&#8211;else</code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="code text-red">Условие</span> <span class="code">?</span> <span class="code text-user">Выражение1</span> <span class="code">:</span> <span class="code text-green">Выражение2</span>;</code></pre>
    <div class="lesson-example-caption"></div>
</div>
<p>Если <span class="term text-red">условие</span> истинно, то выполняется <span class="term text-user">выражение1</span> иначе выполняется <span class="term text-green">выражение2</span>. После условия следует <span class="term">знак&nbsp;вопроса</span>, а два выражения разделены <span class="term">двоеточием</span>.</p>
<p>Основное отличие <span class="term">тернарного оператора</span> от оператора <code>if-else</code> в том, что тернарный оператор является выражением, а значит его результат можно чему-нибудь присвоить.</p>
<p>Например, мы хотим вычислить минимум двух чисел. С использованием тернарного оператора этот код будет выглядеть так:</p>
<div class="lesson-example lesson-example--center">
        <pre class="lecture-code lecture-code--present language-java"><code>int <span class="text-red">a</span> = 2;
int <span class="text-green">b</span> = 3;
int min = <span class="text-red">a</span> &lt; <span class="text-green">b</span> ?  <span class="text-red">a</span> : <span class="text-green">b</span>;</code></pre>
</div>
<p>Или, допустим, вам нужно присвоить переменной разные значения в зависимости от какого-то условия. Как это сделать?</p>
<p>Вариант первый — воспользоваться оператором <code>if-else</code>:</p>
<div class="lesson-example lesson-example--center">
        <pre class="lecture-code lecture-code--present language-java"><code>int <span class="text-red">age</span> = 25;
int <span class="text-viola">money</span>;
if (<span class="text-red">age</span> &gt; 30)
   <span class="text-viola">money</span> = 100;
else
   <span class="text-viola">money</span> = 50;</code></pre>
</div>
<p>Второй вариант — использовать <span class="term">тернарный оператор</span>, то есть сокращенную запись оператора <code>if-else</code>:</p>
<div class="lesson-example lesson-example--center">
        <pre class="lecture-code lecture-code--present language-java"><code>int <span class="text-red">age</span> = 25;
int <span class="text-viola">money</span> = <span class="text-red">age</span> &gt; 30 ? <span class="text-user">100 </span>: <span class="text-green">50</span>;</code></pre>
</div>
<p>Так что же лучше использовать: оператор <code>if-else</code> или <span class="term">тернарный оператор</span>? С точки зрения скорости выполнения, особой разницы нет. Здесь скорее вопрос читаемости кода. И это очень важный момент: код должен не только правильно работать, но и легко читаться другими программистами.</p>
<p>Самый простой критерий может быть таким: если <span class="text-green">код помещается в одну строку</span> — используйте <span class="term">тернарный оператор</span>, если в одну строку он уже <span class="text-viola">не помещается</span> — лучше использовать <code><span>if-else</span></code>.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task03.task0309"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task03.task0310"></div>
<hr>
<h2>3. Сравнение вещественных чисел</h2>
<p>Как уже говорилось раньше, просто так сравнивать вещественные числа нельзя: в процессе работы с ними всегда могут возникать неожиданные эффекты из-за того, что часть значащих цифр отбрасывается.</p>
<p>Поэтому есть проверенный временем подход. Если два вещественных числа отличаются на очень маленькое значение, значит можно считать их равными. Пример:</p>
<pre class="language-java"><code>double <span class="text-green">a</span> = 1.000001;
double <span class="text-green">b </span>= 1.000002;
if ( (<span class="text-green">b</span> - <span class="text-green">a</span>) &lt; 0.0001 )
   System.out.println(<span class="text-green">"Числа равны"</span>);
else
   System.out.println(<span class="text-green">"Числа не равны"</span>);</code></pre>
<p>Но это еще не все: разница чисел вполне может оказаться отрицательным числом. Поэтому, чтобы такой подход работал, нужно сравнивать не просто разницу чисел, а модуль разницы чисел: <code>|a-b|</code></p>
<p>В Java есть специальный метод для вычисления модуля числа — <code>Math.abs()</code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span>int</span> <span class="text-viola">m</span><span> = <span class="text-red">Math</span></span><span>.<span class="text-viola">abs</span></span><span>(<span class="text-user">значение</span>);</span></code></pre>
</div>
<p>Поэтому исправленный вариант нашего примера выше будет выглядеть вот так:</p>
<pre class="language-java"><code>double <span class="text-green">a</span> = 1.000001;
double <span class="text-green">b</span> = 1.000002;

if ( <span><span class="text-red">Math</span></span><span>.<span class="text-viola">abs</span></span>(<span class="text-green">b</span> - <span class="text-green">a</span>) &lt; 0.0001 )
   System.out.println(<span class="text-green">"Числа равны"</span>);
else
   System.out.println(<span class="text-green">"Числа не равны"</span>);</code></pre>

<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task03.task0311"></div>
<hr>

<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="038b25e8-f3cd-4209-a1d7-cf4e7ca49a8f" data-max-width="1024" src="https://cdn.javarush.com/images/article/038b25e8-f3cd-4209-a1d7-cf4e7ca49a8f/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="cda6443d-3e34-4f63-9dec-6471a9827d46" data-max-width="512" src="https://cdn.javarush.com/images/article/cda6443d-3e34-4f63-9dec-6471a9827d46/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="18946e5b-35a1-4799-9035-265ae678b1c5" data-max-width="512" src="https://cdn.javarush.com/images/article/18946e5b-35a1-4799-9035-265ae678b1c5/original.png" alt="">
        </div>
    </div>
</div>