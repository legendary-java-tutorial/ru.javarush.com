Нюансы работы с переменными
<p>----------------------------------------</p>
Константы Во многих языках программирования есть константы – переменные, значения которых нельзя изменять. Обычно это какие-то фундаментальные вещи типа числа Pi или количества дней в месяцах. Хотя в принципе программист может сделать любую переменную константой, если посчитает что это необходим
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="d4062dad-c4e5-4088-a109-98616a9dcd4c" src="https://cdn.javarush.com/images/article/d4062dad-c4e5-4088-a109-98616a9dcd4c/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="119effba-d43f-44ee-b869-f7cd55faae56" src="https://cdn.javarush.com/images/article/119effba-d43f-44ee-b869-f7cd55faae56/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="4b72a3c7-a1dd-45a4-bf62-5303fd818713" src="https://cdn.javarush.com/images/article/4b72a3c7-a1dd-45a4-bf62-5303fd818713/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Константы</h2>
<p>Во многих языках программирования есть <span class="term">константы</span> — <span class="text-orange">переменные, значения которых нельзя изменять</span>. Обычно это какие-то фундаментальные вещи типа числа <code>Pi</code> или количества дней в месяцах. Хотя в принципе программист может сделать любую переменную константой, если решит, что это необходимо.</p>
<p>Итак, как же объявить неизменяемую переменную (константу) в Java? Для этого есть специальное ключевое слово — <code>final</code>. Выглядит создание неизменяемой переменной так же, как и создание обычной, только перед типом переменной нужно написать слово <code>final</code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>final <span class="text-viola">тип</span> <span class="text-red">имя</span> = <span class="text-user">значение</span>;</code></pre>
</div>
<p>Если вы попытаетесь присвоить <code>final</code>-переменной другое значение, ваша программа просто не скомпилируется.</p>
<p><code>final</code>-переменную обязательно нужно инициализировать при объявлении (присвоить ей значение). У этого правила есть одно исключение: можно перенести инициализацию переменной класса в конструктор. <a href="https://javarush.com/quests/lectures?quest=QUEST_JAVA_SYNTAX_PRO&level=10">Но об этом вы узнаете на 10-м уровне</a>.</p>
<p>Чтобы уменьшить количество ключевых слов, разработчики Java используют слово <code>final</code> не только для объявления констант. <code>final</code> также может быть указан перед методом и даже классом. Методы, объявленные как <code>final</code>, нельзя переопределять (override), а от класса, объявленного как <code>final</code>, нельзя наследоваться.</p>
<p>Модификатор <code>final</code> можно добавлять перед любыми переменными: локальными, параметрами, полями класса и статическими переменными.</p>
<p>Обратите внимание, что <code>final</code> — это всего лишь <span class="text-orange">защита от изменения переменной</span>. Если переменная хранит ссылку на объект, объект все-таки менять можно.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <td>
<pre class="language-java"><code>final <span class="text-viola">int[]</span> <span class="text-red">data</span> = {1, 2, 3, 4, 5, 6};

<span class="text-red">data</span> = new int[]{6, 7, 8, 9};

<span class="text-red">data</span>[0] = 0;
<span class="text-red">data</span>[1] = 0;
<span class="text-red">data</span>[2] = 0;</code></pre>
        </td>
        <td>Создаем массив.<br><br>
            <span class="text-red">Так нельзя:</span> переменная <code><span class="text-red">data</span></code> объявлена как <code class="token keyword">final</code>.<br><br>
            <span class="text-green">А так можно.<br>
И так можно.</span></td>
    </tr>
    </tbody>
</table>
<p><strong>Глобальные константы</strong></p>
<p>Если вы решите объявить в своей программе глобальные константы, для этого нужно создать <span class="term">статические переменные класса</span>, а также сделать их <code>public</code> и <code>final</code>. Для имен таких переменных существует специальный стиль написания: они пишутся заглавными буквами, а в качестве разделителя слов выступает символ подчеркивания.</p>
<p>Примеры:</p>
<pre class="language-java"><code>class Solution
{
   public static <span class="code code--inherit">final</span> <span class="text-viola">String</span> <span class="text-red">SOURCE_ROOT</span> = <span class="text-green">"c:\\projects\\my\\"</span>;
   public static <span class="code code--inherit">final</span> <span class="text-viola">int</span> <span class="text-red">DISPLAY_WIDTH</span> = 1024;
   public static <span class="code code--inherit">final</span> <span class="text-viola">int</span> <span class="text-red">DISPLAY_HEIGHT</span> = 768;
}</code></pre>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task06.task0614"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task06.task0615"></div>
<hr>
<h2>2. Затенение переменных</h2>
<p>Как мы уже говорили раньше, нельзя в одном методе создать несколько локальных переменных с одинаковыми именами. В разных методах — можно.</p>
<p>Но вот то, чего вы скорее всего не знаете: разрешается, чтобы у переменных класса и локальных переменных метода были одинаковые имена.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Доступность переменных</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public class Solution
{
   public int <span class="text-neon">count</span> = 0;
   public int <span class="text-green">sum</span> = 0;

   public void add(int <span class="text-viola">data</span>)
   {
     <span class="text-green">sum</span> = <span class="text-green">sum</span> + <span class="text-viola">data</span>;
     int <span class="text-red">sum</span> = <span class="text-viola">data</span> * 2;
     <span class="text-neon">count</span>++;
   }
}</code></pre>
        </td>
        <td><pre><code>

<span class="text-neon">count</span>
<span class="text-neon">count</span>, <span class="text-green">sum</span>
<span class="text-neon">count</span>, <span class="text-green">sum</span>
<span class="text-neon">count</span>, <span class="text-green">sum</span>
<span class="text-neon">count</span>, <span class="text-green">sum</span>, <span class="text-viola">data</span>
<span class="text-neon">count</span>, <span class="text-green">sum</span>, <span class="text-viola">data</span>
<span class="text-neon">count</span>, <span class="text-red">sum</span>, <span class="text-viola">data</span>
<span class="text-neon">count</span>, <span class="text-red">sum</span>, <span class="text-viola">data</span>
<span class="text-neon">count</span>, <span class="text-green">sum</span>

</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>В методе <code>add</code> мы объявили локальную переменную <code><span class="text-red">sum</span></code>, и она до конца действия метода перекрывает (или еще говорят <strong>затеняет</strong>) собой переменную класса <code><span class="text-green">sum</span></code>.</p>
<p>Ну ок, скажете вы, даже в каком-то смысле ожидаемое поведение. Но это еще не все. Оказывается, если переменную класса затеняет локальная переменная, в методе все-таки существует способ обратиться к переменной класса. Для этого нужно перед ее именем написать ключевое слово <code>this</code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java text-center"><code>this.<span class="text-green">имя</span></code></pre>
</div>
<p>Вот пример, где конфликт имен успешно решается:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Доступность переменных</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public class Solution
{
   public int <span class="text-neon">count</span> = 0;
   public int <span class="text-green">sum</span> = 0;

   public void add(int <span class="text-viola">data</span>)
   {
     int <span class="code"><span class="text-red">sum</span></span> = data * 2;
     this.<span class="text-green">sum</span> = this.<span class="text-green">sum</span> + <span class="text-viola">data</span>;
     <span class="text-neon">count</span>++;
   }
}</code></pre>
        </td>
        <td>
                <pre><code>

this.<span class="text-neon">count</span>
this.<span class="text-neon">count</span>, this.<span class="text-green">sum</span>
this.<span class="text-neon">count</span>, this.<span class="text-green">sum</span>
this.<span class="text-neon">count</span>, this.<span class="text-green">sum</span>
this.<span class="text-neon">count</span>, this.<span class="text-green">sum</span>, <span class="text-viola">data</span>
this.<span class="text-neon">count</span>, <span class="code">this.<span class="text-green">sum</span></span>, <span class="text-viola">data</span>, <span class="code"><span class="text-red">sum</span></span>
this.<span class="text-neon">count</span>, <span class="code">this.<span class="text-green">sum</span></span>, <span class="text-viola">data</span>, <span class="code"><span class="text-red">sum</span></span>
this.<span class="text-neon">count</span>, <span class="code">this.<span class="text-green">sum</span></span>, <span class="text-viola">data</span>, <span class="code"><span class="text-red">sum</span></span>
this.<span class="text-neon">count</span>, this.<span class="text-green">sum</span>

</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Везде переменные <code><span class="text-neon">count</span></code> и <code><span class="text-green">sum</span></code> доступны как с ключевым словом <code>this</code>, так и без него. В тех строках, где локальная переменная <code><span class="text-red">sum</span></code> затеняет переменную класса <code><span class="text-green">sum</span></code>, доступ к переменной класса <code><span class="text-green">sum</span></code> возможен только при использовании <code>this</code>.</p>
<p>Если затеняется не просто переменная класса, а статическая переменная класса, обращаться к ней нужно не через <code>this</code>, а через имя класса:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>ClassName.<span class="text-green">имя</span></code></pre>
</div>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Доступность переменных</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public class Solution
{
   public static int <span class="text-neon">count</span> = 0;
   public static int <span class="text-green">sum</span> = 0;

   public void add(int <span class="text-viola">data</span>)
   {
     int <span class="code"><span class="text-red">sum</span></span> = data * 2;
     Solution.<span class="text-green">sum</span> = Solution.<span class="text-green">sum</span> + <span class="text-viola">data</span>;
     <span class="text-neon">count</span>++;
   }
}</code></pre>
        </td>
        <td>
                <pre><code>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>, <span class="text-viola">data</span>
Solution.<span class="text-neon">count</span>, <span class="code">Solution.<span class="text-green">sum</span></span>, <span class="text-viola">data</span>, <span class="code"><span class="text-red">sum</span></span>
Solution.<span class="text-neon">count</span>, <span class="code">Solution.<span class="text-green">sum</span></span>, <span class="text-viola">data</span>, <span class="code"><span class="text-red">sum</span></span>
Solution.<span class="text-neon">count</span>, <span class="code">Solution.<span class="text-green">sum</span></span>, <span class="text-viola">data</span>, <span class="code"><span class="text-red">sum</span></span>
Solution.<span class="text-neon">count</span>, Solution.<span class="text-green">sum</span>

</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Везде статические переменные <code><span class="text-neon">count</span></code> и <code><span class="text-green">sum</span></code> доступны как с префиксом в виде имени класса <code>Solution</code>, так и без него. В тех строках, где локальная переменная <code><span class="text-red">sum</span></code> затеняет переменную класса <code><span class="text-green">sum</span></code>, доступ к переменной класса <code><span class="text-green">sum</span></code> возможен только при использовании префикса <code>Solution</code>.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task06.task0616"></div>
<hr>
<h2>3. Переменные внутри цикла <code>for</code></h2>
<p>И еще один маленький, но интересный факт.</p>
<p>Есть еще место, где особенным образом объявляется переменная — это <strong>цикл <code>for</code></strong>.</p>
<p>Если вы помните, обычно у цикла <code>for</code> в круглых скобках объявляется переменная-счетчик. И какова же будет видимость этой переменной? Она ведь не находится в теле цикла — значит, весь метод? Или всё-таки нет?</p>
<p>Правильный ответ такой: переменная, объявленная в заголовке <strong>цикла <code>for</code></strong>, видна только в <strong>теле цикла</strong> и в <strong>заголовке цикла <code>for</code></strong>.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Доступность переменных</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public static void main(String[] args)
{
   int <span class="text-red">a</span> = 0;

   for (int <span class="text-neon">i</span> = 0; <span class="text-neon">i</span> &lt; 10; <span class="text-neon">i</span>++)
   {
     System.out.println(<span class="text-neon">i</span>);
   }

   System.out.println("end");
}</code></pre>
        </td>
        <td><pre><code>

<span class="text-red">a</span>
<span class="text-red">a</span>
<span class="text-red">a</span>, <span class="text-neon">i</span>
<span class="text-red">a</span>, <span class="text-neon">i</span>
<span class="text-red">a</span>, <span class="text-neon">i</span>
<span class="text-red">a</span>
<span class="text-red">a</span>
<span class="text-red">a</span>

</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Поэтому вы всегда можете в своем коде последовательно написать несколько циклов с переменной-счетчиком с одинаковым именем — проблем не будет.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Доступность переменных</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public static void main(String[] args)
{
   int <span class="text-red">a</span> = 0;

   for (int <span class="text-neon">i</span> = 0; <span class="text-neon">i</span> &lt; 10; <span class="text-neon">i</span>++)
   {
     System.out.println(<span class="text-neon">i</span>);
   }

   for (int <span class="text-viola">i</span> = 0; <span class="text-viola">i</span> &lt; 10; <span class="text-viola">i</span>++)
   {
     System.out.println(<span class="text-viola">i</span>);
   }

   System.out.println("end");
}</code></pre>
        </td>
        <td><pre><code>

<span class="text-red">a</span>
<span class="text-red">a</span>
<span class="text-red">a</span>, <span class="text-neon">i</span>
<span class="text-red">a</span>, <span class="text-neon">i</span>
<span class="text-red">a</span>, <span class="text-neon">i</span>
<span class="text-red">a</span>
<span class="text-red">a</span>
<span class="text-red">a</span>, <span class="text-viola">i</span>
<span class="text-red">a</span>, <span class="text-viola">i</span>
<span class="text-red">a</span>, <span class="text-viola">i</span>
<span class="text-red">a</span>
<span class="text-red">a</span>
<span class="text-red">a</span>

</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task06.task0622.big04"></div>
<hr>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="0a6277b1-daa4-4dac-b7a1-e6bac856f62d" src="https://cdn.javarush.com/images/article/0a6277b1-daa4-4dac-b7a1-e6bac856f62d/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="397407a9-dd74-4987-8e0e-72daa97dff93" src="https://cdn.javarush.com/images/article/397407a9-dd74-4987-8e0e-72daa97dff93/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="6914a4f0-aa4e-472d-84cc-03b8694fcf54" src="https://cdn.javarush.com/images/article/6914a4f0-aa4e-472d-84cc-03b8694fcf54/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="39bbc06a-bec9-4ada-80f9-056d1dbf19f2" src="https://cdn.javarush.com/images/article/39bbc06a-bec9-4ada-80f9-056d1dbf19f2/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="038625b2-bfce-4c12-b7c6-f7f577910309" src="https://cdn.javarush.com/images/article/038625b2-bfce-4c12-b7c6-f7f577910309/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="34ebfc37-9b08-40e1-9a10-2ae9b8825359" src="https://cdn.javarush.com/images/article/34ebfc37-9b08-40e1-9a10-2ae9b8825359/original.png" alt="">
        </div>
    </div>
</div>