Знакомство с коллекцией HashMap
<p>----------------------------------------</p>
Множество пар: ключ-значение.  В Java есть еще одна интересная коллекция (в широком смысле) — это коллекция Map. Точного перевода ее названия на русский нет – чаще всего ее называют «карта», «словарь» или просто «мапа». Эта коллекция похожа на коллекцию Set, только хранит не множество элементов,
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="637efd0f-aeb6-400f-aa67-6861cb26b3eb" src="https://cdn.javarush.com/images/article/637efd0f-aeb6-400f-aa67-6861cb26b3eb/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="7492dd8a-172c-465d-84ea-728b1103d787" src="https://cdn.javarush.com/images/article/7492dd8a-172c-465d-84ea-728b1103d787/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="4b6bb015-db66-4cda-85b2-abe5fcd7f127" src="https://cdn.javarush.com/images/article/4b6bb015-db66-4cda-85b2-abe5fcd7f127/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Множество пар: ключ-значение.</h2>
<p><img data-id="3ad00f55-4ba1-41b9-bd79-444e74ab7b01" src="https://cdn.javarush.com/images/article/3ad00f55-4ba1-41b9-bd79-444e74ab7b01/original.png" alt="Множество пар: ключ-значение"></p>
<p>В Java есть еще одна интересная коллекция (в широком смысле) — это коллекция <code>Map</code>. Точного перевода ее названия на русский нет: чаще всего ее называют «карта», «словарь» или просто «мапа».</p>
<p>Эта коллекция похожа на коллекцию <code>Set</code>, только хранит не множество элементов, а множество «пар элементов». Каждая пара элементов <code>Map</code> состоит из двух: «ключ» и «значение».</p>
<p>Допустим, вы хотите хранить в программе имена сотрудников компании, их зарплаты или имена ваших коллег и их возраст. Тогда вам бы понадобилась таблица типа такой:</p>
<table>
    <tbody>
    <tr>
        <th>Имя</th>
        <th>Возраст</th>
    </tr>
    <tr>
        <td>Сергей</td>
        <td>21</td>
    </tr>
    <tr>
        <td>Николай</td>
        <td>22</td>
    </tr>
    <tr>
        <td>Иван Петрович</td>
        <td>48</td>
    </tr>
    <tr>
        <td>Анюта</td>
        <td>?</td>
    </tr>
    </tbody>
</table>
<p>В каждой строке тут хранится пара величин. Имя мы будем называть <span class="term">ключом пары</span>, а возраст — <span class="term">значением пары</span>.</p>
<p>Весь набор таких пар и будет называться <span class="term">картой</span> — <code>Map</code>.</p>
<p>Ключом пары может быть что угодно, но ключ не может быть <code>null</code>. Ключи должны быть уникальные: <span class="text-red">одна карта не может содержать два одинаковых ключа.</span></p>
<hr>
<h2>2. Класс <code>HashMap</code></h2>
<p>Класс <code>HashMap</code> является самой популярной коллекцией из всех карт (<code>Map</code>). С одной стороны, он очень похож на HashSet и имеет все его методы, а с другой — на список (<code>ArrayList</code>), если бы индексами у списка могли быть не числа, а слова.</p>
<p>Создать объект типа <code>HashMap</code> можно с помощью команды вида:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present-sm language-java"><code><span class="text-neon">HashMap</span>&lt;<span class="text-viola">TКлюч</span>, <span class="text-viola">TЗначение</span>&gt; <span class="text-green">имя</span> = new <span class="text-neon">HashMap</span>&lt;<span class="text-viola">TКлюч</span>, <span class="text-viola">TЗначение</span>&gt;();</code></pre>
</div>
<p>Где <code><span class="text-viola">TКлюч</span></code> — это тип ключей из пары элементов, <code><span class="text-viola">TЗначение</span></code> — тип значений в паре элементов, которые будут храниться в коллекции <code><span class="text-neon">HashMap</span></code>.</p>
<p>У класса <code>HashMap</code> есть такие методы:</p>
<table>
    <tbody>
    <tr>
        <th>Метод</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>void <span class="text-red">put</span>(<span class="text-viola">ТКлюч</span> key, <span class="text-viola">ТЗначение</span> value)</code></pre>
        </td>
        <td>Добавляет в коллекцию пару (<code>key</code>, <code>value</code>)</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-viola">ТЗначение</span> <span class="text-red">get</span>(<span class="text-viola">ТКлюч</span> key)</code></pre>
        </td>
        <td>Возвращает значение по ключу.</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>boolean <span class="text-red">containsKey</span>(<span class="text-viola">ТКлюч</span> key)</code></pre>
        </td>
        <td>Проверяет наличие ключа в коллекции</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>boolean <span class="text-red">containsValue</span>(<span class="text-viola">ТЗначение</span> value)</code></pre>
        </td>
        <td>Проверяет наличие значения в коллекции</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-viola">ТЗначение</span> <span class="text-red">remove</span>(<span class="text-viola">ТКлюч</span> key)</code></pre>
        </td>
        <td>Удаляет элемент из коллекции</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>void <span class="text-red">clear</span>()</code></pre>
        </td>
        <td>Очищает коллекцию: удаляет все элементы</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>int <span class="text-red">size</span>()</code></pre>
        </td>
        <td>Возвращает количество пар элементов в коллекции</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Set&lt;<span class="text-viola">ТКлюч</span>&gt; <span class="text-red">keySet</span>()</code></pre>
        </td>
        <td>Возвращает множество ключей коллекции</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Collection&lt;<span class="text-viola">ТЗначение</span>&gt; <span class="text-red">values</span>()</code></pre>
        </td>
        <td>Возвращает множество элементов коллекции</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Set&lt;<span class="text-neon">Map.Entry</span>&lt;<span class="text-viola">TКлюч</span>, <span class="text-viola">TЗначение</span>&gt;&gt; <span class="text-red">entrySet</span>()</code></pre>
        </td>
        <td>Возвращает все значения коллекции в виде множества (<code>Set</code>) пар (<code>Map.Entry</code>).</td>
    </tr>
    </tbody>
</table>
<p><strong>Добавление элементов в <code>HashMap</code></strong></p>
<p>Элементы добавляются в карту сразу парами: для этого используется метод <code>put()</code>. Первым в него передается ключ, вторым — значение.</p>
<pre class="language-java"><code>HashMap&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt; <span class="code text-orange">map</span> = new HashMap&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt;();
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Серега", 21);
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Николай", 22);
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Иван Петрович", 48);
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Анюта", null);</code></pre>
<p><span class="text-orange">Если при добавлении элемента выяснится, что элемент с таким ключом уже есть, старое значение ключа заменится на новое.</span></p>
<p>Такое поведение делает <code>HashMap</code> похожим на массив или список, если бы у них в качестве индексов выступали слова (<code>String</code>), а не числа.</p>
<div class="lesson-note lesson-note--important">
    <div class="lesson-note__container">
        <div class="lesson-note__head">Важно:</div>
        <div class="lesson-note__content">
            <p>В качестве Типа-Ключа и Типа-Значения могут выступать практически любые типы. Есть небольшие дополнительные требования к Типу-Ключу, но о них вы узнаете при детальном изучении коллекций в квесте Java Collections.</p>
        </div>
    </div>
</div>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1309"></div>
<hr>
<h2>3. Подмножества <code>HashMap</code>: множество ключей</h2>
<p>Допустим мы хотим просто вывести все элементы <code>HashMap</code> на экран, как нам это сделать? Для этого нужно понять, как пройтись по всем элементам <code>HashMap</code>. Это можно сделать разными способами.</p>
<p><strong>Самый простой способ &#8211; использовать цикл по ключам</strong></p>
<p>У элементов класса <code>HashMap</code> нет порядкового номера, поэтому цикл со счетчиком тут не подойдет. Зато мы можем получить множество ключей с помощью метода <code><span class="text-red">keySet</span>()</code>, а как пройтись по множеству вы уже знаете:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">HashMap</span>&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt; <span class="code text-orange">map</span> = new <span class="text-neon">HashMap</span>&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt;();
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Серега", 21);
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Николай", 22);
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Иван Петрович", 48);
<span class="code text-orange">map</span>.<span class="text-red">put</span>("Анюта", null);

for (String <span class="code"><span class="text-green">key</span></span>: <span class="code text-orange">map</span>.<span class="text-red">keySet</span>())
{
   Integer <span class="code"><span class="text-user">value</span></span> = <span class="code text-orange">map</span>.<span class="text-red">get</span>(<span class="code"><span class="text-green">key</span></span>);
   System.out.println(<span class="code"><span class="text-green">key</span></span> + " --&gt; " + <span class="code"><span class="text-user">value</span></span>);
}</code></pre>
        </td>
        <td><br><br><br><br><br><br>Цикл по всем ключам <code>map</code><br><br>
            Получаем значение по ключу
        </td>
    </tr>
    </tbody>
</table>
<p>Метод <code>keySet()</code> возвращает множество ключей. Можно использовать это множество двумя способами:</p>
<table>
    <tbody>
    <tr>
        <th>Компактная запись</th>
        <th>Длинная запись</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>for (String <span class="code"><span class="text-green">key</span></span>: <span class="code text-orange">map</span>.<span class="text-red">keySet</span>())
{
   Integer <span class="code"><span class="text-user">value</span></span> = <span class="code text-orange">map</span>.<span class="text-red">get</span>(<span class="code"><span class="text-green">key</span></span>);
   System.out.println(<span class="code"><span class="text-green">key</span></span> + " --&gt; " + <span class="code"><span class="text-user">value</span></span>);
}</code></pre>
        </td>
        <td>
<pre class="language-java"><code>Set&lt;String&gt; <span class="code text-viola">keys</span> = <span class="code text-orange">map</span>.<span class="text-red">keySet</span>();

for (String <span class="code"><span class="text-green">key</span></span>: <span class="code text-viola">keys</span>)
{
   Integer <span class="code"><span class="text-user">value</span></span> = <span class="code text-orange">map</span>.<span class="text-red">get</span>(<span class="code"><span class="text-green">key</span></span>);
   System.out.println(<span class="code"><span class="text-green">key</span></span> + " --&gt; " + <span class="code"><span class="text-user">value</span></span>);
}</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1310"></div>
<hr>
<h2>4. Использование цикла по парам</h2>
<p>Есть и более сложный способ: можно преобразовать <code>Map</code> в <span class="term">множество пар элементов</span>, а потом использовать цикл по элементам множества, как мы уже раньше учили.</p>
<p>В коллекции <code>HashMap</code> есть вспомогательный класс для хранения пары элементов. Выглядит он примерно так:</p>
<pre class="language-java"><code>class Entry&lt;<span class="text-green">KeyType</span>, <span class="text-user">ValueType</span>&gt;
{
   private <span class="text-green">KeyType</span> <span class="text-red">key</span>;
   private <span class="text-user">ValueType</span> <span class="text-viola">value</span>;

   public <span class="text-green">KeyType</span> getKey()
   {
      return this.<span class="text-red">key</span>;
   }

   public <span class="text-user">ValueType</span> getValue()
   {
      return this.<span class="text-viola">value</span>;
   }
}</code></pre>
<p>Результат вызова метода <code><span class="text-red">entrySet</span>()</code> у объекта типа <code><span class="text-neon">HashMap</span>&lt;<span class="text-viola">ТКлюч, ТЗначение</span>&gt;</code> будет иметь тип <code><span class="text-neon">Set</span>&lt;<span class="text-orange">Entry</span>&lt;<span class="text-viola">ТКлюч, ТЗначение</span>&gt;&gt;</code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-neon">Set</span>&lt;<span class="text-orange">Entry</span>&lt;<span class="text-viola">Ключ</span>, <span class="text-viola">Значение</span>&gt;&gt; <span class="text-green">имя</span> = <span class="text-user">map</span>.<span class="text-red">entrySet</span>();</code></pre>
</div>
<p>Тут мы видим сложный тип <code><span class="text-neon">Set</span></code> с параметром-значением, а в качестве параметра-значение выступает еще один сложный тип (<code><span class="text-orange">Entry</span></code>), так еще и с двумя параметрами.</p>
<p>Новичку очень легко в этом запутаться. Хотя, если разберетесь, сможете писать код вида:</p>
<pre class="language-java"><code><span class="text-neon">HashMap</span>&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt; <span class="code text-user">map</span> = new <span class="text-neon">HashMap</span>&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt;();
<span class="code text-user">map</span>.<span class="text-red">put</span>("Серега", 21);
<span class="code text-user">map</span>.<span class="text-red">put</span>("Николай", 22);
<span class="code text-user">map</span>.<span class="text-red">put</span>("Иван Петрович", 48);
<span class="code text-user">map</span>.<span class="text-red">put</span>("Анюта", null);

Set&lt;Map.Entry&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt;&gt; <span class="code text-viola">entries</span> = <span class="code text-user">map</span>.<span class="text-red">entrySet</span>();
for(Map.Entry&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt; <span class="code text-orange">pair</span>: <span class="code text-viola">entries</span>)
{
   String <span class="code"><span class="text-green">key</span></span> = <span class="code text-orange">pair</span>.getKey();
   Integer <span class="code"><span class="text-user">value</span></span> = <span class="code text-orange">pair</span>.getValue();
   System.out.println(<span class="code"><span class="text-green">key</span></span> + " --&gt; " + <span class="code"><span class="text-user">value</span></span>);
}</code></pre>
<p>Хотя этот код можно и немножко упростить:</p>
<p>Во-первых, можно не создавать отдельную переменную для <code>entries</code>, а сразу вызвать метод <code><span class="text-red">entrySet</span>()</code> внутри цикла <code>for</code>:</p>
<pre class="language-java"><code>for(Map.Entry&lt;<span class="text-green">String</span>, <span class="text-user">Integer</span>&gt; <span class="code text-orange">pair</span>: <span class="code text-user">map</span>.<span class="text-red">entrySet</span>())
{
   String <span class="code"><span class="text-green">key</span></span> = <span class="code text-orange">pair</span>.getKey();
   Integer <span class="code"><span class="text-user">value</span></span> = <span class="code text-orange">pair</span>.getValue();
   System.out.println(<span class="code"><span class="text-green">key</span></span> + " --&gt; " + <span class="code"><span class="text-user">value</span></span>);
}</code></pre>
<p>Во-вторых, можно воспользоваться недавно появившимся оператором <code>var</code> для автоматического выведения типа <span class="term">пары&nbsp;элементов</span>:</p>
<pre class="language-java"><code>for(var <span class="code text-orange">pair</span>: <span class="code text-user">map</span>.entrySet())
{
   String <span class="code"><span class="text-green">key</span></span> = <span class="code text-orange">pair</span>.getKey();
   Integer <span class="code"><span class="text-user">value</span></span> = <span class="code text-orange">pair</span>.getValue();
   System.out.println(<span class="code"><span class="text-green">key</span></span> + " --&gt; " + <span class="code"><span class="text-user">value</span></span>);
}</code></pre>
<p>Уже неплохо, да?</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1311"></div>
<hr>
<h2>5. Сравнение <code>ArrayList</code> vs <code>HashMap</code></h2>
<p><code>HashMap</code> сильно напоминает <code>ArrayList</code>, у которого в качестве индексов используются не цифры, а слова (или другой тип ключей).</p>
<p>А если в качестве ключа в <code>HashMap</code> использовать <code>Integer</code>, он становится еще более похожим на <code>ArrayList</code>. Сравните:</p>
<table>
    <tbody>
    <tr>
        <th>Код с ArrayList&lt;String&gt;</th>
        <th>Код с HashMap&lt;Integer, String&gt;</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">ArrayList</span>&lt;String&gt; <span class="code text-user">list</span> = new <span class="text-neon">ArrayList</span>&lt;String&gt;();

<span class="code text-user">list</span>.<span class="text-red">add</span>("Привет");
<span class="code text-user">list</span>.<span class="text-red">add</span>("Hello");

String s = <span class="code text-user">list</span>.<span class="text-red">get</span>(0);
<span class="code text-user">list</span>.<span class="text-red">set</span>(0, s + "!");

for (String <span class="code text-orange">item</span>: <span class="code text-user">list</span>)
{
   System.out.println(<span class="code text-orange">item</span>);
}</code></pre>
        </td>
        <td>
<pre class="language-java"><code><span class="text-neon">HashMap</span>&lt;Integer, String&gt; <span class="code text-user">map</span> = new <span class="text-neon">HashMap</span>&lt;Integer, String&gt;();

<span class="code text-user">map</span>.<span class="text-red">put</span>(0, "Привет");
<span class="code text-user">map</span>.<span class="text-red">put</span>(1, "Hello");

String s = <span class="code text-user">map</span>.<span class="text-red">get</span>(0);
<span class="code text-user">map</span>.<span class="text-red">put</span>(0, s + "!");

for (String <span class="code text-orange">item</span>: <span class="code text-user">map</span>.<span class="text-red">values</span>())
{
   System.out.println(<span class="code text-orange">item</span>);
}</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1312"></div>