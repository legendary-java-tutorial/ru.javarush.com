Типы-обертки
<p>----------------------------------------</p>
Список типов-оберток
Все вы знаете, что в Java есть 8 примитивных типов, которые не являются классами. С одной стороны – это хорошо – они простые и занимают мало места, а с другой иногда нужны именно классы. Зачем именно вы узнаете в следующей лекции.
Так что же делать?
<p>----------------------------------------</p>
<h2>1. Список типов-оберток</h2>
<p>Все вы знаете, что в Java есть 8 примитивных типов, которые не являются классами. С одной стороны, это хорошо: они простые и занимают мало места, а с другой — иногда нужны именно классы. Зачем именно они, вы узнаете в следующей лекции.</p>
<p>Так что же делать?</p>
<p>Начиная с пятой версии, в Java у примитивных типов появились классы-близнецы. Каждый такой класс хранит внутри одно поле со значением определенного типа. Такие классы еще называют <span class="term">типами-обертками</span>, потому что они как бы оборачивают примитивные значения в классы.</p>
<p>Вот список таких типов, ничего не узнаете?</p>
<table>
    <tbody>
    <tr>
        <th class="text-center">Примитивный тип</th>
        <th class="text-center">Класс-обертка</th>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-green">byte</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-green">Byte</span></code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-green">short</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-green">Short</span></code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-green">int</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-green">Integer</span></code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-green">long</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-green">Long</span></code></pre>
        </td>
    </tr>
    <tr class="row-separator">
        <td colspan="2"></td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-user">float</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-user">Float</span></code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-user">double</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-user">Double</span></code></pre>
        </td>
    </tr>
    <tr class="row-separator">
        <td colspan="2"></td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-red">char</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-red">Character</span></code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="text-center"><code><span class="text-orange">boolean</span></code></pre>
        </td>
        <td>
            <pre class="text-center"><code><span class="text-orange">Boolean</span></code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Названия примитивных типов пишутся с маленькой буквы, а классов — с большой. Также названия классов немного длиннее: <code>Integer</code> вместо <code>int</code> и <code>Character</code> вместо <code>char</code>.</p>
<p>Все объекты классов-оберток являются неизменяемыми (<span class="term">immutable</span>).</p>
<p>Упрощенный код класса <code>Integer</code> выглядит примерно так:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public class <span class="text-neon">Integer</span>
{
   private int <span class="text-user">value</span>;

   <span class="text-neon">Integer</span>(int <span class="text-green">x</span>)
   {
      this.<span class="text-user">value</span> = <span class="text-green">x</span>;
   }

   public int <span class="text-red">intValue</span>()
   {
      return this.<span class="text-user">value</span>;
   }

   public static <span class="text-neon">Integer</span> <span class="text-red">valueOf</span>(int <span class="text-green">x</span>)
   {
      return new <span class="text-neon">Integer</span>(<span class="text-green">x</span>);
   }
}</code></pre>
        </td>
        <td><br><br>Переменная-значение<br><br>
            Конструктор<br><br><br><br><br>
            Метод возвращает значение<br><br><br><br><br>
            Статический метод создает новый объект <code><span class="text-neon">Integer</span></code> для переменной типа <code>int</code></td>
    </tr>
    </tbody>
</table>
<hr>
<h2>2. Преобразование типа <code>int</code> к <code>Integer</code></h2>
<p>Типы-обертки считаются аналогами их более примитивных собратьев: можно легко создать соответствующий объект-обертку для примитивного типа.</p>
<p>Разберем взаимодействие примитивных типов и их типов-оберток на примере типа int. Вот как бы выглядел код преобразования типа <code>int</code> к типу <code>Integer</code> и наоборот:</p>
<p>Чтобы преобразовать тип <code>int</code> к типу <code>Integer</code>, нужно написать код:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-neon">Integer</span> <span class="text-green">имя</span> = new <span class="text-neon">Integer</span>(<span class="text-user">значение</span>);</code></pre>
</div>
<p>Где <code><span class="text-green">имя</span></code> — это имя переменной типа <code><span class="text-neon">Integer</span></code>, а <code><span class="text-user">значение</span></code> — это оборачиваемое значение типа <code>int</code>.</p>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-green">age</span> = new <span class="text-neon">Integer</span>(<span class="text-user">18</span>);</code></pre>
        </td>
        <td></td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-green">hundred</span> = new <span class="text-neon">Integer</span>(<span class="text-user">100</span>);</code></pre>
        </td>
        <td></td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-green">zero</span> = new <span class="text-neon">Integer</span>(<span class="text-user">0</span>);</code></pre>
        </td>
        <td></td>
    </tr>
    </tbody>
</table>
<p>А чтобы преобразовать тип <code>Integer</code> к типу <code>int</code>, нужно написать код:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">int</span> <span class="text-user">имя</span> = <span class="text-green">переменная</span>.<span class="text-red">intValue</span>();</code></pre>
</div>
<p>Где <code><span class="text-user">имя</span></code> — это имя переменной типа <code><span class="text-viola">int</span></code>, а <code><span class="text-green">переменная</span></code> — это переменная-ссылка на объект типа <code><span class="text-neon">Integer</span></code>.</p>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-green">age</span> = new <span class="text-neon">Integer</span>(<span class="text-user">18</span>);
int <span class="text-user">x</span> = <span class="text-green">age</span>.<span class="text-red">intValue</span>();</code></pre>
        </td>
        <td>
                <pre><code>
x == 18</code></pre>
        </td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-green">hundred</span> = new <span class="text-neon">Integer</span>(<span class="text-user">100</span>);
int <span class="text-user">y</span> = <span class="text-green">hundred</span>.<span class="text-red">intValue</span>();</code></pre>
        </td>
        <td>
                <pre><code>
y == 100</code></pre>
        </td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-green">zero</span> = new <span class="text-neon">Integer</span>(<span class="text-user">0</span>);
int <span class="text-user">z</span> = <span class="text-green">zero</span>.<span class="text-red">intValue</span>();</code></pre>
        </td>
        <td>
                <pre><code>

z == 0</code></pre>
        </td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>int <span class="text-orange">i</span> = <span class="text-user">110</span>;
<span class="text-neon">Integer</span> <span class="text-green">zero</span> = new <span class="text-neon">Integer</span>(<span class="text-orange">i</span>);
int <span class="text-user">z</span> = <span class="text-green">zero</span>.<span class="text-red">intValue</span>();</code></pre>
        </td>
        <td>
                <pre><code>
z == 110</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<h2>3. Autoboxing и unboxing</h2>
<p>Однако даже простые операции с типом <code>Integer</code> писать непросто.</p>
<p>Как мы уже говорили, тип <code>Integer</code> — неизменяемый (<span class="term">immutable</span>). Чтобы создать объект типа <code>Integer</code> с новым значением типа <code>int</code>, нужно явно создать новый объект <code>Integer</code>. Зато получить значение типа <code>int</code>, которое хранится внутри объекта <code>Integer</code>, просто: нужно вызвать метод <code>intValue()</code>.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">Integer</span> <span class="text-user">a</span> = <span class="text-neon">Integer</span>.valueOf(<span class="text-user">5</span>);
int <span class="text-green">b</span> = <span class="text-user">a</span>.<span class="text-red">intValue</span>();
<span class="text-neon">Integer</span> <span class="text-orange">c</span> = new <span class="text-neon">Integer</span>(<span class="text-green">b</span> + <span class="text-user">5</span>)</code></pre>
        </td>
        <td>Оборачиваем <code>5</code> в класс <code>Integer</code><br>
            Получаем значение из объекта <code>Integer</code><br>
            Создаем новое значение <code>Integer == 10</code></td>
    </tr>
    </tbody>
</table>
<p>Код довольно громоздкий, не находите?</p>
<p>Создатели Java тоже так считают, поэтому они научили компилятор делать эти операции автоматически. Автоматическое преобразование <code>int</code> в <code>Integer</code> называется <span class="term"><strong>autoboxing</strong></span> (box — коробка, класть в коробку), а обратная операция — <code>Integer</code> к <code>int</code> — <span class="term"><strong>unboxing</strong></span>.</p>
<table>
    <tbody>
    <tr>
        <th>Ваш код</th>
        <th>Что видит компилятор</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="code text-user">a</span> = 10;</code></pre>
        </td>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="code text-user">a</span> = <span class="text-neon">Integer</span>.valueOf(10);</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-viola">int</span> <span class="code text-green">b</span> = <span class="code text-user">a</span>;</code></pre>
        </td>
        <td>
            <pre class="language-java"><code><span class="text-viola">int</span> <span class="code text-green">b</span> = <span class="code text-user">a</span>.<span class="text-red">intValue</span>();</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="code text-orange">c</span> = <span class="code text-user">a</span> + <span class="code text-green">b</span>;</code></pre>
        </td>
        <td>
            <pre class="language-java"><code><span class="text-neon">Integer</span> <span class="code text-orange">c</span> = <span class="text-neon">Integer</span>.valueOf(<span class="code text-user">a</span>.<span class="text-red">intValue</span>() + <span class="code text-green">b</span>);</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Благодаря autoboxing и unboxing, вы можете спокойно присваивать тип <code>int</code> типу <code>Integer</code> и наоборот. Можно писать выражения любой сложности и не делать различий между типами <code>int</code> и <code>Integer</code>.</p>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Что сгенерирует компилятор</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Integer a = 5;
int b = a;
Integer c = a + b;
int d = a + b + c;</code></pre>
        </td>
        <td>
<pre class="language-java"><code>Integer a = <span class="text-neon">Integer</span>.valueOf(5);
int b = a.<span class="text-red">intValue</span>();
Integer c = <span class="text-neon">Integer</span>.valueOf(a.<span class="text-red">intValue</span>() + b);
int d = a.<span class="text-red">intValue</span>() + b + c.<span class="text-red">intValue</span>();</code></pre>
        </td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Integer a = 5;
int b = 5;

if (a == b)
{
   ...
}</code></pre>
        </td>
        <td>
<pre class="language-java"><code>Integer a = <span class="text-neon">Integer</span>.valueOf (5);
int b = 5;

if (a.<span class="text-red">intValue</span>() == b)
{
   ...
}</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1201"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1202"></div>
<hr>
<h2>4. Сравнение переменных классов-оберток</h2>
<p>Autoboxing и unboxing работают очень просто и прозрачно: где нужно — расставляются команды new <code>Integer()</code>, где нужно — вызываются методы <code>intValue()</code>.</p>
<p>Для вас как для программиста все работает легко и понятно. Но учтите, что <span class="text-green">если вы сравниваете <code><span class="text-green">Integer</span></code> и <code><span class="text-green">Integer</span></code>, происходит сравнение ссылок, а не значений.</span></p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Integer <span class="code text-user">a</span> = 1000;
Integer <span class="code text-green">b</span> = 1000;

System.out.println(<span class="code text-user">a</span> == <span class="code text-green">b</span>);</code></pre>
        </td>
        <td><pre><code>


<span class="text-red">false</span></code></pre>
        </td>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Integer <span class="code text-user">a</span> = 1000;
Integer <span class="code text-green">b</span> = 1000;

System.out.println(<span class="code text-user">a</span>.<span class="text-red">equals</span>(<span class="code text-green">b</span>));</code></pre>
        </td>
        <td><pre><code>


<span class="text-green">true</span></code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Переменные <code><span class="text-user">a</span></code> и <code><span class="text-green">b</span></code> хранят не значения (как типы <code>int</code>), а ссылки на объекты. Поэтому важно помнить, как правильно их сравнивать:</p>
<table>
    <tbody>
    <tr>
        <th><span class="text-red">Неправильно</span></th>
        <th><span class="text-green">Правильно</span></th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Integer <span class="code text-user">a</span> = 1000;
Integer <span class="code text-green">b</span> = 1000;
if (<span class="code text-user">a</span> == <span class="code text-green">b</span>)
{
   ...
}</code></pre>
        </td>
        <td>
<pre class="language-java"><code>Integer <span class="code text-user">a</span> = 1000;
Integer <span class="code text-green">b</span> = 1000;
if (<span class="code text-user">a</span>.equals(<span class="code text-green">b</span>))
{
   ...
}</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task12.task1203"></div>