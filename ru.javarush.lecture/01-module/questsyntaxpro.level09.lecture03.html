Устройство класса String
<p>----------------------------------------</p>
Устройство класса String Сегодня мы поговорим о классе String. Класс String самый популярный класс в Java, после типа int. Он используется абсолютно везде. У него есть куча полезных методов, которые лучше знать, чем не знать. Класс String – единственный класс, кроме примитивных типов, литералы к
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="a1679c65-a0dd-4338-b522-6d35bf554a30" src="https://cdn.javarush.com/images/article/a1679c65-a0dd-4338-b522-6d35bf554a30/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="bcfcc55f-5286-43fd-bb90-c2570924accf" src="https://cdn.javarush.com/images/article/bcfcc55f-5286-43fd-bb90-c2570924accf/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="7a10d2ac-8314-42fc-8cb9-6265644e76c1" src="https://cdn.javarush.com/images/article/7a10d2ac-8314-42fc-8cb9-6265644e76c1/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Устройство класса <code>String</code></h2>
<p>Сегодня мы поговорим о классе <code>String</code>. Класс String — самый популярный класс в Java после типа int. Он используется абсолютно везде. У него есть куча полезных методов, которые лучше знать, чем не знать.</p>
<p>Класс <code>String</code> — единственный класс, кроме примитивных типов, литералы которого можно использовать в <code>switch</code>; компилятор по-особому обрабатывает сложение строк и объектов; объекты <code>String</code> по-особому хранятся в памяти. В общем, класс <code>String</code> — это очень специфический класс.</p>
<p>Также у класса <code>String</code> есть куча классов-сателлитов, цель которых — еще больше упростить работу со строками в Java. Когда вы изучите все это, вам действительно станет значительно проще делать многие вещи. Ну а начнем мы с самого сердца этой экосистемы — с устройства класса <code>String</code>.</p>
<p><strong>Массив символов</strong></p>
<p>А устроен класс <code>String</code> на самом деле очень просто: внутри него находится массив символов (char), который хранит все символы строки. Вот так, например, хранится слово «Привет»:</p>
<img data-id="c0c18110-2248-4d42-a6cc-31a8f846cc9d" src="https://cdn.javarush.com/images/article/c0c18110-2248-4d42-a6cc-31a8f846cc9d/original.png" alt="Устройство класса String">
<div class="lesson-note lesson-note--important">
    <div class="lesson-note__container">
        <div class="lesson-note__head">Важно!</div>
        <div class="lesson-note__content">
            <p>На самом деле все немного не так. Т.к. класс <code>String</code> очень важен, в нем используется очень много оптимизаций, и данные хранятся внутри не в виде массива символов, а просто в виде массива байтов.</p>
        </div>
    </div>
</div>
<hr>
<h2>2. Методы класса <code>String</code></h2>
<p>У класса <code>String</code> очень много методов: одних только конструкторов у него 18 штук! Поэтому ниже мы приведем только самые основные из них:</p>
<table>
    <tbody>
    <tr>
        <th>Методы</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>int <span class="text-red">length</span>()</code></pre>
        </td>
        <td>Возвращает количество символов в строке</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>boolean <span class="text-red">isEmpty</span>()</code></pre>
        </td>
        <td>Проверяет, что строка == пустая строка</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>boolean <span class="text-red">isBlank</span>()</code></pre>
        </td>
        <td>Проверяет, что в строке — только whitespace-символы: пробел, tab, enter и т.п.</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>char <span class="text-red">charAt</span>(int index)</code></pre>
        </td>
        <td>Возвращает символ, который стоит на index-позиции в строке.</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>char[] <span class="text-red">toCharArray</span>()</code></pre>
        </td>
        <td>Возвращает массив символов (копию), из которых состоит строка</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>byte[] <span class="text-red">getBytes</span>()</code></pre>
        </td>
        <td>Преобразует строку в набор байт и возвращает массив байт.</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>String[] <span class="text-red">split</span>(String regex)</code></pre>
        </td>
        <td>Разделяет строку на несколько подстрок.</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>String <span class="text-red">join</span>(CharSequence delimiter, elements)</code></pre>
        </td>
        <td>Склеивает вместе несколько подстрок</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>String <span class="text-red">intern</span>()</code></pre>
        </td>
        <td>Помещает строку в пул <code>StringPool</code>.</td>
    </tr>
    </tbody>
</table>
<p>Больше о конструкторах вы можете узнать из статьи <a href="https://javarush.com/groups/posts/konstruktory-v-java-1">Зачем нужен конструктор?</a></p>
<p>Давайте напишем программу, которая преобразовывает путь к файлу из Unix Style в Windows Style. Unix в качестве разделителя директорий использует символ <code>/</code>, Windows — символ <code>\</code>.</p>
<p><strong>Решение 1 —</strong> использование массива char’ов</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Scanner <span class="text-orange">console</span> = new Scanner(System.in);
String <span class="text-green">path</span> = <span class="text-orange">console</span>.nextLine();

char[] <span class="text-user">chars</span> = <span class="text-green">path</span>.<span class="text-red">toCharArray</span>();
for (int i = 0; i &lt; <span class="text-user">chars</span>.length; i++)
   if (<span class="text-user">chars</span>[i] == '/')
      <span class="text-user">chars</span>[i] = '\\';

String <span class="text-viola">result</span> = new String(<span class="text-user">chars</span>);
System.out.println(<span class="text-viola">result</span>);</code></pre>
        </td>
        <td>Создание объекта Scanner<br>
            Чтение строки с консоли<br><br>
            Преобразование строки в массив символов<br>
            Цикл по символам<br>
            Если символ равен <code>/</code>,<br>
            заменить его на <code>\</code>. Не забываем про экранирование.<br><br>
            Создаем новую строку на основе массива символов.<br>
            Выводим строку на экран.
        </td>
    </tr>
    </tbody>
</table>
<p><strong>Решение 2</strong> — использование методов <code>split()</code> и <code>join()</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Scanner <span class="text-orange">console</span> = new Scanner(System.in);
String <span class="text-green">path</span> = <span class="text-orange">console</span>.nextLine();

String[] <span class="text-user">array</span> = <span class="text-green">path</span>.<span class="text-red">split</span>("/");


String result = <span class="text-viola">String</span>.<span class="text-red">join</span>("\\", <span class="text-user">array</span>);


System.out.println(result);</code></pre>
        </td>
        <td>Создание объекта Scanner<br>
            Чтение строки с консоли<br><br>
            Преобразование строки в <span class="text-user">массив строк</span>. В качестве разделителя используется символ <code>/</code> (дополнительные два слеша – это следствие двойного экранирования).<br>
            Объединяем все строки из <span class="text-user">массива строк</span>, в качестве разделителя используется символ <code>\</code> (мы видим его экранированным).<br><br>
            Выводим строку на экран.
        </td>
    </tr>
    </tbody>
</table>
<p><strong>Решение 3</strong> — использование метода <code>replace(char oldChar, char newChar)</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Scanner <span class="text-orange">console</span> = new Scanner(System.in);
String <span class="text-green">path</span> = <span class="text-orange">console</span>.nextLine();

String <span class="text-viola">result</span> = <span class="text-green">path</span>.<span class="text-red">replace</span>('/', '\\');

System.out.println(<span class="text-viola">result</span>);</code></pre>
        </td>
        <td>Создание объекта Scanner<br>
            Чтение строки с консоли<br><br>
            Просто заменяем один символ на второй<br>
            (второй — экранирован)<br>
            Выводим строку на экран.
        </td>
    </tr>
    </tbody>
</table>