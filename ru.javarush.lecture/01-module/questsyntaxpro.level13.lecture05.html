Новый тип данных – enum: перечисление
<p>----------------------------------------</p>
Предыстория появления enum Сегодня мы изучим еще одну разновидность типов данный в Java – enum. Название enum происходит от слова Enumeration – перечисление. Что же это за тип данных и с чем его едят? Иногда в работе программиста возникает необходимость создать новый тип данных, переменные котор
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="4a8878b3-08d1-4bdd-8dd3-e86e8750a5db" src="https://cdn.javarush.com/images/article/4a8878b3-08d1-4bdd-8dd3-e86e8750a5db/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="216f9734-6eac-4dd0-820c-03ace5adf2f0" src="https://cdn.javarush.com/images/article/216f9734-6eac-4dd0-820c-03ace5adf2f0/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="c8d92725-d2f4-4dd4-8a61-dbea5b574cae" src="https://cdn.javarush.com/images/article/c8d92725-d2f4-4dd4-8a61-dbea5b574cae/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Предыстория появления <code>enum</code></h2>
<p>Сегодня мы изучим еще одну разновидность типов данных в Java — <code>enum</code>. Название <code>enum</code> происходит от слова <span class="term">Enumeration</span> — перечисление. Что же это за тип данных и с чем его едят?</p>
<p>Иногда в работе программиста возникает необходимость создать новый тип данных, переменные которого принимают только значения из небольшого фиксированного списка.</p>
<p>Например, тип <code>ДеньНедели</code> может принимать только значения <code>ПОНЕДЕЛЬНИК</code>, <code>ВТОРНИК</code>, <code>СРЕДА</code>, ... Всего 7 значений. Или тип <code>Месяц</code> может принимать только значения <code>ЯНВАРЬ</code>, <code>ФЕВРАЛЬ</code>, <code>МАРТ</code>, ... Всего 12 значений.</p>
<p>Можно, конечно, использовать числа (тип <code>int</code>): <code>1</code> — понедельник, <code>2</code> — вторник и т.д. Но кто-то случайно может присвоить такой переменной значение <code>8</code>, или, например, значение <code>0</code>.</p>
<p>Легко может возникнуть ситуация, когда один программист думает, что дни недели (или месяцы) нумеруются с нуля, другой — что с единицы и т.д.</p>
<p>Поэтому в Java придумали тип данных, который состоит из <span class="text-green">конечного набора значений</span> — <code>enum</code>.</p>
<hr>
<h2>2. Объявление типа</h2>
<p>Выглядит объявление нового <code>enum</code> типа данных так:</p>
<div class="lesson-example lesson-example--center">
<pre class="lecture-code lecture-code--present language-java"><code>enum <span class="text-green">ИмяТипа</span>
{
   <span class="text-user">ЗНАЧЕНИЕ1</span>,
   <span class="text-user">ЗНАЧЕНИЕ2</span>,
   <span class="text-user">ЗНАЧЕНИЕ3</span>
}</code></pre>
</div>
<p>Где <code><span class="text-green">ИмяТипа</span></code> — это имя нового типа (класса), а в скобках через запятую перечислены возможные значения: <code><span class="text-user">Значение1</span></code>, <code><span class="text-user">Значение2</span></code>, <code><span class="text-user">Значение3</span></code>.</p>
<p>Давайте ради примера создадим свой <code>enum</code> для типа <code>ДеньНедели</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>enum Day
{
   MONDAY,
   TUESDAY,
   WEDNESDAY,
   THURSDAY,
   FRIDAY,
   SATURDAY,
   SUNDAY
}</code></pre>
        </td>
        <td>Новый тип <code>Day</code><br><br>
            Понедельник<br>
            Вторник<br>
            Среда<br>
            Четверг<br>
            Пятница<br>
            Суббота<br>
            Воскресенье
        </td>
    </tr>
    </tbody>
</table>
<p>Присваивать значения переменным этого типа можно таким образом:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Day</span> <span class="text-green">day</span> = <span class="text-viola">Day</span>.<span class="text-red">MONDAY</span>;</code></pre>
</div>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>Day day = Day.FRIDAY;
System.out.println(day);</code></pre>
        </td>
        <td>На экран будет выведено:<br>
            <pre><code>FRIDAY</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1315"></div>
<hr>
<h2>3. Методы <code>enum</code>’а</h2>
<p>Тип <code>enum</code> имеет несколько встроенных методов, два из них очень интересные:</p>
<p>Статический метод <code>values()</code> возвращает массив всех значений типа <code>enum</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-viola">Day</span>[] <span class="text-user">days</span> = <span class="text-viola">Day</span>.<span class="text-red">values</span>();

for (<span class="text-viola">Day</span> <span class="text-green">day</span>: <span class="text-user">days</span>)
   System.out.println(<span class="text-green">day</span>);







System.out.println(days[2]);</code></pre>
        </td>
        <td>В переменную <code>days</code> сохраняется массив значений типа <code>Day</code> (7 штук)<br><br>
            Выводим содержимое массива на экран:<br>
            <pre><code>MONDAY
TUESDAY
WEDNESDAY
THURSDAY
FRIDAY
SATURDAY
SUNDAY

WEDNESDAY</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Метод <code>ordinal()</code> возвращает порядковый номер константы. Вызывать его нужно не у класса <code>enum</code>, а у значения <code>enum</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>System.out.println(<span class="text-viola">Day</span>.<span class="text-green">MONDAY</span>.<span class="text-red">ordinal</span>());
System.out.println(<span class="text-viola">Day</span>.<span class="text-green">FRIDAY</span>.<span class="text-red">ordinal</span>());
System.out.println(<span class="text-viola">Day</span>.<span class="text-green">SUNDAY</span>.<span class="text-red">ordinal</span>());</code></pre>
        </td>
        <td><pre><code>0
4
6</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1316"></div>
<hr>
<h2>4. Преобразование в класс</h2>
<p>На самом деле никакой магии тут нет, и компилятор просто подсыпал нам немного синтаксического сахара. Во время компиляции класс <code>enum Day</code> будет преобразован в обычный класс:</p>
<table>
    <tbody>
    <tr>
        <th>Код, упрощенная версия</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public class <span class="text-viola">Day</span>
{
   public static final <span class="text-viola">Day</span> MONDAY = new <span class="text-viola">Day</span>(0);
   public static final <span class="text-viola">Day</span> TUESDAY = new <span class="text-viola">Day</span>(1);
   public static final <span class="text-viola">Day</span> WEDNESDAY = new <span class="text-viola">Day</span>(2);
   public static final <span class="text-viola">Day</span> THURSDAY = new <span class="text-viola">Day</span>(3);
   public static final <span class="text-viola">Day</span> FRIDAY = new <span class="text-viola">Day</span>(4);
   public static final <span class="text-viola">Day</span> SATURDAY = new <span class="text-viola">Day</span>(5);
   public static final <span class="text-viola">Day</span> SUNDAY = new <span class="text-viola">Day</span>(6);

    private static final <span class="text-viola">Day</span>[] <span class="text-user">array</span> = {MONDAY, TUESDAY,
      WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY};

   private final int <span class="text-green">value</span>;

   private <span class="text-viola">Day</span> (int <span class="text-orange">value</span>)
   {
      this.<span class="text-green">value</span> = <span class="text-orange">value</span>;
   }

   public int <span class="text-red">ordinal</span>()
   {
      return this.<span class="text-green">value</span>;
   }

   public static <span class="text-viola">Day</span>[] <span class="text-red">values</span>()
   {
      return <span class="text-user">array</span>;
   }
}</code></pre>
        </td>
        <td>Класс <code>Day</code><br><br>
            Список статических констант-значений<br><br><br><br><br><br><br><br>
            Массив со всеми значениями типа <code>Day</code><br><br><br>
            Переменная со значением конкретного объекта <code>Day</code><br><br>
            <code>private</code> конструктор класса <code>Day</code> — объекты класса <code>Day</code> можно создавать только внутри класса <code>Day</code>.<br><br><br><br>
            Метод <code><span class="text-red">ordinal</span></code> нужно вызвать у объекта <code>Day</code>.<br><br>
            Он возвращает значение объекта — <code><span class="text-green">value</span></code>.<br><br><br>
            Метод возвращает статический массив со всеми значениями класса <code>Day</code></td>
    </tr>
    </tbody>
</table>
<p>Если убрать из класса <code><span class="text-viola">Day</span></code> все статические методы и переменные, мы получим такую картину:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>public class <span class="text-viola">Day</span>
{
  private int <span class="text-green">value</span>;

  private <span class="text-viola">Day</span> (int <span class="text-orange">value</span>)
  {
    this.<span class="text-green">value</span> = <span class="text-orange">value</span>;
  }

  public int <span class="text-red">ordinal</span>()
  {
    return this.<span class="text-green">value</span>;
  }
}</code></pre>
        </td>
        <td><br><br>Переменная <code><span class="text-green">value</span></code> хранит значение объекта <code>Day</code><br><br>
            Объекты <code>Day</code> можно создавать только внутри класса <code>Day</code> — конструктор <code>private</code>.<br><br><br><br><br>
            Метод <code><span class="text-red">ordinal</span>()</code> возвращает значение <code><span class="text-green">value</span></code> объекта <code>Day</code>.
        </td>
    </tr>
    </tbody>
</table>
<p>Т.е. в принципе ничего страшного тут не происходит. Компилятор создает класс <code>Day</code>, затем добавляет в него константы, которые были значениями у <code>enum</code>, добавляет недостающие методы и делает конструктор класса <code>private</code>. Как работают конструкторы, мы разберем немного позднее.</p>
<p>Теперь, думаем, понятно, почему мы заносим значение в переменную таким образом:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Day</span> <span class="text-green">day</span> = <span class="text-viola">Day</span>.<span class="text-red">MONDAY</span>;</code></pre>
</div>
<p><code><span class="text-red">MONDAY</span></code> — это просто статическое поле (константа) класса <code><span class="text-viola">Day</span></code>. А при обращении к статическим методам и полям извне класса перед именем поля или метода нужно указывать имя класса.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1317"></div>
<hr>
<h2>5. Еще методы <code>enum</code>’а</h2>
<p>Еще у всех <code>enum</code>-классов есть несколько интересных особенностей.</p>
<p><strong>Преобразование в строку и обратно</strong></p>
<p>Чтобы преобразовать объект типа enum в строку, у него нужно вызвать метод <code>toString()</code>.</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">String</span> <span class="text-green">str</span> = <span class="text-viola">Day</span>.MONDAY.<span class="text-red">toString</span>();</code></pre>
</div>
<p>Для обратного преобразования (строки в объект <code><span class="text-viola">Day</span></code>) можно воспользоваться статическим методом <code><span class="text-red">valueOf()</span></code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Day</span> <span class="text-green">day</span> = <span class="text-viola">Day</span>.<span class="text-red">valueOf</span>(<span class="text-green">"MONDAY"</span>);</code></pre>
</div>
<p>Очень удобно и полезно во многих случаях.</p>
<p><strong>Преобразование в число и обратно</strong></p>
<p>Как преобразовать объект типа <code>enum</code> в число, вы уже знаете: для этого нужно вызвать метод <code><span class="text-red">ordinal()</span></code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">int</span> <span class="text-green">index</span> = <span class="text-viola">Day</span>.MONDAY.<span class="text-red">ordinal</span>();</code></pre>
</div>
<p>Для обратного преобразования (числа в объект <code><span class="text-viola">Day</span></code>) нужно воспользоваться конструкцией подлиннее:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Day</span> <span class="text-green">day</span> = <span class="text-viola">Day</span>.<span class="text-red">values</span>()[2];</code></pre>
</div>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-viola">Day</span> <span class="text-user">day</span> = <span class="text-viola">Day</span>.MONDAY;
int <span class="text-green">index</span> = <span class="text-user">day</span>.<span class="text-red">ordinal</span>();
<span class="text-viola">Day</span> newDay = <span class="text-viola">Day</span>.<span class="text-red">values</span>()[<span class="text-green">index</span>+2];</code></pre>
        </td>
        <td>Понедельник<br>
            Получаем индекс понедельника (0)<br>
            День недели на 2 дня позже понедельника
        </td>
    </tr>
    </tbody>
</table>
<p><strong>Важный момент,</strong> т.к. значения типа <code>enum</code> представляют собой фиксированный набор констант, их <strong>можно сравнивать через</strong> ==. Ну не может существовать двух одинаковых объектов <code>MONDAY</code> с разными ссылками. Каждый объект-значение типа enum существует только в единственном экземпляре. Поэтому сравнение переменных типа enum через == всегда будет работать.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1318"></div>
<hr>
<h2>6. Добавление своих методов в <code>enum</code></h2>
<p>Так как <code>enum</code> во время компиляции превращается в обычный класс, в нем можно объявлять методы: эти методы просто добавятся в класс, который сгенерирует компилятор. Например, мы хотим, чтобы наш <code>enum <span class="text-viola">Day</span></code> возвращал не массив значений, а список.</p>
<p>Тогда в него можно дописать такой код:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>enum <span class="text-viola">Day</span>
{
   MONDAY,
   TUESDAY,
   WEDNESDAY,
   THURSDAY,
   FRIDAY,
   SATURDAY,
   SUNDAY;

   public static List&lt;<span class="text-viola">Day</span>&gt; <span class="text-red">asList</span>()
   {
      ArrayList&lt;<span class="text-viola">Day</span>&gt; <span class="text-user">list</span> = new ArrayList&lt;<span class="text-viola">Day</span>&gt;();

      Collections.<span class="text-red">addAll</span>(<span class="text-user">list</span>, <span class="text-red">values</span>());

      return list;
   }

}</code></pre>
        </td>
        <td><br><br><br><br><br><br><br><br>После списка значений нужно поставить точку с запятой.<br><br><br><br>
            Создаем объект <code>ArrayList</code>.<br><br>
            Добавляем в него значения из массива: его возвращает метод <code>values()</code>.<br>
            Возвращаем список.
        </td>
    </tr>
    </tbody>
</table>
<p>Теперь этот метод можно вызывать в коде:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>List&lt;Day&gt; list = Day.asList();</code></pre>
        </td>
        <td>В переменную <code>list</code> будет сохранен список всех значений <code>enum</code>’а <code>Day</code>.</td>
    </tr>
    </tbody>
</table>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task13.task1319"></div>