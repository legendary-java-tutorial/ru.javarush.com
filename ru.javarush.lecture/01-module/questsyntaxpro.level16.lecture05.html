Полезные нюансы при работе с DateTime API
<p>----------------------------------------</p>
Класс LocalDateTime Класс LocalDateTime объединяет в себе возможности классов LocalDate и LocalTime – он хранит и дату, и время. Его объекты тоже неизменяемые, и его методы так же аналогичны методам классов LocalDate и LocalTime. Получение текущего момента: дата и время Тут все в пределах ожидан
<p>----------------------------------------</p>
<h2>1. Класс <code>LocalDateTime</code></h2>
<p>Класс <code><span class="text-neon">LocalDateTime</span></code> объединяет в себе возможности классов <code><span class="text-neon">LocalDate</span></code> и <code><span class="text-neon">LocalTime</span></code>: он хранит и дату, и время. Его объекты тоже неизменяемые, и его методы также аналогичны методам классов <code><span class="text-neon">LocalDate</span></code> и <code><span class="text-neon">LocalTime</span></code>.</p>
<p><strong>Получение текущего момента: дата и время</strong></p>
<p>Тут все в пределах ожиданий: тоже используется метод <code><span class="text-red">now</span>()</code>. Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-neon">LocalDateTime</span> <span class="code text-user">time</span> = <span class="text-neon">LocalDateTime</span>.<span class="text-red">now</span>();
System.out.println("Сейчас = " + <span class="code text-user">time</span>);</code></pre>
        </td>
        <td><pre><code>
Сейчас = <span class="text-red">2019-02-22</span>T<span class="text-red">09:49:19</span>.275039200</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>При выводе на экран дата и время разделяются буквой <code>T</code>.</p>
<p><strong>Получение определенного момента: дата и время</strong></p>
<p>Все ожидаемо аналогично классам <code><span class="text-neon">LocalDate</span></code> и <code><span class="text-neon">LocalTime</span></code> — используется метод <code><span class="text-red">of</span>()</code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present-sm language-java"><code>... = <span class="text-neon">LocalDateTime</span>.<span class="text-red">of</span>(<span class="text-user">год</span>, <span class="text-user">месяц</span>, <span class="text-user">день</span>, <span class="text-user">часы</span>, <span class="text-user">минуты</span>, <span class="text-user">секунды</span>);</code></pre>
</div>
<p>Сначала идут параметры, которые задают дату в тех же форматах, что и в классе <code><span class="text-neon">LocalDate</span></code>. Затем идут параметры, задающие время в тех же форматах, что и в классе <code><span class="text-neon">LocalTime</span></code>. Список всех вариаций метода <code><span class="text-red">of</span>()</code> приведен ниже:</p>
<table>
    <tbody>
    <tr>
        <th>Методы</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (int <span class="text-user">year</span>, int <span class="text-user">month</span>, int <span class="text-user">day</span>, int <span class="text-green">hour</span>, int <span class="text-green">minute</span>)</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (int <span class="text-user">year</span>, int <span class="text-user">month</span>, int <span class="text-user">day</span>, int <span class="text-green">hour</span>, int <span class="text-green">minute</span>, int <span class="text-green">second</span>)</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (int <span class="text-user">year</span>, int <span class="text-user">month</span>, int <span class="text-user">day</span>, int <span class="text-green">hour</span>, int <span class="text-green">minute</span>, int <span class="text-green">second</span>, int <span class="text-green">nano</span>)</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (int <span class="text-user">year</span>, Month <span class="text-user">month</span>, int <span class="text-user">day</span>, int <span class="text-green">hour</span>, int <span class="text-green">minute</span>)</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (int <span class="text-user">year</span>, Month <span class="text-user">month</span>, int <span class="text-user">day</span>, int <span class="text-green">hour</span>, int <span class="text-green">minute</span>, int <span class="text-green">second</span>)</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (int <span class="text-user">year</span>, Month <span class="text-user">month</span>, int <span class="text-user">day</span>, int <span class="text-green">hour</span>, int <span class="text-green">minute</span>, int <span class="text-green">second</span>, int <span class="text-green">nano</span>)</code></pre>
        </td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>of (LocalDate <span class="text-user">date</span>, LocalTime <span class="text-green">time</span>)</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Можно задать дату явно или через объекты <code><span class="text-neon">LocalDate</span></code> и <code><span class="text-neon">LocalTime</span></code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>LocalDate <span class="code text-user">date</span> = LocalDate.now();
LocalTime <span class="code text-green">time</span> = LocalTime.now();
LocalDateTime <span class="code text-orange">current</span> = LocalDateTime.of(<span class="code text-user">date</span>, <span class="code text-green">time</span>);
System.out.println("Сейчас = " + <span class="code text-orange">current</span>);

LocalDateTime <span class="code text-orange">date</span> = LocalDateTime.<span class="text-red">of</span>(<span class="text-user">2019, Month.MAY</span>, <span class="text-user">15</span>, <span class="text-green">12</span>, <span class="text-green">15</span>, <span class="text-green">00</span>);
System.out.println("Сейчас = " + <span class="code text-orange">date</span>);</code></pre>
        </td>
    </tr>
    <tr>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
                <pre><code>Сейчас = <span class="text-user">2019-02-22</span>T<span class="text-green">10:05:38</span>.465675100
Сейчас = <span class="text-user">2019-05-15</span>T<span class="text-green">12:15</span></code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>У класса <code><span class="text-neon">LocalDateTime</span></code> есть методы получения фрагмента даты и/или времени. Они абсолютно аналогичны методам классов <code><span class="text-neon">LocalDate</span></code> и <code><span class="text-neon">LocalTime</span></code>. Дублировать их тут мы не будем.</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1612"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1613"></div>
<hr>
<h2>2. Класс <code>Instant</code></h2>
<p>Также разработчики Java не забыли интересы и старой школы.</p>
<p>В Date Time API добавили класс Instant для работы со временем, нацеленным на процессы внутри компьютеров. Вместо часов, минут и секунд, он оперирует <strong>секундами, миллисекундами и наносекундами.</strong></p>
<p>Этот класс хранит в себе два поля:</p>
<ul>
    <li><strong>количество секунд</strong>, прошедшее с 1 января 1970 года</li>
    <li><strong>количество наносекунд</strong></li>
</ul>
<p>Класс создан для разработчиков? Да. Поэтому он опять считает время в Unix-time: от начала 1970 года.</p>
<p>Можно даже сказать, что класс <code><span class="text-viola">Instant</span></code> — это упрощенная версия класса <code>Date</code>: оставили только то, что нужно программистам.</p>
<p>Получить объект <code><span class="text-viola">Instant</span></code> можно точно так же, как объект <code><span class="text-neon">LocalTime</span></code>:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code><span class="text-viola">Instant</span> <span class="code text-user">timestamp</span> = <span class="text-viola">Instant</span>.<span class="text-user">now</span>();</code></pre>
</div>
<p>Где <code class="text-user">timestamp</code> — это переменная класса <code><span class="text-viola">Instant</span></code>, а <code><span class="text-viola">Instant</span>.<span class="text-user">now</span>()</code> — вызов статического метода <code><span class="text-user">now</span>()</code> у класса <code><span class="text-viola">Instant</span></code>.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-viola">Instant</span> <span class="code text-user">timestamp</span> = <span class="text-viola">Instant</span>.<span class="text-red">now</span>();
System.out.println(<span class="code text-user">timestamp</span>);</code></pre>
        </td>
        <td><pre><code>
2019-02-22T08:42:42.234945300Z</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Также можно создать новый объект с помощью разновидностей метода <code>of()</code>, если передать в него время, прошедшее с 1 января 1970 года:</p>
<table>
    <tbody>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-red">ofEpochMilli</span>(long milliseconds)</code></pre>
        </td>
        <td>Нужно передать количество миллисекунд</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-red">ofEpochSecond</span>(long seconds)</code></pre>
        </td>
        <td>Нужно передать количество секунд</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code><span class="text-red">ofEpochSecond</span>(long seconds, long nanos)</code></pre>
        </td>
        <td>Нужно передать секунды и наносекунды</td>
    </tr>
    </tbody>
</table>
<p><strong>Методы объектов <code>Instant</code></strong></p>
<p>У класса Instant есть два метода, которые возвращают его значения:</p>
<table>
    <tbody>
    <tr>
        <td>
            <pre class="language-java"><code>long <span class="text-red">getEpochSecond</span>()</code></pre>
        </td>
        <td>Количество секунд, прошедшее с 1 января 1970 года</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>int <span class="text-red">getNano</span>()</code></pre>
        </td>
        <td>Наносекунды.</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>long <span class="text-red">toEpochMilli</span>()</code></pre>
        </td>
        <td>Количество миллисекунд, прошедшее с 1 января 1970 года</td>
    </tr>
    </tbody>
</table>
<p>Также есть методы, которые способны создавать новые объекты <code>Instant</code> на основе уже существующего:</p>
<table>
    <tbody>
    <tr>
        <td>
            <pre class="language-java"><code>Instant <span class="text-red">plusSeconds</span>(long)</code></pre>
        </td>
        <td>Добавляет секунды к текущему моменту времени</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Instant <span class="text-red">plusMillis</span>(long)</code></pre>
        </td>
        <td>Добавляет миллисекунды</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Instant <span class="text-red">plusNanos</span>(long)</code></pre>
        </td>
        <td>Добавляет наносекунды</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Instant <span class="text-red">minusSeconds</span>(long)</code></pre>
        </td>
        <td>Вычитает секунды</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Instant <span class="text-red">minusMillis</span>(long)</code></pre>
        </td>
        <td>Вычитает миллисекунды</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>Instant <span class="text-red">minusNanos</span>(long)</code></pre>
        </td>
        <td>Вычитает наносекунды</td>
    </tr>
    </tbody>
</table>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code><span class="text-viola">Instant</span> <span class="code text-user">timestamp</span> = <span class="text-viola">Instant</span>.now();
System.out.println(<span class="code text-user">timestamp</span>);

long <span class="code text-orange">n</span> = <span class="code text-user">timestamp</span>.<span class="text-red">toEpochMilli</span>();
Instant <span class="code text-green">time</span> = Instant.<span class="text-red">ofEpochMilli</span>(<span class="code text-orange">n</span>);
System.out.println(<span class="code text-green">time</span>);</code></pre>
        </td>
        <td>
                <pre><code>
2019-02-22T09:01:20.535344Z



2019-02-22T09:01:20.535Z</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1614"></div>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task16.task1615"></div>