Экранирование символов
<p>----------------------------------------</p>
Причины возникновения экранирования символов Когда-то давно вы узнали, что чтобы записать в коде строку символов нужно обернуть эти символы в двойные кавычки – получится строковой литерал. А что делать, если нам нужно, чтобы кавычки были внутри строкового литерала? Строка, содержащая кавычки – ч
<p>----------------------------------------</p>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--desktop">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="658ef5e1-3f9d-4cb7-8ac2-4805b87423a4" src="https://cdn.javarush.com/images/article/658ef5e1-3f9d-4cb7-8ac2-4805b87423a4/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="7e9ba747-e3e6-4760-95f9-712ec9c72b54" src="https://cdn.javarush.com/images/article/7e9ba747-e3e6-4760-95f9-712ec9c72b54/original.png" alt="">
        </div>
    </div>
</div>
<div class="lesson-carousel lesson-carousel--comics lesson-carousel--mobile">
    <div class="lesson-carousel__list">
        <div class="lesson-carousel__item">
            <img data-id="ec6840e5-0f30-401a-a50c-a4ba46de53d8" src="https://cdn.javarush.com/images/article/ec6840e5-0f30-401a-a50c-a4ba46de53d8/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="bda71d15-833f-4e68-9e8b-8c87676ea1ba" src="https://cdn.javarush.com/images/article/bda71d15-833f-4e68-9e8b-8c87676ea1ba/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="18dd0b76-2658-493c-9392-03a0a357051f" src="https://cdn.javarush.com/images/article/18dd0b76-2658-493c-9392-03a0a357051f/original.png" alt="">
        </div>
        <div class="lesson-carousel__item">
            <img data-id="f1d4a80c-be01-4dac-8d14-93974fbca962" src="https://cdn.javarush.com/images/article/f1d4a80c-be01-4dac-8d14-93974fbca962/original.png" alt="">
        </div>
    </div>
</div>
<hr>
<h2>1. Причины возникновения экранирования символов</h2>
<p>Когда-то давно вы узнали, что чтобы записать в коде строку символов, нужно обернуть эти символы в двойные кавычки: получится <span class="term">строковой литерал</span>.</p>
<p>А что делать, если нам нужно, чтобы кавычки были внутри строкового литерала? Строка, содержащая кавычки — что может быть проще.</p>
<p>Допустим, мы хотим вывести текст <code>Фильм "Друзья" номинирован на "Оскар"</code>. Как это сделать?</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>String s = <span class="text-green">"Фильм "Друзья" номинирован на "Оскар"";</span></code></pre>
        </td>
        <td><span class="text-red">Этот вариант работать не будет!</span></td>
    </tr>
    </tbody>
</table>
<p>Все дело в том, что по мнению компилятора тут записан совсем другой код:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>String s = "Фильм "Друзья" номинирован на "Оскар"";</code></pre>
        </td>
        <td><span class="text-red">Этот вариант работать не будет!</span></td>
    </tr>
    </tbody>
</table>
<p>После того, как компилятор встретит двойные кавычки в коде, он будет считать их началом строкового литерала. Следующие двойные кавычки — окончанием строкового литерала.</p>
<p>Так как же записать в двойные кавычки внутри литерала?</p>
<hr>
<h2>2. Экранирование символов</h2>
<p>Способ есть, ему даже дали название — <span class="term">экранирование символов</span>. Вы просто пишете внутри строки текста кавычки, а перед кавычками добавляете символ <code>\</code> (<span class="term">обратная косая черта</span> или <span class="term">обратный слеш</span> или <span class="term">бекслеш</span>, от англ. <span class="term">backslash</span>).</p>
<p>Вот как будет выглядеть правильно записанный строковой литерал:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>String s = "Фильм <span class="token keyword">\"</span>Друзья<span class="token keyword">\"</span> номинирован на <span class="token keyword">\"</span>Оскар<span class="token keyword">\"</span>";</code></pre>
        </td>
        <td><span class="text-green">Это сработает!</span></td>
    </tr>
    </tbody>
</table>
<p>Компилятор все поймет правильно и не будет считать кавычки, расположенные после <span class="term">обратной косой черты</span>, обычными кавычками.</p>
<p>Более того, если вывести данную строку на экран, кавычки с <span class="term">обратной косой чертой</span> будут правильно обработаны, и на экран будет выведена надпись без обратной косой черты: <code>Фильм "Друзья" номинирован на "Оскар"</code></p>
<p>Еще важный момент. Кавычки, предваренные обратной косой чертой — это один символ: мы просто пользуемся таким хитрым способом записи, чтобы не мешать компилятору распознавать строковые литералы в коде. Вы можете присвоить кавычки в переменную <code>char</code>:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Примечания</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>char c = '<span class="token keyword">\"</span>';</code></pre>
        </td>
        <td><code><span class="token keyword">\"</span></code> — это один символ, а не два</td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>char c = '<span class="text-neon">"</span>';</code></pre>
        </td>
        <td>так тоже можно: <span class="text-neon">двойная кавычка</span> внутри одинарных кавычек</td>
    </tr>
    </tbody>
</table>
<hr>
<h2>3. Часто возникающие ситуации при экранировании символов</h2>
<p><img data-id="58a9336a-ea2a-4606-9ece-2229a8f3e2f4" src="https://cdn.javarush.com/images/article/58a9336a-ea2a-4606-9ece-2229a8f3e2f4/original.png" alt="Часто возникающие ситуации экранирования символов"></p>
<p>Кроме двойных кавычек, есть еще много символов, которые по-особому обрабатываются компилятором. Например, перенос строки.</p>
<p>Как добавить в литерал перенос строки? Для этого тоже есть специальная комбинация:</p>
<div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java text-center"><code><span class="token keyword">\n</span></code></pre>
    <div class="lesson-example-caption">Символ переноса строки</div>
</div>
<p>Если вы хотите добавить в строковой литерал перенос строки, вам нужно просто добавить пару символов &#8211; <code>\n</code>.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
                <pre class="language-java"><code>System.out.println("С уважением,<span class="token keyword">\n</span>Аноним");
            &nbsp;</code></pre>
        </td>
        <td><pre><code>С уважением,
Аноним
</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Всего таких специальных комбинаций 8: их еще называют <span class="term">escape-последовательностями</span>, вот они:</p>
<table>
    <tbody>
    <tr>
        <th class="text-center">Код</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td class="text-center"><code>\t</code></td>
        <td>Вставить символ <span class="text-red">табуляции</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\b</code></td>
        <td>Вставить символ <span class="text-red">возврата на один символ</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\n</code></td>
        <td>Вставить символ <span class="text-red">новой строки</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\r</code></td>
        <td>Вставить символ <span class="text-red">возврата каретки</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\f</code></td>
        <td>Вставить символ <span class="text-red">прогона страницы</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\'</code></td>
        <td>Вставить <span class="text-red">одинарную кавычку</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\"</code></td>
        <td>Вставить <span class="text-red">двойную кавычку</span></td>
    </tr>
    <tr>
        <td class="text-center"><code>\\</code></td>
        <td>Вставить <span class="text-red">обратный слеш</span></td>
    </tr>
    </tbody>
</table>
<p>С двумя из них вы познакомились, а что значат остальные 6?</p>
<p><strong>Символ табуляции &#8211; <code>\t</code></strong></p>
<p>Данный символ в тексте эквивалентен нажатию на клавиатуре клавиши <code>Tab</code> при наборе текста. Он сдвигает следующий за ним текст с целью его выровнять.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
<pre class="language-java"><code>System.out.println("0<span class="token keyword">\t</span>1<span class="token keyword">\t</span>2<span class="token keyword">\t</span>3");
System.out.println("0<span class="token keyword">\t</span>10<span class="token keyword">\t</span>20<span class="token keyword">\t</span>30");
System.out.println("0<span class="token keyword">\t</span>100<span class="token keyword">\t</span>200<span class="token keyword">\t</span>300");</code></pre>
        </td>
        <td>
<pre><code>0       1        2        3
0       10       20       30
0       100      200      300</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p><strong>Возврат на один символ назад &#8211; <code>\b</code></strong></p>
<p>Данный символ в тексте эквивалентен нажатию на клавиатуре клавиши <code>Backspace</code> при наборе текста. Он удаляет последний выведенный символ перед ним:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>System.out.println("Привет<span class="token keyword">\b\b</span> Мир");</code></pre>
        </td>
        <td>
            <pre><code>Прив Мир!</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p><strong>Символ возврата каретки &#8211; <code>\r</code></strong></p>
<p>Этот символ переносит курсор в начало текущей строки, не меняя текста. Следующий выводимый текст будет перетирать существующий.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>System.out.println("Привет<span class="token keyword">\r</span>Мир!");</code></pre>
        </td>
        <td>
            <pre><code>Мир!</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p><strong>Символ прогона страницы &#8211; <code>\f</code></strong></p>
<p>Это символ дошел до нас из эпохи первых матричных принтеров. Если подать такой символ на печать, это приводило к тому, что принтер просто прокручивал текущий лист, не печатая текст, пока не начнется новый.</p>
<p>Сейчас бы мы назвали его <span class="term">разрыв страницы</span> или <span class="term">новая страница</span>.</p>
<p><strong>Обратный слэш &#8211; <code>\\</code></strong></p>
<p>Ну а тут вообще все просто. Если мы используем обратную косую черту (обратный слэш) в тексте, чтобы экранировать символы, то как тогда записать в текстовой строке сам символ косой черты?</p>
<p>Все просто: чтобы добавить в текст символ <span class="term">обратной косой черты</span>, его нужно написать два раза подряд.</p>
<p>Пример:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>System.out.println("c:<span class="text-red">\p</span>rojects<span class="text-red">\m</span>y<span class="token keyword">\f</span>irst");</code></pre>
        </td>
        <td><span class="text-red">Компилятор будет ругаться на неизвестные экранированные символы.</span></td>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>System.out.println("c:<span class="token keyword">\\</span>projects<span class="token keyword">\\</span>my<span class="token keyword">\\</span>first");</code></pre>
        </td>
        <td>Вот так правильно!</td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task09.task0909"></div>
<hr>
<h2>4. Кодировка Unicode</h2>
<p>Как вы уже знаете, каждому символу, отображаемому на экране, соответствует определенный числовой код. Стандартизированный набор таких кодов называют <span class="term">кодировкой</span>.</p>
<p>Когда-то давно, когда только изобрели компьютеры, для кодировки всех символов было достаточно семи бит (меньше одного байта) &#8211; первая кодировка содержала всего 128 символов. Называлась такая кодировка <span class="term">ASCII</span>.</p>
<p><span class="term">ASCII</span> (англ. American Standard Code for Information Interchange) — американская стандартная кодировочная таблица для печатных символов и некоторых специальных кодов.</p>
<p>Она состояла из 33 непечатных управляющих символов (влияющих на обработку текста и пробелов) и 95 печатных символов, включая цифры, буквы латинского алфавита в строчном и прописном вариантах и ряд пунктуационных символов.</p>
<p><img data-id="79996dba-834e-45f2-80b2-d0e94313d71f" src="https://cdn.javarush.com/images/article/79996dba-834e-45f2-80b2-d0e94313d71f/original.png" alt="Кодировка Unicode"></p>
<p>Рост популярности компьютеров привел к тому, что каждая страна начала выпускать свою кодировку. Обычно за основу брали ASCII и заменяли редко используемые символы на символы национальных алфавитов.</p>
<p>Со временем появилась идея: создать одну кодировку, в которой разместить все символы всех мировых кодировок.</p>
<p><img data-id="a638d5da-1544-471a-80cc-1dfad3a4f32d" src="https://cdn.javarush.com/images/article/a638d5da-1544-471a-80cc-1dfad3a4f32d/original.png" alt="Кодировка Unicode 1"></p>
<p>В 1993 году была создана кодировка <span class="term">Unicode</span>, и язык Java был первым языком программирования, который использовал ее как стандарт хранения текста. Сейчас же Unicode — стандарт всей ИТ-индустрии.</p>
<p>И хотя Unicode сам по себе является стандартом, у него есть несколько форм представления (Unicode transformation format, UTF): UTF-8, UTF-16 и UTF-32, и пр.</p>
<p>В Java используется продвинутая разновидность кодировки Unicode &#8211; UTF-16: каждый символ в которой кодировался 16 битами (2 байтами). Она способна вместить до 65,536 символов!</p>
<p>В этой кодировке можно найти почти все символы всех алфавитов мира. Но наизусть ее, естественно, никто не знает: нельзя знать все, но все можно загуглить.</p>
<p>Чтобы записать в коде программы символ кодировки Unicode по его коду, нужно написать <code>\u</code> + <span class="term">шестнадцатеричные цифры&nbsp;кода</span>. Например <code>\u00A9</code></p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code> System.out.println("<span class="token keyword">\u00A9</span> JavaRush");</code></pre>
        </td>
        <td>
            <pre><code>© JavaRush</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task09.task0910"></div>
<hr>
<h2>5. Unicode: codepoint</h2>
<p>640 Килобайт хватит всем! Или нет. (Цитата, приписываемая Биллу Гейтсу)</p>
<p>Жизнь — суровая штука, и кодировки UTF-16 со временем стало не хватать. Оказалось, что в Азии очень много языков, а у них очень много иероглифов. И все иероглифы просто невозможно засунуть в 2 байта.</p>
<p>И что же делать? Использовать <strong>больше байт</strong>!</p>
<p>Вот только тип char занимает всего 2 байта и поменять его на 4 не так просто: в мире написаны миллиарды строк кода на Java, которые будут работать неправильно, если вдруг в Java-машине тип char станет 4 байта. Так что менять тип char нельзя!</p>
<p>Есть и другой подход. Вспомните, как мы экранировали символы с помощью префикса в виде косой черты. Мы, по сути, кодировали один символ с помощью нескольких символов.</p>
<p>Этот же подход решили использовать и разработчики Java.</p>
<p>Некоторые символы, которые визуально выглядят как один символ, в строке кодируются двумя <code>char</code>'ами:</p>
<table>
    <tbody>
    <tr>
        <th>Код</th>
        <th>Вывод на экран</th>
    </tr>
    <tr>
        <td>
            <pre class="language-java"><code>System.out.println("<span class="token keyword">\uD83D\uDD0A</span>");</code></pre>
        </td>
        <td>
            <pre><code>🔊</code></pre>
        </td>
    </tr>
    </tbody>
</table>
<p>Теперь ваша программа на Java может выводить в консоль даже emoji 😎</p>
<hr>
<div class="task-widget-container" showCover="true" taskKey="com.javarush.task.pro.task09.task0911"></div>