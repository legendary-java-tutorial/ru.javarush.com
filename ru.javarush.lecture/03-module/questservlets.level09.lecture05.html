HTTP-заголовки
<p>----------------------------------------</p>
Виды заголовков
User-Agent
Content-Type
Content-Length
Accept-Encoding
<p>----------------------------------------</p>
<h2>6.1 Виды заголовков</h2>
<p><strong>Заголовки http-запроса</strong> – это фактически служебная информация для http-клиента и http-сервера. Но она очень важна, и, если ты в них совершенно не разбираешься, это частенько будет выходить тебе боком. Так что придется про них хотя бы почитать.</p>
<p>Все http-заголовки можно разделить на 4 основные группы:</p>
<table>
    <tbody>
    <tr>
        <th>#</th>
        <th>Тип заголовка</th>
        <th>Описание</th>
        <th>Примечание</th>
    </tr>
    <tr>
        <td>1</td>
        <td><strong>General Headers</strong></td>
        <td>Общие заголовки</td>
        <td>Используются в запросах и ответах</td>
    </tr>
    <tr>
        <td>2</td>
        <td><strong>Request Headers</strong></td>
        <td>Заголовки запроса</td>
        <td>Используются только в запросах</td>
    </tr>
    <tr>
        <td>3</td>
        <td><strong>Response Headers</strong></td>
        <td>Заголовки ответа</td>
        <td>Используются только в ответах</td>
    </tr>
    <tr>
        <td>4</td>
        <td><strong>Entity Headers</strong></td>
        <td>Заголовки сущности</td>
        <td>Сопровождают каждую сущность сообщения</td>
    </tr>
    </tbody>
</table>
<h2>6.2 User-Agent</h2>
<p>Самый важный и популярный заголовок – это <strong>User-Agent</strong>. Это специальная строка, которая описывает, какой клиент выполняет запрос на сервер. Такое себе имя клиента.</p>
<p>Часто сервер немного подстраивает свой ответ под запрашивающего. Например, если из запроса ясно, что запрос пришел из браузера мобильного телефона, то ему можно отдать мобильную версию HTML-страницы.</p>
<p>Спам-боты, менеджеры закачек и некоторые браузеры нередко шлют подложные <strong>User-Agent-строки</strong>, чтобы выдать себя за порядочных клиентов. Эта ситуация известна, как подмена или подделка пользовательского агента (user agent spoofing).</p>
<p>Например, мой User-Agent выглядит сейчас так:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        <span class="text-red">Mozilla/5.0</span> <span class="text-user">(Windows NT 6.1; Win64; x64; rv:99.0)</span> Gecko/20100101 <span class="text-green">Firefox/99.0</span>
        </code></pre>
</div>
<p>В нем содержится информация о браузере, операционной системе и web-движке браузера.</p>
<h2>6.3 Content-Type</h2>
<p>Второй по популярности заголовок – это <strong>Content-Type</strong>. Он используется для того, чтобы определить MIME тип ресурса, который отдает сервер.</p>
<p>Еще на заре интернета для удобства были стандартизированы типы передаваемого медиа контента. Их называют <strong>Internet Media Types</strong> или сокращенно <strong>MimeTypes</strong>. Они делятся на 9 категорий:</p>
<ul>
    <li><strong>application</strong></li>
    <li><strong>audio</strong></li>
    <li><strong>example</strong></li>
    <li><strong>image</strong></li>
    <li><strong>message</strong></li>
    <li><strong>model</strong></li>
    <li><strong>multipart</strong></li>
    <li><strong>text</strong></li>
    <li><strong>video</strong></li>
</ul>
<p>Примеры:</p>
<table>
    <tbody>
    <tr>
        <th>Категория</th>
        <th>Тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td><strong>audio</strong></td>
        <td>audio/mp4</td>
        <td>Аудио-файл в формате mp4</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>audio/aac</td>
        <td>Аудио-файл в формате AAC</td>
    </tr>
    <tr>
        <td><strong>image</strong></td>
        <td>image/gif</td>
        <td>Картинка gif</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>image/jpeg</td>
        <td>Картинка jpeg</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>image/png</td>
        <td>Картинка png
</td>
    </tr>
    <tr>
        <td><strong>text</strong></td>
        <td>text/css</td>
        <td>CSS-файл</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>text/html</td>
        <td>HTML-файл</td>
    </tr>
    <tr>
        <td><strong>video</strong></td>
        <td>video/mpeg</td>
        <td>Video-файл в формате mpeg</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>video/webm</td>
        <td>Video-файл в формате webm</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>video/3gpp</td>
        <td>Video-файл в формате 3gpp</td>
    </tr>
    <tr>
        <td><strong>aplication</strong></td>
        <td>application/x-www-form-urlencoded</td>
        <td>Закодированные данные</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>application/zip</td>
        <td>Архив zip</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>application/javascript</td>
        <td>JavaScript</td>
    </tr>
    <tr>
        <td><strong></strong></td>
        <td>application/xml</td>
        <td>XML</td>
    </tr>
    </tbody>
</table>
<p>Обычно сервер знает, какие данные он отдает. Но если ты самостоятельно генерируешь ответ сервера своим кодом, то тебе нужно указать тип ответа (Content-Type) твоего сервера.</p>
<h2>6.4 Content-Length</h2>
<p>Этот заголовок задает <strong>длину ответа сервера</strong>. Если по-простому, то размер отдаваемого файла. Вручную этот параметр устанавливать не нужно. Хотя бывает полезно посмотреть на то, что отдал сервер, если по каким-то причинам ответ пришел не весь.</p>
<h2>6.5 Accept-Encoding</h2>
<p>С помощью этого заголовка клиент может указать серверу, что он поддерживает различные <strong>алгоритмы сжатия контента</strong>. Таким образом сервер может сначала заархивировать контент, например, zip-архивом, затем переслать его клиенту и клиент сможет правильно восстановить оригинальный контент.</p>
<p>Преимущество архивации состоит в том, что чем меньше файл, тем быстрее передается. Минусы архивации – дополнительная нагрузка на клиент и на сервер. Архивация имеет смысл при передаче больших файлов и часто не имеет смысла при передаче маленьких.</p>
<p>Пример такого заголовка:</p>
 <div class="lesson-example lesson-example--center">
    <pre class="lecture-code lecture-code--present language-java"><code>
        Accept-Encoding: <span class="text-green">deflate</span>, <span class="text-user">gzip</span>;<span class="text-red">q</span>=1.0, *;<span class="text-red">q</span>=0.5
        </code></pre>
</div>
<p>Где <code class="text-green">deflate</code> и <code class="text-user">gzip</code> – это поддерживаемые алгоритмы сжатия данных, а <code class="text-red">q</code> обозначает степень сжатия.</p>