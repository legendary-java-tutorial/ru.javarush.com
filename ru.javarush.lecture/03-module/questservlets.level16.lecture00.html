Паттерны проектирования
<p>----------------------------------------</p>
Знакомство с паттернами
Список паттернов
Схема паттернов
<p>----------------------------------------</p>
<h2>1.1 Знакомство с паттернами</h2>
<p>Как уже упоминалось ранее, программист начинает работу над программой с проектирования ее модели: составления списка сущностей, которыми будет оперировать программа. И чем больше в программе сущностей, тем сложнее программа.</p>
<p>Поэтому чтобы снизить сложность программы, взаимодействия объектов стараются стандартизировать. И в этом программисту очень сильно помогают <strong>шаблоны проектирования</strong> или <strong>паттерны</strong> проектирования. От английского design <strong>pattern</strong>.</p>
<p><strong>Важно!</strong> В русском языке под словом дизайн обычно подразумевают графический дизайн, в английском это не так. Английское слово design по смыслу ближе к к слову “проектирование” и/или “устройство”. Например, дизайн двигателя — это не его внешний вид, а его внутреннее устройство.</p>
<p>Поэтому design pattern – это именно паттерн/шаблон проектирования. Рекомендую вообще перестать употреблять слово дизайн в смысле “внешний вид”. Ты – будущий Software Engineer, и для тебя дизайн – это именно проектирование.</p>
<p>Так что же такое этот design pattern? В первую очередь паттерн проектирования – это <strong>стандартное решение стандартной проблемы</strong>. Хорошее, эффективное и проверенное временем решение.</p>
<p>Допустим, тебе задали спроектировать велосипед, ты можешь сделать ему два колеса, три или даже пять. Так кстати на заре проектирования и было. Но проверенный временем подход – два колеса. А ведь к нынешнему очевидному подходу шли через боль и ошибки:</p>
<img data-max-width="800" data-id="5d016cef-bd5d-42a7-8874-07e416f7f55f" src="https://cdn.javarush.com/images/article/5d016cef-bd5d-42a7-8874-07e416f7f55f/800.jpeg" alt="">
<p>Обычно шаблон не является законченным решением, который может быть прямо преобразован в код, это лишь пример хорошего решения задачи, который можно использовать в различных ситуациях.</p>
<p>Объектно-ориентированные шаблоны <strong>показывают отношения и взаимодействия между классами или объектами</strong>, без определения того, какие конечные классы или объекты приложения будут использоваться.</p>
<h2>1.2 История появления паттернов проектирования</h2>
<p>Еще в 70-е годы программисты столкнулись с необходимостью разрабатывать большие программы, над которыми должны были трудиться целые команды разработчиков. Были испробованы различные методы организации работы, но сильнее всего на разработку повлияла строительная сфера.</p>
<p>Для организации работы большой группы людей использовали практики и подходы из сферы строительства. Кстати, именно оттуда в программирование пришли такие термины как сборка (build), Software Developer (строитель), и понятие архитектуры.</p>
<p>И как ты уже догадываешься, идею design pattern тоже почерпнули из сферы строительства. Концепцию паттернов впервые описал Кристофер Александер в книге “Язык шаблонов. Города. Здания. Строительство”. В этой книге для описания процессов проектирования городов был использован специальный язык – паттерны.</p>
<p>Паттерны в строительстве описывали типичные проверенные временем решения: какой высоты сделать окна, сколько этажей должно быть в здании, сколько площади в микрорайоне отвести под деревья и газоны.</p>
<p>Поэтому ничего удивительного, что в 1994 году вышла книга “Приемы объектно-ориентированного проектирования. Паттерны проектирования”, в которую вошли 23 паттерна, решающие различные проблемы объектно-ориентированного дизайна.</p>
<p>Книгу написали 4 автора: Эрих Гамма, Ричард Хелм, Ральф Джонсон и Джон Влиссидес. Название книги было слишком длинным, чтобы кто-то смог его запомнить. Поэтому вскоре все стали называть её “book by the gang of four”, то есть <strong>“книга от банды четырех”</strong>, а затем и вовсе “GoF book”.</p>
<p>И с тех пор были открыты еще другие паттерны проектирования. “Паттерновый” подход стал популярен во всех областях программирования, поэтому сейчас можно встретить всевозможные паттерны и за пределами объектного проектирования.</p>
<p><strong>Важно!</strong> Паттерны — это не какие-то супер-оригинальные решения, а наоборот, часто встречающиеся, типовые решения одной и той же проблемы. Хорошие проверенные временем решения.</p>
<h2>1.3 Список паттернов</h2>
<p>Многие программисты за всю жизнь не изучили ни одного паттерна, что, впрочем, не мешает им их применять. Как мы уже говорили раньше, паттерны – это хорошие проверенные временем решения и, если программист не дурак, то с опытом сам находит такие решения.</p>
<p>Но зачем через десятки проб и ошибок приходить к оптимальным решениям, когда есть люди, которые уже прошли этот путь и написали книги с квинтэссенцией полученного опыта и жизненной мудрости?</p>
<p>Можно забить гвоздь гаечным ключом, но зачем? Можно даже и дрелью, если сильно постараться. Но хорошее осознанное владение инструментом как раз и отличает профессионала от любителя. И профессионал знает, что главная фишка дрели совсем не в этом. Итак, зачем же знать паттерны?</p>
<ul>
    <li>Проверенные решения. Ты тратишь меньше времени, используя готовые решения, вместо повторного изобретения велосипеда. До некоторых решений ты смог бы додуматься и сам, но многие могут быть для тебя открытием.</li>
    <li>Стандартизация кода. Ты делаешь меньше просчетов при проектировании, используя типовые унифицированные решения, так как все скрытые проблемы в них уже давно найдены.</li>
    <li>Общий программистский словарь. Ты произносишь название паттерна вместо того, чтобы час объяснять другим программистам, какой крутой дизайн ты придумал и какие классы для этого нужны.</li>
</ul>
<h3>Какие бывают паттерны?</h3>
<p>Паттерны отличаются по уровню сложности, детализации и охвата проектируемой системы. Проводя аналогию со строительством, ты можешь повысить безопасность перекрестка, поставив светофор, а можешь заменить перекресток целой автомобильной развязкой с подземными переходами.</p>
<p>Самые низкоуровневые и простые паттерны — идиомы. Они не универсальны, поскольку применимы только в рамках одного языка программирования.</p>
<p>Самые универсальные — архитектурные паттерны, которые можно реализовать практически на любом языке. Они нужны для проектирования всей программы, а не отдельных ее элементов.</p>
<p>Но главное – паттерны отличаются назначением. Паттерны, с которыми мы познакомимся, можно разбить на три основные группы:</p>
<ul>
    <li><strong>Порождающие паттерны</strong> заботятся о гибком создании объектов без внесения в программу лишних зависимостей.</li>
    <li><strong>Структурные паттерны</strong> показывают различные способы построения связей между объектами.</li>
    <li><strong>Поведенческие паттерны</strong> заботятся об эффективной коммуникации между объектами.</li>
</ul>
<h2>1.4 Знакомство с UML</h2>
<p>Начнем с рассмотрения тех самых 23 паттернов, которые были описаны в книге банды четырех. И сами паттерны, и их названия – это знакомые вещи даже для начинающего программиста. Я тебя с ними познакомлю, но настоятельно рекомендую прочитать ту самую книгу про паттерны.</p>
<p>Паттерны проектирования не привязаны к конкретному языку программирования, так что для их описания обычно используется язык UML. Он был очень популярен лет 20 назад, но и сейчас им иногда пользуются. И кстати, описание паттернов – это как раз то место, где использование UML – стандарт.</p>
<p>С помощью UML ты можешь описать отношения между различными сущностями. В нашем случае – это объекты и классы.</p>
<p>Отношения между классами описываются четырьмя типами стрелочек:</p>
<table>
    <tbody>
    <tr>
        <th  width="200"></th>
        <th></th>
    </tr>
    <tr>
        <td><img data-max-width="256" data-id="44c7f5c6-dfbe-4e88-932c-4e2cac65f11b" src="https://cdn.javarush.com/images/article/44c7f5c6-dfbe-4e88-932c-4e2cac65f11b/256.jpeg" alt=""></td>
        <td><strong>композиция (composition)</strong> — подвид агрегации, в которой “части” не могут существовать отдельно от “целого”.</td>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><img data-max-width="256" data-id="eb023a81-2235-42ed-933d-924a939b754f" src="https://cdn.javarush.com/images/article/eb023a81-2235-42ed-933d-924a939b754f/256.jpeg" alt=""></td>
        <td><strong>агрегация (aggregation)</strong> — описывает связь “часть”–”целое”, в котором “часть” может существовать отдельно от “целого”. Ромб указывается со стороны “целого”.</td>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><img data-max-width="256" data-id="90c1a1ca-7e72-4b02-bdb3-56ab481e1262" src="https://cdn.javarush.com/images/article/90c1a1ca-7e72-4b02-bdb3-56ab481e1262/256.jpeg" alt=""></td>
        <td><strong>зависимость (dependency)</strong> — изменение в одной сущности (независимой) может влиять на состояние или поведение другой сущности (зависимой). Со стороны стрелки указывается независимая сущность.</td>
    </tr>
<tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><img data-max-width="256" data-id="93837811-6d75-4992-ae1c-608677eb7114" src="https://cdn.javarush.com/images/article/93837811-6d75-4992-ae1c-608677eb7114/256.jpeg" alt=""></td>
        <td><strong>обобщение (generalization)</strong> — отношение наследования или реализации интерфейса. Со стороны стрелки находится суперкласс или интерфейс.</td>
    </tr>

    </tbody>
</table>
<p>На самом деле тут все очень просто. Последняя стрелочка фактически обозначает, что один класс наследуется от другого класса. А первая и вторая стрелочки – это то, что один объект хранит ссылку на второй объект. И это все.</p>
<p>Если ромбик у ссылки черный, то ссылка слабая: объекты могут существовать друг без друга. Если ромбик белый, то объекты связаны сильно, как, например, класс <code>HttpRequest</code> и его дочерний класс <code>HttpRequest.Builder</code>.</p>
<h2>1.5 Список паттернов</h2>
<p>Виды паттернов будем обозначать разными цветами и буквами:</p>
<p><mark class="green">B</mark> — поведенческие (behavioral);</p>
<p><mark class="user">C</mark> — порождающие (creational);</p>
<p><mark class="orange">S</mark> — структурные (structural).</p>
<p>И наконец список из 23-х паттернов проектирования:</p>
<table>
    <tbody>
    <tr>
        <td><p><mark class="user">C</mark> — Абстрактная фабрика</p>
<p><mark class="orange">S</mark> — Адаптер</p>
<p><mark class="orange">S</mark> — Мост</p>
<p><mark class="user">C</mark> — Строитель</p>
<p><mark class="green">B</mark> — Цепочка обязанностей</p>
<p><mark class="green">B</mark> — Команда</p>
<p><mark class="orange">S</mark> — Компоновщик</p>
<p><mark class="orange">S</mark> — Декоратор</p></td>
        <td><p><mark class="orange">S</mark> — Фасад</p>
<p><mark class="user">C</mark> — Фабричный метод</p>
<p><mark class="orange">S</mark> — Приспособленец</p>
<p><mark class="green">B</mark> — Интерпретатор</p>
<p><mark class="green">B</mark> — Итератор</p>
<p><mark class="green">B</mark> — Посредник</p>
<p><mark class="green">B</mark> — Хранитель</p>
<p><mark class="user">C</mark> — Прототип</p>
</td>
        <td><p><mark class="orange">S</mark> — Прокси</p>
<p><mark class="green">B</mark> — Наблюдатель</p>
<p><mark class="user">C</mark> — Одиночка</p>
<p><mark class="green">B</mark> — Состояние</p>
<p><mark class="green">B</mark> — Стратегия</p>
<p><mark class="green">B</mark> — Шаблонный метод</p>
<p><mark class="green">B</mark> — Посетитель</p></td>
    </tr>

    </tbody>
</table>
