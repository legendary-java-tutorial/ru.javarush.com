Проект по теме: фронтенд
<p>----------------------------------------</p>
Проект по теме: фронтенд
<p>----------------------------------------</p>
<h2>Задание: Нужно сделать UI для CRUD бэкенда, используя HTML, CSS, JS, jQuery. Делать будем админ-панель для управления аккаунтами онлайн-игры. </h2>
<p></p>
<ol>
    <li>Сделать fork из репозитория: <a href="https://github.com/vasylmalik/project-front.git" target="_blank">https://github.com/vasylmalik/project-front.git</a> </li>
    <li>Скачать свою версию проекта к себе на компьютер. </li>
    <li>Скачать себе Tomcat: <a href="https://tomcat.apache.org/download-90.cgi" target="_blank">https://tomcat.apache.org/download-90.cgi</a>. <mark class="red">Важно</mark>: Tomcat нужен именно <strong>версии 9</strong>, а не 10. </li>
    <li>Настроить запуск приложения через Идею: Alt + Shift + F9 -> Edit Configurations… -> Alt + insert -> tom (в строку поиска) -> Local.  </li>
<img data-max-width="800" data-id="266d093e-dbf4-427b-83ea-73cd094a00cc" src="https://cdn.javarush.com/images/article/266d093e-dbf4-427b-83ea-73cd094a00cc/800.jpeg" alt="">
    <ul>
        <li>После этого нужно нажать <code>CONFIGURE</code> и указать, куда скачан и распакован архив с Tomcat.</li>
<img data-max-width="1024" data-id="e433ead9-994c-46a7-aded-72b185d8c650" src="https://cdn.javarush.com/images/article/e433ead9-994c-46a7-aded-72b185d8c650/1024.jpeg" alt="">
        <li>Во вкладке <code>Deployment</code>: Alt + insert -> Artifact… -> rpg:war exploded -> OK.</li>
        <li>В поле <code>Application context</code>: оставить только <code>/</code> (слеш).</li>
<img data-max-width="800" data-id="8a412297-fa55-4dc2-9529-008a7bf5a329" src="https://cdn.javarush.com/images/article/8a412297-fa55-4dc2-9529-008a7bf5a329/800.jpeg" alt="">
        <li>Нажать <code>APPLY</code>.</li>
        <li>Закрыть окно настройки.</li>
    </ul>
    <li>Запустить приложение. Для этого: Alt + Shift + F9 -> (имя конфигурации, я назвал 'App" у себя) -> Run.</li>
    <li>После деплоя приложения откроется новая вкладка в выбранном при конфигурации браузере. Отлично, сервер настроен, дальше нужно работать с двумя файлами:</li>
        <ul>
            <li><code>&lt;project_dir&gt;/src/main/webapp/html/my.html</code> – здесь будет разметка и скрипты.</li>
            <li><code>&lt;project_dir&gt;/src/main/webapp/css/my.css</code> – здесь будет стили. Все что касается стилей – на твое усмотрение, никаких требований к ним нет.</li>
            <li></li>
        </ul>
    <li>В разметку (<strong>my.html</strong>) добавить таблицу (не забудь ей указать id), в которой указать названия колонок:</li>
        <ul>
            <li>#</li>
            <li>Name</li>
            <li>Title</li>
            <li>Race</li>
            <li>Profession</li>
            <li>Level</li>
            <li>Birthday</li>
            <li>Banned</li>
        </ul>
    <li>Добавить парный тег <code>&lt;script&gt;</code> – здесь будем писать функции.</li>
    <li>Первая функция должна отправлять GET запрос на URL <code>"/rest/players"</code> – получить список. Результат нужно добавить к таблице из п.7 (вот и пригодился id таблицы). Если все сделал правильно – после перезапуска сервера у тебя на странице будет отображаться таблица на 4 строки. В первой строке – имена колонок, в остальных – данные, которые пришли с сервера.</li>
    <img data-max-width="512" data-id="148609c9-9983-46e0-abc5-e70142150a05" src="https://cdn.javarush.com/images/article/148609c9-9983-46e0-abc5-e70142150a05/512.jpeg" alt="">
    <li>Теперь, желательно, добавить таблице границы ячеек, а то информация вообще нечитаемая.</li>
    <img data-max-width="512" data-id="2650ea8c-8a68-4b84-8a48-70ae355c86f3" src="https://cdn.javarush.com/images/article/2650ea8c-8a68-4b84-8a48-70ae355c86f3/512.jpeg" alt="">
    <li>Теперь займемся пейджингом. Для этого нужно:</li>
        <ul>
            <li>Под таблицей добавить секцию, например, <code>&lt;div&gt;</code>, в которой будут кнопки пейджинга.</li>
            <li>Добавить функцию, которая отправит GET запрос на сервер, который возвращает общее количество аккаунтов на сервере. URL: <code>"/rest/players/count"</code>.</li>
            <li>Добавить выпадающий список на 3-4 числовых значения, сколько показывать аккаунтов за раз. Числа должны быть в диапазоне от 3 до 20 включительно.</li>
            <li>В методе отображения списка аккаунтов (п.9) добавим расчет количества страниц, которые нужны при заданном количестве аккаунтов на страницу, чтоб можно было просмотреть все аккаунты.</li>
        </ul>
<img data-max-width="512" data-id="482bc5d3-e18b-4703-817a-f07edbf0269a" src="https://cdn.javarush.com/images/article/482bc5d3-e18b-4703-817a-f07edbf0269a/512.jpeg" alt="">
    <li>В функцию показа списка аккаунтов добавь параметр, который будет отвечать за номер страницы, которую показывать. Откорректируй URL, чтоб он параметрами запроса передавал <strong>"pageNumber"</strong> и <strong>"pageSize"</strong>. Теперь при смене количества на страницу в выпадающем списке, должно показываться запрошенное количество аккаунтов:</li>
<img data-max-width="512" data-id="58e08614-c31f-4285-9f6d-ea1d03a0519a" src="https://cdn.javarush.com/images/article/58e08614-c31f-4285-9f6d-ea1d03a0519a/512.jpeg" alt="">
    <li>Теперь давай подкрасим номер текущей страницы, а то неудобно…</li>
<img data-max-width="512" data-id="8a2f4a1a-a9c2-4706-b56e-b67ab9c71765" src="https://cdn.javarush.com/images/article/8a2f4a1a-a9c2-4706-b56e-b67ab9c71765/512.jpeg" alt="">
    <li>Добавим в таблицу еще 2 колонки: Edit и Delete. Для каждой строки давай добавим иконки, которые будут отвечать за редактирование и удаление каждой записи. Можешь использовать либо картинки, которые есть в <code>&lt;project_dir&gt;/src/main/webapp/img/</code>, либо используй свои.</li>
<img data-max-width="512" data-id="04321419-21dd-41f3-ba35-cb31731ee8b1" src="https://cdn.javarush.com/images/article/04321419-21dd-41f3-ba35-cb31731ee8b1/512.jpeg" alt="">
    <li>Напиши функцию, которая будет отвечать за удаление аккаунта. Для этого нужно отправлять DELETE запрос на сервер на URL <code>"/rest/players/{id}"</code>. При клике на картинку корзины – вызывай эту функцию. После вызова – не забудь обновлять список аккаунтов на текущей странице.</li>
        <ul>
            <li>До удаления аккаунта с <strong>id=23</strong></li>
           <img data-max-width="512" data-id="6abc6175-3c9c-48c1-9b50-1fd5cd7416bc" src="https://cdn.javarush.com/images/article/6abc6175-3c9c-48c1-9b50-1fd5cd7416bc/512.jpeg" alt=""> 
           <li>После удаления аккаунта с <strong>id=23</strong>. Обрати внимание, никаких кнопок, кроме корзины, не нажималось.</li>
           <img data-max-width="512" data-id="d8467d74-fdc3-4037-8c0a-e9aa551ca52b" src="https://cdn.javarush.com/images/article/d8467d74-fdc3-4037-8c0a-e9aa551ca52b/512.jpeg" alt="">
        </ul>
    <li>Теперь напиши функцию, которая отвечает за редактирование аккаунта. При клике на нее давай скроем кнопку “Delete”, а картинку кнопки “Edit” поменяем на “Save”.</li>
    <img data-max-width="512" data-id="df87c554-2a36-45fd-b06e-1c2e6bce1fc9" src="https://cdn.javarush.com/images/article/df87c554-2a36-45fd-b06e-1c2e6bce1fc9/512.jpeg" alt="">
    <li>Теперь добавим функционал для редактирования аккаунта. По клику на кнопку “Edit”, кроме смены картинки, нужно делать поля редактируемыми:</li>
        <ul>
            <li>Name</li>
            <li>Title</li>
            <li>Race</li>
            <li>Profession</li>
            <li>Banned</li>
        </ul>
    <p>Обрати внимание, что значение в полях для редактирования должны быть те, что есть в аккаунте.</p>
    <img data-max-width="512" data-id="ad3b0321-07ba-44ec-bddf-b4a663620053" src="https://cdn.javarush.com/images/article/ad3b0321-07ba-44ec-bddf-b4a663620053/512.jpeg" alt="">
    <li>Теперь сделаем отправку изменений по клику на кнопку “Save”. Для этого нужно отправить POST запрос на URL <code>“/rest/players/{id}”</code> и в качестве тела запроса передать значения всех пяти полей, которые можно изменять в виде JSON. Используй <strong>JSON.stringify({…});</strong> После изменения, не забудь перезагрузить данные на текущей странице.</li>
    <img data-max-width="512" data-id="90232e40-2ee4-493b-8ff4-d4e91805f2af" src="https://cdn.javarush.com/images/article/90232e40-2ee4-493b-8ff4-d4e91805f2af/512.jpeg" alt="">
    <img data-max-width="512" data-id="5c5675c0-999a-48b2-8e5d-4e6714490d29" src="https://cdn.javarush.com/images/article/5c5675c0-999a-48b2-8e5d-4e6714490d29/512.jpeg" alt="">
    <li>Итак, из CRUD на данный момент должно быть сделано все, кроме “C” (Create). После кнопок пейджинга, добавь горизонтальную линию и текст о том, что здесь можно создать новый аккаунт. Кроме этого, добавь блоки текста и поля для ввода для параметров аккаунта:</li>
        <ul>
            <li>Name – текст, от 1 до 12 символов.</li>
            <li>Title – текст, от 1 до 30 символов.</li>
            <li>Race – выпадающий список, допустимые значения смотри в API.</li>
            <li>Profession – выпадающий список, допустимые значения смотри в API.</li>
            <li>Level – число от 0 до 100.</li>
            <li>Birthday – дата (&lt;input type="date" …).</li>
            <li>Banned – булевое значение.</li>
        </ul>
        <img data-max-width="512" data-id="9892f0ac-07a5-4bd5-8a0d-fa5266869ae0" src="https://cdn.javarush.com/images/article/9892f0ac-07a5-4bd5-8a0d-fa5266869ae0/512.jpeg" alt="">
    <li>Теперь добавь кнопку, по клику на которую все введенные данные будут отправляться на сервер. Используй POST запрос на URL <code>/rest/players</code>. После ответа сервера, не забудь очистить поля для ввода данных и перезапросить список аккаунтов на текущей странице.</li>
    <img data-max-width="512" data-id="a106775d-0e9d-4632-91a5-2dcbb80323ed" src="https://cdn.javarush.com/images/article/a106775d-0e9d-4632-91a5-2dcbb80323ed/512.jpeg" alt="">
    <img data-max-width="512" data-id="ac63e2ad-d185-4526-97dc-fd4b9901c0ee" src="https://cdn.javarush.com/images/article/ac63e2ad-d185-4526-97dc-fd4b9901c0ee/512.jpeg" alt="">
    <li>Теперь можно добавить "красоты" через стили – здесь все на твое усмотрение. У меня вышло так:</li>
    <img data-max-width="512" data-id="5ff75c73-c890-4130-bd4c-83e4a4426bf2" src="https://cdn.javarush.com/images/article/5ff75c73-c890-4130-bd4c-83e4a4426bf2/512.jpeg" alt="">
</ol>
<br>
<h2>Полезное: API сервера:</h2>
<h3><center>Get players list</center></h3>
<table>
    <tbody>
    <tr>
        <td><strong>URL</strong></td>
        <td>/rest/players</td>
    </tr>
        <tr>
        <td><strong>Method</strong></td>
        <td>Optional: Integer pageNumber, Integer pageSize
</td>
    </tr>
        <tr>
        <td><strong>Data Params</strong></td>
        <td>None</td>
    </tr>
        <tr>
        <td><strong>Success Response</strong></td>
        <td>
<pre class='language-java line-numbers'><code>
Code: 200 OK
Code: 200 OK
Content: [
 {
  “id”:[Long],
  “name”:[String],
  “title”:[String],
  “race”:[Race],
  “profession”:[Profession],
  “birthday”:[Long],
  “banned”:[Boolean],
  “level”:[Integer]
 },
 …
]
</code></pre>
        </td>
    </tr>
        <tr>
        <td><strong>Notes</strong></td>
        <td>
           <p><strong>pageNumber</strong> – параметр, который отвечает за номер отображаемой страницы при использовании пейджинга. Нумерация начинается с нуля.</p>  
           <p><strong>pageSize</strong> – параметр, который отвечает за количество результатов на одной странице при пейджинге</p>  
<pre class='language-java line-numbers'><code>
public enum Race {
    HUMAN,
    DWARF,
    ELF,
    GIANT,
    ORC,
    TROLL,
    HOBBIT
}

public enum Profession {
    WARRIOR,
    ROGUE,
    SORCERER,
    CLERIC,
    PALADIN,
    NAZGUL,
    WARLOCK,
    DRUID
}

</code></pre>
        </td>
    </tbody>
</table>
<p></p>
<center><h3>Get players count</h3></center>
<table>
    <tbody>
    <tr>
        <td><strong>URL</strong></td>
        <td>/rest/players/count</td>
    </tr>
    <tr>
        <td><strong>Method</strong></td>
        <td>GET</td>
    </tr>
    <tr>
        <td><strong>URL Params</strong></td>
        <td>None</td>
    </tr>
    <tr>
        <td><strong>Data Params</strong></td>
        <td>None</td>
    </tr>
    <tr>
        <td><strong>Success Response</strong></td>
        <td><p><strong>Code</strong>: 200 OK</p><p><strong>Content</strong>: Integer</p></td>
    </tr>
    <tr>
        <td><strong>Notes</strong></td>
        <td> </td>
    </tr>
    </tbody>
</table>
<p></p>
<center><h3>Delete player</h3></center>
<table>
    <tbody>
    <tr>
        <td><strong>URL</strong></td>
        <td>/rest/players/{id}</td>
    </tr>
    <tr>
        <td><strong>Method</strong></td>
        <td>DELETE</td>
    </tr>
    <tr>
        <td><strong>URL Params</strong></td>
        <td>id</td>
    </tr>
    <tr>
        <td><strong>Data Params</strong></td>
        <td>None</td>
    </tr>
    <tr>
        <td><strong>Success Response</strong></td>
        <td><strong>Code</strong>: 200 OK</td>
    </tr>
    <tr>
        <td><strong>Notes</strong></td>
        <td>
            <p>Если игрок не найден - ответ ошибкой с кодом 404.</p>
            <p>Если значение id не валидное-  ответ ошибкой с кодом 400.</p>    
        </td>
    </tr>
    </tbody>
</table>
<p></p>
<center><h3>Update player</h3></center>
<table>
    <tbody>
    <tr>
        <td><strong>URL</strong></td>
        <td>/rest/players/{id}</td>
    </tr>
    <tr>
        <td><strong>Method</strong></td>
        <td>POST</td>
    </tr>
    <tr>
        <td><strong>URL Params</strong></td>
        <td>id</td>
    </tr>
    <tr>
        <td><strong>Data Params</strong></td>
        <td>
<pre class='language-java line-numbers'><code>
{
  “name”:[String],       --optional
  “title”:[String],     --optional
  “race”:[Race], --optional
  “profession”:[Profession], --optional
  “banned”:[Boolean]    --optional
}
</code></pre></td>
    </tr>
    <tr>
        <td><strong>Success Response</strong></td>
        <td><pre class='language-java line-numbers'><code>
Code: 200 OK
Content: {
  “id”:[Long],
  “name”:[String],
  “title”:[String],
  “race”:[Race],
  “profession”:[Profession],
  “birthday”:[Long],
  “banned”:[Boolean],
  “level”:[Integer]
 }

</code></pre></td>
    </tr>
    <tr>
        <td><strong>Notes</strong></td>
        <td><p>Обновляются только те поля, которые не null.</p>
<p>Если игрок не найден в БД - ответ ошибкой с кодом 404.</p>
<p>Если значение id не валидное - ответ ошибкой с кодом 400.</p>
</td>
    </tr>
    </tbody>
</table>
<p></p>
<center><h3>Create player</h3></center>
<table>
    <tbody>
    <tr>
        <td><strong>URL</strong></td>
        <td>/rest/players</td>
    </tr>
    <tr>
        <td><strong>Method</strong></td>
        <td>POST</td>
    </tr>
    <tr>
        <td><strong>URL Params</strong></td>
        <td>None</td>
    </tr>
    <tr>
        <td><strong>Data Params</strong></td>
        <td><pre class='language-java line-numbers'><code>
{
  “name”:[String],
  “title”:[String],
  “race”:[Race],
  “profession”:[Profession],
  “birthday”:[Long],
  “banned”:[Boolean], --optional, default=false 
  “level”:[Integer]
}

</code></pre></td>
    </tr>
    <tr>
        <td><strong>Success Response</strong></td>
        <td><pre class='language-java line-numbers'><code>
Code: 200 OK
Content: {
  “id”:[Long],
  “name”:[String],
  “title”:[String],
  “race”:[Race],
  “profession”:[Profession],
  “birthday”:[Long],
  “banned”:[Boolean],
  “level”:[Integer]
 },

</code></pre></td>
    </tr>
    <tr>
        <td><strong>Notes</strong></td>
        <td><p>Мы не можем создать игрока, если:<p>
            <ul>
                <li>указаны не все параметры из Data Params (кроме banned);</li>
                <li>длина значения параметра “name” или “title” превышает размер соответствующего поля (12 и 30 символов);</li>
                <li>значение параметра “name” пустая строка;</li>
                <li>уровень находится вне заданных пределов (от 0 до 100);</li>
                <li>“birthday”:[Long] &lt; 0;</li>
                <li>дата регистрации находятся вне заданных пределов.</li>
                <li></li>
            </ul>
            <p>В случае всего вышеперечисленного - ответ ошибкой с кодом 400.</p>

</td>
    </tr>

    </tbody>
</table>
<hr>
<p><a href="https://youtu.be/BqpeyLVm2CA" target="_blank">Разбор проекта</a>. <strong>Смотреть после выполнения!</strong></p>