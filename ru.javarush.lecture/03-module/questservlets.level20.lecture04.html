Класс CollectionUtils из Apache Commons
<p>----------------------------------------</p>
Знакомство с CollectionUtils
Куча способов проверить пустая ли коллекция
Операции над множествами
Операции над множествами, большой пример
Класс UnmodifiableCollection
<p>----------------------------------------</p>
    <h2>Знакомство с CollectionUtils</h2>

    <p>Еще один универсальный утилитный класс, который содержит много полезных методов:</p>

    <table>
        <tbody>
            <tr>
                <td width="700"><span class="code text-orange">addAll(Collection&lt;C> collection, C... elements)</span></td>
                <td>Добавляет все элементы массива C в коллекцию</td>
            </tr>
            <tr>
                <td><span class="code text-orange">addIgnoreNull(Collection&lt;T> collection, T object)</span></td>
                <td>Добавляет элемент, если он не null</td>
            </tr>
            <tr>
                <td><span class="code text-orange">containsAll(Collection&lt;?> coll1, Collection&lt;?> coll2)</span></td>
                <td>Проверяет, что коллекция1 содержит все элементы коллекции2</td>
            </tr>
            <tr>
                <td><span class="code text-orange">containsAny(Collection&lt;?> coll1, Collection&lt;?> coll2)</span></td>
                <td>Проверяет, что коллекция1 содержит хотя бы один элемент из коллекции2</td>
            </tr>
            <tr>
                <td><span class="code text-orange">countMatches(Iterable&lt;C> input, Predicate&lt;? super C> predicate)</span></td>
                <td>Подсчитывает, сколько элементов коллекции удовлетворяют правило predicate</td>
            </tr>
            <tr>
                <td><span class="code text-orange">disjunction(Iterable&lt;? extends O> a, Iterable&lt;? extends O> b)</span></td>
                <td>Возвращает объекты, которые входят только в одну коллекцию, но не сразу в обе</td>
            </tr>
            <tr>
                <td><span class="code text-orange">intersection(Iterable&lt;? extends O> a, Iterable&lt;? extends O> b)</span></td>
                <td>Возвращает коллекцию объектов, которые входят сразу в обе коллекции</td>
            </tr>
            <tr>
                <td><span class="code text-orange">union(Iterable&lt;? extends O> a, Iterable&lt;? extends O> b)</span></td>
                <td>Возвращает коллекцию объектов, которые входят хотя бы в одну коллекцию</td>
            </tr>
            <tr>
                <td><span class="code text-orange">emptyCollection()</span></td>
                <td>Возвращает специальную пустую коллекцию</td>
            </tr>
            <tr>
                <td><span class="code text-orange">emptyIfNull(Collection&lt;T> collection)</span></td>
                <td>Возвращает пустую коллекцию, если collection == null</td>
            </tr>
            <tr>
                <td><span class="code text-orange">exists(Iterable&lt;C> input, Predicate&lt;? super C> predicate)</span></td>
                <td>Проверяет, что в коллекции существует элемент, удовлетворяющий правилу predicate</td>
            </tr>
            <tr>
                <td><span class="code text-orange">extractSingleton(Collection&lt;E> collection)</span></td>
                <td>Возвращает единственный элемент коллекции</td>
            </tr>
            <tr>
                <td><span class="code text-orange">filter(Iterable&lt;T> collection, Predicate&lt;? super T> predicate)</span></td>
                <td>Фильтрует элементы коллекции</td>
            </tr>
            <tr>
                <td><span class="code text-orange">find(Iterable&lt;T> collection, Predicate&lt;? super T> predicate)</span></td>
                <td>Ищет элементы коллекции</td>
            </tr>
            <tr>
                <td><span class="code text-orange">isEmpty(Collection&lt;?> coll)</span></td>
                <td>Проверяет, что коллекция пуста</td>
            </tr>
            <tr>
                <td><span class="code text-orange">isEqualCollection(Collection&lt;?> a, Collection&lt;?> b)</span></td>
                <td>Сравнивает коллекции</td>
            </tr>
            <tr>
                <td><span class="code text-orange">isFull(Collection&lt;? extends Object> coll)</span></td>
                <td>Проверяет, можно ли еще добавить элемент в коллекцию</td>
            </tr>
            <tr>
                <td><span class="code text-orange">isNotEmpty(Collection&lt;?> coll)</span></td>
                <td>Проверят, что коллекция не пуста</td>
            </tr>
            <tr>
                <td><span class="code text-orange">isSubCollection(Collection&lt;?> a, Collection&lt;?> b)</span></td>
                <td>Проверяет, что коллекция B входит в коллекцию A</td>
            </tr>
            <tr>
                <td><span class="code text-orange">matchesAll(Iterable&lt;C> input, Predicate&lt;? super C> predicate)</span></td>
                <td>Проверяет, что все элементы коллекции удовлетворяют правилу predicate</td>
            </tr>
            <tr>
                <td><span class="code text-orange">removeAll(Collection&lt;E> collection, Collection&lt;?> remove)</span></td>
                <td>Удаляет все элементы коллекции</td>
            </tr>
            <tr>
                <td><span class="code text-orange">retainAll(Collection&lt;C> collection, Collection&lt;?> retain)</span></td>
                <td>Возвращает коллекцию, содержащую все элементы collection, которые также содержатся в retain</td>
            </tr>
            <tr>
                <td><span class="code text-orange">reverseArray(Object[] array)</span></td>
                <td>Разворачивает массив задом на перед</td>
            </tr>
            <tr>
                <td><span class="code text-orange">unmodifiableCollection(Collection&lt;? extends C> collection)</span></td>
                <td>Возвращает обертку над коллекцией. Любая попытка модифицировать коллекцию кинет исключение.</td>
            </tr>
        </tbody>
    </table>

    <p>Рассмотрим некоторые методы.</p>

    <h2>Способы проверить пустая ли коллекция</h2>

    <p>Вот как просто определить, является ли коллекция пустой:</p>

    <pre class='language-java line-numbers'><code>
CollectionUtils.isEmpty(null); // true
CollectionUtils.isEmpty(new LinkedList&lt;>()); // true　　
CollectionUtils.isEmpty(Collections.singleton(new int[]{2, 1})); // false
</code></pre>

    <p>Так же легко проверить, что коллекция не пустая:</p>

    <pre class='language-java line-numbers'><code>
CollectionUtils.isNotEmpty(null); // false
CollectionUtils.isNotEmpty(new LinkedList&lt;>()); // false　　
CollectionUtils.isNotEmpty(Collections.singleton(new int[]{2, 1})); // true
</code></pre>

    <p>Примеры:</p>

    <pre class='language-java line-numbers'><code>
User ivan = new User("Ivan", "ivan@email.com");
User petr = new User("Petr", "petr@email.com");

List&lt;User> users = new ArrayList&lt;>();

System.out.println(CollectionUtils.isEmpty(users)); // true
System.out.println(CollectionUtils.isNotEmpty(users)); // false

users.add(ivan);
users.add(petr);

System.out.println(CollectionUtils.isEmpty(users)); // false
System.out.println(CollectionUtils.isNotEmpty(users)); // true

users = null;
System.out.println(CollectionUtils.isEmpty(users)); // true
System.out.println(CollectionUtils.isNotEmpty(users)); // false
</code></pre>

    <p><a href="https://www.baeldung.com/apache-commons-collection-utils" target="_blank">A Guide to Apache Commons Collections CollectionUtils</a></p>
  
    <h2>Операции над множествами</h2>

    <p>Если тебе приходилось сталкиваться с теорией множеств, то ты знаешь, что над множествами существуют 4 основные операции: объединение, пересечение, разность и дизъюнкция.</p>

<img data-max-width="800" data-id="33592357-0b07-4f2d-ac05-c336539da1cf" src="https://cdn.javarush.com/images/article/33592357-0b07-4f2d-ac05-c336539da1cf/800.jpeg" alt="">

    <p>Для этих операций у класса <span class="code"><span class="text-green">CollectionUtils<span class="code"><span class="text-green">
</span></span> есть 4 метода:

    <ul>
        <li><span class="code text-orange">union()</span></li>
        <li><span class="code text-orange">intersection()</span></li>
        <li><span class="code text-orange">disjunction()</span></li>
        <li><span class="code text-orange">subtract()</span></li>
    </ul>

    <p>Ниже будут несколько простых примеров:</p>

    <h3>Объединение</h3>

    <pre class='language-java line-numbers'><code>
List&lt;String> firstList = Arrays.asList("1", "2", "3", "4", "5", "6");
List&lt;String> secondList = Arrays.asList("2", "3", "6", "7", "8", "9");

//объединяем два множества
Collection&lt;String> result = CollectionUtils.union(firstList, secondList);
System.out.println(ArrayUtils.toString(result));     //[1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>

    <h3>Пересечение</h3>

    <pre class='language-java line-numbers'><code>
List&lt;String> firstList = Arrays.asList("A", "B", "C", "D", "E", "F");
List&lt;String> secondList = Arrays.asList("B", "D", "F", "G", "H", "K");

//пересечения двух множеств
Collection&lt;String> result = CollectionUtils.intersection(firstList, secondList);
System.out.println(ArrayUtils.toString(result));     //[B, D, F]
</code></pre>

    <h3>Дизъюнкция</h3>

    <pre class='language-java line-numbers'><code>
List&lt;String> firstList = Arrays.asList("1", "2", "3", "4", "5", "6");
List&lt;String> secondList = Arrays.asList("2", "3", "6", "7", "8", "9");

//дизъюнкция
Collection&lt;String> result = CollectionUtils.disjunction(firstList, secondList);
System.out.println(ArrayUtils.toString(result)); //[1, 4, 5, 7, 8, 9]
</code></pre>

    <h3>Разница (вычет)</h3>

    <pre class='language-java line-numbers'><code>
List&lt;String> firstList = Arrays.asList("1", "2", "3", "4", "5", "6");
List&lt;String> secondList = Arrays.asList("2", "3", "6", "7", "8", "9");

//разница
Collection&lt;String> result = CollectionUtils.subtract(firstList, secondList);
System.out.println(ArrayUtils.toString(result)); // [1, 4, 5]
</code></pre>

    <h2>Операции над множествами, продолжение</h2>

    <p>В этом примере показано, как использовать вышеупомянутые четыре метода для работы с двумя коллекциями:</p>

    <pre class='language-java line-numbers'><code>
List&lt;Integer> firstList = Arrays.asList(1, 2, 3, 3, 4, 5);
List&lt;Integer> secondList = Arrays.asList(3, 4, 4, 5, 6, 7);

Collection&lt;Integer> union = CollectionUtils.union(firstList, secondList); // Объединение
Collection&lt;Integer> intersection = CollectionUtils.intersection(firstList, secondList); // Пересечение
Collection&lt;Integer> disjunction = CollectionUtils.disjunction(firstList, secondList); // Дизъюнкция
Collection&lt;Integer> subtract = CollectionUtils.subtract(firstList, secondList); // Разница

System.out.println("firstList: " + ArrayUtils.toString(firstList.toArray()));
System.out.println("secondList: " + ArrayUtils.toString(secondList.toArray()));

System.out.println("Объединение: " + ArrayUtils.toString(union.toArray()));
System.out.println("Пересечение: " + ArrayUtils.toString(intersection.toArray()));
System.out.println("Дизъюнкция: " + ArrayUtils.toString(disjunction.toArray()));
System.out.println("Разница: " + ArrayUtils.toString(subtract.toArray()));
</code></pre>

    <p>Наш результат:</p>

    <pre><code>firstList: {1,2,3,3,4,5}
secondList: {3,4,4,5,6,7}
Объединение: {1,2,3,3,4,4,5,6,7}
Пересечение: {3,4,5}
Дизъюнкция: {1,2,3,4,6,7}
Разница: {1,2,3}
</code></pre>

    <p>Можешь самостоятельно поэкспериментировать с этими методами.</p>

    <h2>Метод unmodifiableCollection()</h2>

    <p>Иногда нам приходится реализовывать методы интерфейса, которые должны     возвращать коллекции внутренних данных наших объектов. А так как данные внутренние, мы не хотим, чтобы кто-то где-то их менял. </p>

    <p>Или мы получили где-то коллекцию, которую не нужно менять, но вынуждены передать ее в какой-то сторонний метод. Где гарантия, что он ее не поменяет?</p>

    <p>Для того, чтобы спать спокойно, коллекцию можно обернуть в специальный wrapper, который будет кидать исключение при попытке модифицировать коллекцию.</p>

    <p>Пример:</p>

    <pre class='language-java line-numbers'><code>
Collection&lt;String> firstCollection = new ArrayList&lt;String>();
Collection&lt;String> secondCollection = Collections.unmodifiableCollection(firstCollection);
firstCollection.add("hello");
firstCollection.add("from");
firstCollection.add("javaRush");

//secondCollection.add("have a error");
System.out.println(secondCollection); //[hello, from, javaRush]
</code></pre>

    <p>Метод <span class="code text-orange">Collections.unmodifiableCollection()</span> возвращает обертку над переданной ему коллекцией. Если вызывать у нее методы <span class="code text-orange">get()</span>, <span class="code text-orange">size()</span>, то все будет работать. Однако при вызове методов <span class="code text-orange">add()</span>, <span class="code text-orange">set()</span>, <span class="code text-orange">remove()</span> ты получишь исключение.</p>

    <pre><code>java.lang.UnsupportedOperationException
at org.apache.commons.collections.collection.UnmodifiableCollection.add(UnmodifiableCollection.java:75)
</code></pre>

    <p>На самом деле уже сейчас метод помечен как deprecated и вместо него рекомендуется использовать <span class="code text-orange">Collections.unmodifiableCollection(Collection&lt;? extends T> c)</span>.</p>

    <pre class='language-java line-numbers'><code>
Collection&lt;String> firstCollection = new ArrayList&lt;String>();
Collection&lt;String> secondCollection =
Collections.unmodifiableCollection(firstCollection);
</code></pre>