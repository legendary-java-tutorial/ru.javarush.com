Методы и классы final Java
<p>----------------------------------------</p>
Обозначая метод класса модификатором final, мы имеем ввиду, что ни один производный класс не в состоянии переопределить этот метод, изменив его внутреннюю реализацию. Другими словами, речь идет о финальной версии метода. Класс в целом также может быть помечен как final...
 
<p>----------------------------------------</p>
Обозначая метод класса модификатором <code><strong>final</strong></code>, мы имеем ввиду, что ни один производный класс не в состоянии переопределить этот метод, изменив его внутреннюю реализацию. Другими словами, речь идет о финальной версии метода. Класс в целом также может быть помечен как <code><strong>final</strong></code>.
<img data-id="ba738c64-b6ac-48c5-80b9-33190a1e90e7" data-max-width="850" alt="Методы и классы final Java - 1" src="https://cdn.javarush.com/images/article/ba738c64-b6ac-48c5-80b9-33190a1e90e7/1024.jpeg"><pre class='lang-java line-numbers'><code>
final class NoExtending {
// …
}
</code></pre>
Класс, помеченный как <code><strong>final</strong></code>, не поддается наследованию и все его методы косвенным образом приобретают свойство <code><strong>final</strong></code>.

Применение признак а <code><strong>final</strong></code> в объявлениях классов и методов способно повысить уровень безопасности кода. Если класс снабжен модификатором <code><strong>final</strong></code>, никто не в Состоянии расширить класс и, вероятно, нарушить при этом его контракт. Если признаком <code><strong>final</strong></code> обозначен метод, вы можете полностью доверять его внутренней реализации во всех ситуациях, не опасаясь "подделки". Уместно применить <code><strong>final</strong></code>, например, в объявлении метода, предусматривающего проверку пароля, вводимого пользователем, чтобы гарантировать точное Исполнение того, что методом предусмотрено изначально. Возможному злоумышленнику не удастся изменить исходную реализацию такого метода, "подсунув" программе его переопределенную версию, которая, скажем, всегда возвращает значение true, свидетельствующее об успешной регистрации пользователя, независимо от того, какой пароль он ввел на самом деле. Вы вправе, если позволяет конкретная ситуация, пойти дальше и объявить как <code><strong>final</strong></code> класс целиком; метод <code><strong>ValidatePassword</strong></code> приобретёт то же свойство косвенным путём.

Употребление модификатора <code><strong>final</strong></code> в объявлении метода или класса накладывает серьезные ограничения на возможность дальнейшего использования и развития кода. Применение <code><strong>final</strong></code> в объявлении метода – это верный показатель того, что реализация метода самодостаточна и полностью завершена. Другие программисты, которые захотят воспользоваться вашим классом, расширив его функции в угоду собственным потребностям, будут стеснены в выборе средств достижения цели либо полностью лишены таковых. Пометив признаком <code><strong>final</strong></code> класс в целом, вы запретите возможность его наследования и, вероятно, существенно снизите его практическую ценность для других. Собравшись применить модификатор <code><strong>final</strong></code>, убедитесь, готовы ли ВЫ к подобным жертвам и стоит ли их принести.

Во многих случаях для достижения достаточного уровня безопасности кода вовсе нет необходимости обозначать весь класс как <code><strong>final</strong></code> – вполне возможно сохранить способность класса к расширению, пометив модификатором <code><strong>final</strong></code> только его "критические" структурные элементы. В этом случае вы оставите в неприкосновенности основные функции класса и одновременно разрешите его наследование с добавлением новых членов, но без переопределения "старых". Разумеется, поля, к которым обращается код методов <code><strong>final</strong></code>, должны быть в свою очередь обозначены как <code><strong>final</strong></code> либо <code><strong>private</strong></code>, поскольку в противном случае любой производный класс получит возможность изменять их содержимое, воздействуя на поведение соответствующих методов.

Еще один эффект применения модификатора <code><strong>final</strong></code> связан с упрощением задачи оптимизации кода, решаемой компилятором. Вот что происходит, когда вызывается метод, не помеченный как <code><strong>final</strong></code>, исполняющая система определяет фактический класс объекта, связывает вызов с наиболее подходящим кодом из группы перегруженных методов и передает управление этому коду. Но если бы, например, метод <code><strong>getName</strong></code> в примере класса <code><strong>Attr</strong></code>, рассмотренном раньше, был обозначен как <code><strong>final</strong></code>, операция обращения к нему, возможно, была бы заметно упрощена. В самом тривиальном случае, подобном тому, который касается <code><strong>getName</strong></code>, компилятор может попросту заменить вызов метода кодом его тела. Такой механизм носит название встраивания кода (inlining). При использовании inline-версии метода <code><strong>getName</strong></code> два следующих выражения выполняются совершенно одинаково:

<pre class='lang-java line-numbers'><code>
system.out.println("id = " + rose.name);
system.out.println("id = " + rose.getName());
</code></pre>
Хотя приведенные выражения равнозначны, второе все-таки обладает преимуществом, поскольку метод <code><strong>getName</strong></code> позволяет придать полю name свойство "только для чтения", а коду класса – некую степень абстракции, которая обеспечивает возможность более свободного изменения реализации класса.

Та же схема оптимизации может быть применена компилятором и по отношению к методам <code><strong>private</strong></code> и <code><strong>statiс</strong></code>, так как и они не допускают переопределения.

Использование модификатора <code>final</code> в объявлениях классов способствует также повышению эффективности некоторых операций проверки типов. В этом случае многие подобные операции могут быть выполнены уже на стадии компиляции и поэтому потенциальные ошибки выявляются гораздо раньше. Если компилятор встречает в исходном тексте ссылку на класс <code><strong>final</strong></code>, он может быть "уверен", что соответствующий объект относится именно к тому типу, который указан. Компилятор в состоянии сразу определить место, занимаемое классом в общей иерархии классов, и проверить, верно тот используется или нет. Если модификатор <code><strong>final</strong></code> не применяется, соответствующие проверки осуществляются только на стадии выполнения программы.

<em>Упражнение</em> 3.4. Целесообразно ли включить в объявления методов (и если да, та каких именно) классов <strong>vehicle</strong> и passengervehicle модификатор <strong>final</strong>?

Ссылка на первоисточник: <a href='http://src-code.net/metody-i-klassy-final-java/' rel='nofollow' target='_blank'>http://src-code.net/metody-i-klassy-final-java</a>