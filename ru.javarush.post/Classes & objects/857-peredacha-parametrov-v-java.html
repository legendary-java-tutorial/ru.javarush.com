Передача параметров в Java
<p>----------------------------------------</p>
Переменная в Java — это контейнер, со значением в нем. Так что значит «передать» переменную? И какова разница между примитивными и ссылочными типами данных. Мы доберемся до этого позже. Давайте сначала начнем с простого присваивания. Что делает данный код ...

<p>----------------------------------------</p>
Переменная в Java — это контейнер, со значением в нем. Так что значит «передать» переменную? И какова разница между примитивными и ссылочными типами данных.
<div class="row justify-content-center jr-image-wrap"><div class="col-12 col-sm-10 col-md-8"><img data-id="20c8163b-fcb0-4d5f-bb63-f6a0c2e43aaf" data-max-width="710" alt="Передача параметров в Java - 1" src="https://cdn.javarush.com/images/article/20c8163b-fcb0-4d5f-bb63-f6a0c2e43aaf/1024.jpeg"></div></div>Мы доберемся до этого позже. Давайте сначала начнем с простого присваивания. Что делает данный код:

<pre class="lang-java line-numbers"><code>
int х = 3;
int у = х;
</code></pre>
В строке 1 создается переменная <strong>x</strong> типа int и ей присваивается значение 3.

В строке 2, создается переменная <strong>y</strong> типа int и ей присвается значение переменной <strong>x</strong>.

В дальнейшем переменная <strong>x</strong> никак не влияет на <strong>y</strong>. Java копирует значение <strong>х</strong> (3) и помещает эту копию в <strong>у</strong>.

Это передача параметра по значению. Вы не записываете одну переменную в другую. Значение копируется и присваивается новой переменной. 

Выражение <strong>у = х;</strong> НЕ означает "записать <strong>x</strong> в <strong>y</strong>". Оно означает "скопировать значение внутри <strong>х</strong> и записать эту копию в <strong>у</strong>".

Если позже я изменю <strong>y</strong>:
 
<pre class="lang-java line-numbers"><code>
у = 34;
</code></pre>
Повлияет ли это на <strong>x</strong>? Конечно нет. <strong>x</strong> по прежнему имеет значение 3.
 
Если позже я изменю <strong>х</strong>:
 
<pre class="lang-java line-numbers"><code>
х = 90;
</code></pre>
Как это отразится на <strong>y</strong>? Никак. Они никак не связаны после того, как было сделано присвоение (КОПИРОВАНИЕ значения).
 
<strong>А что насчет ссылочных типов? Как они работают?</strong>
 
Не так уж сложно, на самом деле это правило то же самое. Ссылки делают тоже самое - вы получаете копию ссылки.
 
Так что, если я говорю:
 
<pre class="lang-java line-numbers"><code>
Cat A = new Cat ();
Cat B = A;
</code></pre>
Ссылка <strong>А</strong> копируется в ссылку <strong>B</strong>. К объекту это не относится — у вас по прежнему всего один объект.
Но теперь у вас есть две различных ссылки, контролирующие один и тот же объект <strong>Cat</strong>.

<strong>Теперь давайте рассмотрим передачу параметров в методы.</strong>
 
<strong>Java передает параметры по значению. Всегда.</strong>
Это означает — "скопировать значение и передать копию."
 
Для примитивных типов это легко:
 
<pre class="lang-java line-numbers"><code>
int х = 5;
doStuff (х); / / Передать копию х (значение 5) в метод doStuff
</code></pre>
Метод <strong>doStuff</strong> выглядит следующим образом:
 
<pre class="lang-java line-numbers"><code>
void doStuff (int у) {
 
   / / Действия с 'y'
}
</code></pre>
Копия значения <strong>x</strong>, тоесть 5, передается в метод <strong>doStuff ()</strong>.
 
Метод <strong>doStuff ()</strong> имеет свою собственную переменную, которая называется <strong>y</strong>.
Переменная <strong>y</strong> — новая, другая переменная. С копией того, что было в <strong>х</strong> на момент передачи его в метод. С этого момента, <strong>у</strong> и <strong>х</strong> не влияют друг на друга. При изменении <strong>у</strong>, вы не затрагиваете <strong>х</strong>.

<pre class="lang-java line-numbers"><code>
void doStuff (int у) {
 
   у = 27; / / Это не влияет на 'х'
}
</code></pre>
И наоборот — при изменении <strong>х</strong>, вы не измените <strong>y</strong>. Единственное что сделал <strong>x</strong> в этом деле это скопировал свое значение и передал его в метод <strong>doStuff()</strong>.

<strong>Как "передача по значению" работает со ссылками?</strong>
 
Слишком многие люди говорят, "Java передает примитивные типы по значению, а объекты по ссылке". Это не так как говорят. Java передает все по значению. С примитивами, вы получаете копию содержимого. Со ссылками вы тоже получаете копию содержимого.
 
Но что такое содержимое ссылки?
 
Пульт дистанционного управления. Средства для управления / доступа к объекту.
 
Когда вы передаете ссылку на объект в метод, вы передаете копию ссылки. Клон пульта дистанционного управления. Объект все еще сидит в куче где был создан, ожидая кого-то, чтобы использовали пульт. Объект не волнует сколько пультов "запрограммированы" чтобы контролировать его. Это волнует только сборщика мусора и вас, программиста.

Поэтому, когда вы говорите:
 
<pre class="lang-java line-numbers"><code>
Cat A = new Cat ();
doStuff (А);
 
void doStuff (Cat B) {
 
   / / Использование B
}
</code></pre>
 
Существует только один объект <strong>Cat</strong>. Но теперь два пульта управления (ссылки) могут получить доступ к одному и тому же объекту <strong>Cat</strong>.
 
Так что теперь все, что <strong>B</strong> делает объекту <strong>Cat</strong>, повлияет на <strong>Cat</strong>, на который указывает <strong>A</strong>, но это не повлияет на содержимое <strong>A</strong>!
 
Вы можете изменить <strong>Cat</strong>, используя новую ссылку <strong>B</strong> (скопированную непосредственно с <strong>А</strong>), но вы не можете изменить <strong>А</strong>.
 
Какого черта это значит?
 
Вы можете изменить объект, на который ссылается <strong>А</strong>, но вы не можете взять и изменить ссылку <strong>А</strong> — переадресовать её на другой объект или <strong>null</strong>. Так что если вы измените ссылку <strong>B</strong> (не сам объект <strong>Cat</strong> на который ссылается <strong>B</strong>, а само значение ссылки) вы не измените значение <strong>А</strong>. И наоборот.

Так что:
 
<pre class="lang-java line-numbers"><code>
Cat A = new Cat ();
doStuff (А);

void doStuff (Cat B) {
 
   B = new Cat (); / / Не повлияет на ссылку A
}
</code></pre>
Это просто значит, что <strong>B</strong> указывает на другой объект. <strong>A</strong> по-прежнему счастлива.
 
Так что повторяйте за мной:
 
<strong>Java передает все по значению.</strong>
 
(Хорошо, еще раз... с чувством.)

<strong>Java передает все по значению.</strong>

Для примитивных типов — вы передаете копию текущего значения, для ссылок на объекты — вы передаете копию ссылки (дистанционного управления). Вы никогда не передаете объект. Все объекты хранятся в куче. Всегда. 

Теперь заварите здоровенную чашку кофе и пишите код!

<em><a href="https://javaranch.com/campfire/StoryPassBy.jsp" rel="nofollow">Оригинал</a> статьи.</em>