Знакомство с классами: написание собственных классов, конструкторы
<p>----------------------------------------</p>
Привет! Сегодня мы поговорим о классах в Java. Классы — это, можно сказать, основа основ программирования на Java. Когда ты станешь программистом, твоей основной задачей, собственно, ...
<p>----------------------------------------</p>
Привет! Сегодня мы поговорим о классах в Java.

<span class="text-bold">Классы</span> — это, можно сказать, основа основ программирования на Java. Когда ты станешь программистом, твоей основной задачей будет написание собственных классов с разным функционалом.
<img data-id="888190d2-6408-4357-9004-e220bc03cece" data-max-width="850" alt="Знакомство с классами: написание собственных классов, конструкторы - 1" src="https://cdn.javarush.com/images/article/888190d2-6408-4357-9004-e220bc03cece/1024.jpeg">Давай разберемся, что же это за штука такая и как она работает :)

Как ты уже знаешь, Java — это объектно-ориентированный язык программирования. Все программы состоят из объектов, которые как-то связываются между собой. 

Класс — это, по сути, шаблон для объекта. Он определяет, как объект будет выглядеть и какими функциями обладать. <span class="text-bold">Каждый объект является объектом какого-то класса</span>.

Рассмотрим самый простой пример:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

}
</code></pre>
Допустим, мы пишем программу, и в этой программе нам для чего-то нужны кошки (например, у нас ветеринарная клиника с возможностью онлайн-записи).

Мы создали класс <code>Cat</code>, и указали для него две переменные — строку <code>name</code>, и число <code>age</code>. Такие переменные классов называются <span class="text-bold">полями</span>.

По сути — это шаблон для всех кошек, которых мы создадим в будущем. У каждой кошки (объекта класса <code>Cat</code>) будет две переменные — имя и возраст. 

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public static void main(String[] args) {
        Cat barsik = new Cat();
        barsik.age = 3;
        barsik.name = "Барсик";

        System.out.println("Мы создали кота по имени " + barsik.name + ", его возраст - " + barsik.age);
    }

}
</code></pre>
Вот так это работает! Мы создали кота, присвоили ему имя и возраст и вывели все это в консоль. Ничего сложного :)

Классы чаще всего описывают предметы и явления окружающего мира.

Кошка, стол, человек, молния, страница книги, колесо — все это в твоей программе будет создаваться с помощью отдельных классов.

Теперь давай обратим внимание на переменные, которые мы создали в классе <code>Cat</code>. Они называются полями, или <span class="text-bold">переменными экземпляров</span>. В названии, собственно, раскрыта вся их суть. Эти переменные будут <span class="text-bold">у каждого экземпляра</span> (объекта) класса <code>Cat</code>. У каждого кота, которого мы создадим, будет своя переменная <code>name</code> и своя переменная <code>age</code>. Логично, в общем-то: с настоящими котами все так и есть :) 

Кроме переменных экземпляров существуют и другие — <span class="text-bold">переменные классов</span>, или статические. Дополним наш пример:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    static int count = 0;

    public static void main(String[] args) {
        Cat barsik = new Cat();
        barsik.age = 3;
        barsik.name = "Барсик";
        count++;

        Cat vasia = new Cat();
        vasia.age = 5;
        vasia.name = "Вася";
        count++;

        System.out.println("Мы создали кота по имени " + barsik.name + ", его возраст - " + barsik.age);
        System.out.println("Мы создали кота по имени " + vasia.name + ", его возраст - " + vasia.age);

        System.out.println("Общее количество котов = " + count);
    }
}
</code></pre>
Вывод в консоль:

<pre><code>
Мы создали кота по имени Барсик, его возраст - 3
Мы создали кота по имени Вася, его возраст - 5
Общее количество котов = 2
</code></pre>
Теперь у нас в классе появилась новая переменная — <code>count</code> (количество). Она отвечает за подсчет созданных котов. Каждый раз, когда в методе main мы создаем кота, мы увеличиваем эту переменную на 1.

Эта переменная обозначена ключевым словом <span class="text-bold">static</span>. Это значит, что <span class="text-bold">она принадлежит классу</span>, а не конкретному объекту класса. Что, конечно, логично: если имя у каждого кота должно быть свое, то счетчик котов нам нужен один на всех. Именно этого позволяет добиться слово <span class="text-bold">static</span> — переменная <code>count</code> одна для всех котов.

Обрати внимание: когда мы выводим ее в консоль, мы не пишем <code>barsik.count</code> или <code>vasia.count</code>. Она не принадлежит ни Барсику, ни Васе — она принадлежит всему классу <code>Cat</code>. Поэтому — просто <code>count</code>.

Можно также написать <code>Cat.count</code> — это тоже будет правильно.

С выводом в консоль переменной <code>name</code> у нас бы такое не прошло:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    static int count = 0;

    public static void main(String[] args) {
        Cat barsik = new Cat();
        barsik.age = 3;
        barsik.name = "Барсик";
        count++;

        System.out.println("Мы создали кота по имени " + name + ", его возраст - " + barsik.age);

        System.out.println("Общее количество котов = " + count);
    }
}
</code></pre>
Ошибка! <code>name</code> у каждого кота свое. В этом месте компилятор сбивается с толку.

"Вывести в консоль имя? А чье имя-то? :/"
<h2>Методы</h2>Кроме переменных, у каждого класса есть методы. О них мы поговорим в отдельной лекции более подробно, но общие моменты довольно просты. 

<span class="text-bold">Методы</span> — это функционал твоего класса; то, что объекты этого класса умеют делать. С одним из методов ты уже знаком — это метод <code>main()</code>. Но метод <code>main</code>, как ты помнишь, является статическим — то есть он принадлежит всему классу (логика такая же, как с переменными).

А обычные, нестатические методы, можно вызывать только на конкретных объектах, которые мы создали.

Например, если мы хотим написать класс для кошки, нам надо понять, какими функциями кошка должна обладать в нашей программе. Исходя из этого, напишем для нее пару методов:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public void sayMeow() {
        System.out.println("Мяу!");
    }

    public void jump() {
        System.out.println("Прыг-скок!");
    }

    public static void main(String[] args) {
        Cat barsik = new Cat();
        barsik.age = 3;
        barsik.name = "Барсик";

        barsik.sayMeow();
        barsik.jump();

    }
}
</code></pre>
Ну вот, теперь наш класс гораздо больше похож на описание настоящей кошки! У нас теперь не просто кот Барсик с именем и возрастом. Он еще умеет мяукать и прыгать! Какой же кот без такого "функционала" :)

Берем конкретный объект — <code>barsik</code>, и вызываем у него методы <code>sayMeow()</code> и <code>jump()</code>. 

Смотрим в консоль:

<pre><code>
Мяу!
Прыг-скок!
</code></pre>
Настойщий кот! :)
<h2>Создание собственных классов. Абстракция</h2>В будущем тебе придется писать собственные классы. На что нужно обратить внимание при их написании?

Если мы говорим о переменных, тебе нужно пользоваться такой вещью как <span class="text-bold">абстракция</span>.

<span class="text-bold">Абстракция</span> — один из четырех основных принципов объектно-ориентированного программирования. Он подразумевает <span class="text-bold">выделение главных, наиболее значимых характеристик предмета</span>, и наоборот — отбрасывание второстепенных, незначительных.

Например, мы создаем картотеку работников компании. Для создания объектов "работник" мы написали класс <span class="text-bold"><code>Employee</code></span>. Какие характеристики важны для описания работника в картотеке компании? ФИО, дата рождения, номер социального страхования, ИНН. Но вряд ли в карточке работника компании нам нужны его рост, цвет глаз и волос. Компании эта информация ни к чему.

Поэтому для класса <code>Employee</code> мы зададим переменные <code>String name</code>, <code>int age</code>, <code>int socialInsuranceNumber</code> и <code>int taxNumber</code>, а от лишней для нас информации (типа цвета глаз) откажемся, <span class="text-bold">абстрагируемся</span>.

А вот если мы создаем картотеку фотомоделей для модельного агентства, ситуация резко меняется. Для описания фотомодели нам как раз очень важны рост, цвет глаз и цвет волос, а вот номер ИНН для нее нам абсолютно не важен.

Поэтому в классе <code>Model</code> нам нужно создать переменные <code>int height</code>, <code>String hair</code>, <code>String eyes</code>.

Вот так и работает абстракция, все просто! :)
<h2>Конструкторы</h2>Давай вернемся к нашему примеру с кошками.

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public static void main(String[] args) {
        Cat barsik = new Cat();

        System.out.println("Тут в программе в течение 2-х часов что-то происходит...");

        barsik.age = 3;
        barsik.name = "Барсик";

    }
}
</code></pre>
Посмотри на этот код и попробуй догадаться, что с нашей программой не так.

На протяжении двух часов в нашей программе существовал кот без имени и возраста!

Конечно, это в корне неверно. В базе данных ветеринарной клиники не должно быть котов без информации о них.

Сейчас мы отдаем это на откуп программиста. Не забудет он указать имя и возраст — все будет ок. Забудет — в базе будет ошибка, неизвестные коты.

Как нам решить эту проблему? Надо каким-то образом запретить создавать котов без имени и возраста.

Здесь нам на помощь приходят <span class="text-bold">функции-конструкторы</span>.

Приведем пример:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    //конструктор для класса Cat
    public Cat(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public static void main(String[] args) {

        Cat barsik = new Cat("Barsik", 5);
    }
}
</code></pre>
<span class="text-bold">Конструктор </span>— это, по сути, шаблон для объектов класса.

В данном случае мы указывем, что для каждого объекта <code>cat</code> должны быть указаны два аргумента — строка и число.

Если мы теперь попытаемся создать безымянного кота — у нас это не получится.

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public Cat(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public static void main(String[] args) {

        Cat barsik = new Cat(); //ошибка!
    }
}
</code></pre>
Теперь, когда в классе есть конструктор, компилятор Java знает, как должны выглядеть объекты, и не позволяет создавать объекты без указанных в нем аргументов.

Теперь давай разберемся с ключевым словом <span class="text-bold"><code>this</code></span>, которое ты видишь внутри конструктора.
С ним тоже все просто.

"this" по-английски — "этот, этого". То есть это слово указывает на конкретный предмет. 

Код в конструкторе 

<pre class="lang-java line-numbers"><code>
public Cat(String name, int age) {
    this.name = name;
    this.age = age;
}
</code></pre>
можно перевести почти дословно:

"<span class="text-bold">name</span> для этого кота (которого мы создаем) = аргументу <span class="text-bold">name</span>, который указан в конструкторе. <span class="text-bold">age</span> для этого кота (которого мы создаем) = аргументу <span class="text-bold">age</span>, который указан в конструкторе."

После срабатывания конструктора можешь проверить, что нашему коту присвоились все нужные значения:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public Cat(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public static void main(String[] args) {

        Cat barsik = new Cat("Барсик", 5);
        System.out.println(barsik.name);
        System.out.println(barsik.age);
    }
}
</code></pre>
Вывод в консоль:

<pre><code>
Барсик
5
</code></pre>
Когда конструктор отработал:

<pre class="lang-java line-numbers"><code>
Cat barsik = new Cat("Барсик", 5);
</code></pre>
Внутри него по факту произошло следующее:

<pre class="lang-java line-numbers"><code>
this.name = "Барсик";
this.age = 5;
</code></pre>
И объекту <code>barsik</code> (он и является <span class="text-bold"><code>this</code></span>) присвоились значения из аргументов конструктора.

На самом деле, если не указать в классе конструкторы <span class="text-bold"> у него все равно будет срабатывать конструктор</span>!

Но как такое возможно? О_О

Дело в том, что в Java у всех классов есть так называемый<span class="text-bold"> конструктор по умолчанию</span>. У него нет никаких аргументов, но он срабатывает каждый раз при создании любого объекта любого класса.

<pre class="lang-java line-numbers"><code>
public class Cat {

    public static void main(String[] args) {

        Cat barsik = new Cat(); //вот здесь сработал конструктор по умолчанию
    }
}
</code></pre>
На первый взгляд это не заметно. Ну создали объект и создали, где тут работа конструктора?

Чтобы это увидеть, давай прямо руками напишем для класса <code>Cat</code> пустой конструктор, а внутри него выведем какую-нибудь фразу в консоль. Если она выведется, значит конструктор отработал.

<pre class="lang-java line-numbers"><code>
public class Cat {

    public Cat() {
        System.out.println("Создали кота!");
    }

    public static void main(String[] args) {

        Cat barsik = new Cat(); //вот здесь сработал конструктор по умолчанию
    }
}
</code></pre>
Вывод в консоль:

<pre><code>
Создали кота!
</code></pre>
Вот и подтверждение. Конструктор по умолчанию всегда незримо присутствует в твоих классах.

Но тебе нужно знать еще одну его особенность.

<span class="text-bold">Дефолтный конструктор исчезает из класса, когда ты создаешь какой-то конструктор с аргументами.</span>

Доказательство этого, на самом деле, мы уже видели выше. Вот в этом коде:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public Cat(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public static void main(String[] args) {

        Cat barsik = new Cat(); //ошибка!
    }
}
</code></pre>
Мы не смогли создать кота без имени и возраста, потому что определили конструктор для <code>Cat</code>: строка + число.

Дефолтный конструктор сразу после этого исчез из класса.

Поэтому обязательно запомни: если тебе в твоем классе нужно несколько конструкторов, включая пустой, <span class="text-bold">его нужно создать отдельно</span>.

Например, наша ветеринарная клиника хочет делать добрые дела и помогать бездомным котикам, чьих имен и возраста мы не знаем.

Тогда наш код должен выглядеть так:

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    //для домашних котов
    public Cat(String name, int age) {
        this.name = name;
        this.age = age;
    }

    //для уличных котов
    public Cat() {
    }

    public static void main(String[] args) {
        
        Cat barsik = new Cat("Barsik", 5);
        Cat streetCat = new Cat();
    }
}
</code></pre>
Теперь, когда мы явно указали конструктор по умолчанию, мы можем создавать котов обоих типов.

В конструкторе можно присваивать значения и явно, а не только брать их из аргументов. Например, мы можем записывать всех уличных котов в базу данных под именем "Уличный кот номер..." :

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    static int count = 0;

    public Cat() {
        count++;
        this.name = "Уличный кот номер " + count;
    }

    public Cat(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public static void main(String[] args) {

        Cat streetCat1 = new Cat();
        Cat streetCat2 = new Cat();
        System.out.println(streetCat1.name);
        System.out.println(streetCat2.name);
    }
}
</code></pre>
У нас есть переменная <code>count</code>, которая является счетчиком уличных котов.

Каждый раз при выполнении конструктора по умолчанию мы увеличиваем ее на 1 и присваем этот номер в качестве имени кота.

<span class="text-bold">Для конструктора очень важен порядок следования аргументов.</span> 

Поменяем в нашем конструкторе аргументы имени и возраста местами.

<pre class="lang-java line-numbers"><code>
public class Cat {

    String name;
    int age;

    public Cat(int age, String name) {
        this.name = name;
        this.age = age;
    }

    public static void main(String[] args) {

        Cat barsik = new Cat("Барсик", 10); //ошибка!
    }
}
</code></pre>
Ошибка! Конструктор четко описывает: при создании объекта <code>Cat</code> ему должны быть переданы <span class="text-bold">число и строка, именно в таком порядке</span>. Поэтому наш код не срабатывает.

Обязательно запомни это и учитывай при создании своих собственных классов:

<pre class="lang-java line-numbers"><code>
public Cat(String name, int age) {
    this.name = name;
    this.age = age;
}

public Cat(int age, String name) {
    this.age = age;
    this.name = name;
}
</code></pre>
<span class="text-bold">Это два абсолютно разных конструктора!</span>
Теперь реши несколько задач на закрепление материала :)
<ul>
<li>Музей древностей.</li></ul>Твоя задача — спроектировать класс <code>Artifact</code>.

Артефакты, которые хранятся в музее, бывают трех видов.

Первый — о которых неизвестно ничего, кроме порядкового номера, присвоенному музеем (например: 212121).
Второй — о которых известен порядковый номер и культура, которой он был создан (например: 212121, "Ацтеки").
Третий вид — о которых известен порядковый номер, культура, которой он был создан, и точный век его создания (например: 212121, "Ацтеки", 12).

Создай класс <code>Artifact</code>, описывающий хранящиеся в музее древности, и напиши необходимое количество конструкторов для него. В методе <code>main()</code> создай по одному артефакту каждого вида.

<pre class="lang-java line-numbers"><code>
public class Artifact {

    public static void main(String[] args) {
    }
}
</code></pre>
<ul><li>Сайт знакомств</li></ul>Вы создаете базу данных пользователей для сайта знакомств.

Да вот беда — вы подзабыли в каком порядке их нужно указывать, а технического задания под рукой нет.

Спроектируйте класс <code>User</code>,  у которого будут поля — имя (<code>String</code>) возраст (<code>short</code>) и рост (<code>int</code>).

Создайте для него необходимое количество конструкторов, чтобы имя, возраст и рост можно было указывать в любом порядке.

<pre class="lang-java line-numbers"><code>
public class User {

    String name;
    short age;
    int height;

    public static void main(String[] args) {
        
    }
}
</code></pre>