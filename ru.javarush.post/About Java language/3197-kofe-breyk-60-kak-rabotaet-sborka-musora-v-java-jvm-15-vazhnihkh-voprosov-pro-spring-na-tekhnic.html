Кофе-брейк #60. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании
<p>----------------------------------------</p>
Сборка мусора в Java автоматически выделяет и освобождает память, поэтому разработчикам не нужно писать отдельную программу для управления памятью...
<p>----------------------------------------</p>
<h2>Как работает сборка мусора в Java (JVM)</h2>Источник: <a href="https://dzone.com/articles/garbage-collection-in-javajvm" rel="nofollow" target="_blank">DZone</a><h3>Процесс сборки мусора в Java</h3><span class="text-bold">Сборка мусора</span> в Java автоматически выделяет и освобождает память, поэтому разработчикам не нужно писать отдельную программу для управления памятью, что является одним из основных преимуществ программирования на Java.

Каждый раз, когда Java-программа запускается на JVM, объекты создаются в куче (heap) и представляют собой часть памяти, предназначенную для программы. Со временем некоторые предметы больше не понадобятся. Сборщик мусора находит эти неиспользуемые объекты и удаляет их, чтобы освободить память.<img data-max-width="800" data-id="7696d443-b202-4500-81d7-3a5ae254e691" src="https://cdn.javarush.com/images/article/7696d443-b202-4500-81d7-3a5ae254e691/800.jpeg" alt="Кофе-брейк #61. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании - 1">Сборщик мусора, оценив кучу памяти, определит, какие объекты используются, а какие нет, и удалит неиспользуемые объекты. Используемый объект или объект, на который имеется ссылка, означает, что некоторая часть вашей программы все еще поддерживает указатель на этот объект.

Если объект уже не используется или, на него нет ссылок, то какая-либо часть программы на него больше не будет ссылаться. Таким образом, память, которая используется объектом, на который нет ссылки, может быть освобождена путем выполнения сборки мусора.<img data-max-width="512" data-id="87bb0cbe-00f4-40aa-b1c2-591d471a42c5" src="https://cdn.javarush.com/images/article/87bb0cbe-00f4-40aa-b1c2-591d471a42c5/512.jpeg" alt="Кофе-брейк #61. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании - 2">Освобождение памяти можно описать тремя основными процессами:<ol>
<li>Маркировка.</li>
<li>Обычное удаление.</li>
<li>Удаление с уплотнением.</li>
</ol><span class="text-bold">Маркировка</span> — это процесс идентификации частей памяти, которые используются и не используются сборщиком мусора. Обычно маркировка является первым этапом.

<span class="text-bold">Обычное удаление</span> — процесс удаления объектов, на которые нет ссылок, с оставлением в свободном пространстве объектов и указателей, на которые есть ссылки.

<span class="text-bold">Удаление с уплотнением</span> — помимо удаления объектов, на которые нет ссылок, оно сжимает оставшиеся объекты, на которые имеются ссылки, перемещая объекты вместе, чтобы сделать новое выделение памяти намного проще и быстрее.<h3>JVM Heap Memory</h3><img data-max-width="512" data-id="581bdbe0-cbcb-4758-853f-be4c4149ee58" src="https://cdn.javarush.com/images/article/581bdbe0-cbcb-4758-853f-be4c4149ee58/512.jpeg" alt="Кофе-брейк #61. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании - 3"><h4>Young Generation</h4>Вновь созданные объекты начинаются в Young Generation. Его еще называют ясли, так как здесь начинают жить новые объекты. Young Generation подразделяется на Eden Space, где начинаются все новые объекты, и два пространства Survivor , где объекты перемещаются из Eden после сохранения (surviving) в одном цикле сборки мусора. Они вызывают повторную сборку мусора, когда объекты собираются сборщиком мусора из Young Generation.

<span class="text-bold">Eden Space</span>

Все новые объекты сначала создаются в Eden Space. Незначительный сбор мусора сработает, когда он достигнет порога, определяемого JVM. Упомянутые объекты перемещаются из Eden Space в пространство первого сохранения (‘Eden’ and ‘from’ —&gt; ‘to’). Объекты, на которые нет ссылок, удаляются при очистке Eden Space.

<span class="text-bold">Survivor 0 (S0) and Survivor 1 (S1)</span>

Оба поля survivor  (From and to) начинаются пустыми. Когда происходит повторная сборка мусора, все объекты, на которые есть ссылки, перемещаются в оставшееся пространство. Когда сборка мусора закончится, места (имена) survivor «from» и «to» меняются местами. Если во время предыдущей сборки мусора S1 был в роли «to», то теперь S1 заполнен и становится «from». Соответственно, если S0 пусто, то оно станет «to».<h4>Old Generation</h4>После незначительной сборки мусора, когда устаревшие объекты достигают определенного порога возраста (по умолчанию порог современных JVM установлен на 15 циклов сборки мусора), они вместе с объектами-долгожителями переходят из молодого поколения в старое. 

Поскольку второстепенные сборщики мусора продолжают возникать, объекты продолжают перемещаться в пространство Old Generation, оно начнет заполняться и произойдет основной сбор мусора. 

Основная сборка мусора происходит, когда объекты собираются сборщиком мусора Old Generation.
<img data-max-width="512" data-id="b0f3c223-bca5-48e3-b455-9637dc4880c7" src="https://cdn.javarush.com/images/article/b0f3c223-bca5-48e3-b455-9637dc4880c7/512.jpeg" alt="Кофе-брейк #61. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании - 4"><h4>Permanent Generation</h4>Метаданные, такие как классы и методы, хранятся в Permanent Generation (постоянном поколении). Классы, которые больше не используются, могут быть из него удалены сборщиком мусора. Во время полного сбора мусора неиспользуемые объекты всех поколений собираются.<img data-max-width="512" data-id="a0fcdb93-e7b3-4a25-83d1-87f49d6626f3" src="https://cdn.javarush.com/images/article/a0fcdb93-e7b3-4a25-83d1-87f49d6626f3/512.jpeg" alt="Кофе-брейк #61. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании - 5"><h3>Типы сборки мусора</h3>Сборки мусора, очищающие различные части внутри кучи, часто называют Minor, Major и Full сборками мусора. Но, поскольку термины Minor, Major и Full широко используются и без надлежащего определения, мы рассмотрим объяснение всех этих типов сборки мусора.<h4>Minor Garbage Collection</h4>Сборка мусора из пространства Young Generation называется Minor Garbage Collection. Этот тип сборки всегда запускается, когда JVM не может выделить место для нового объекта, то есть когда Eden Space заполняется. Таким образом, чем выше скорость выделения, тем чаще происходит Minor Garbage Collection.<h4>Major Garbage Collection</h4>Major Garbage Collection очищает Tenured (старое пространство). Поскольку Old Generation больше по размеру, сборка происходит реже, чем у Young Generation. Когда объекты исчезают из Old Generation, мы говорим, что произошел «большая сборка мусора». Сборщик Old Generation попытается предугадать, когда ему нужно начать сборку, чтобы избежать неудач в продвижении со стороны Young Generation.

Сборщики отслеживают порог заполнения для Old Generation и начинают сборку, когда этот порог превышен. Если этого порога недостаточно для удовлетворения требований продвижения, запускается «Full Garbage Collection».<h4>Full Garbage Collection</h4>Full Garbage Collection очищает всю кучу — как молодые, так и старые пространства. Многие путаются между Major (только OLD поколение) и Full GC (Young + OLD (Heap)). Full Garbage Collection включает продвижение всех живых объектов от молодого до старого поколения после сборки и уплотнения старого поколения. Полная сборка мусора будет остановкой для Stop-the-World. Она следит за тем, чтобы новые объекты не выделялись и объекты не становились недоступными во время работы сборщика.<h2>15 важных вопросов про Spring на техническом собеседовании</h2>Источник: <a href="https://dev.to/devinterview/spring-interview-questions-and-answers-for-software-developers-3d0b" rel="nofollow" target="_blank">Dev.to</a> 

Spring Framework — это универсальный фреймворк для платформы Java. Его основные функции могут использоваться любым приложением Java, также существуют расширения для создания веб-приложений на основе Java EE. Представляем вашему вниманию список вопросов и ответов на собеседовании, относящихся к кодированию на Spring. Надеемся, что они помогут вам подготовиться к техническому собеседованию в 2021 году.<img data-max-width="800" data-id="56426cca-8451-4ed0-a2ca-72718cb226eb" src="https://cdn.javarush.com/images/article/56426cca-8451-4ed0-a2ca-72718cb226eb/800.jpeg" alt="Кофе-брейк #61. Как работает сборка мусора в Java (JVM). 15 важных вопросов про Spring на техническом собеседовании - 6"><h3>1. Что такое Spring?</h3>Ответ:

<span class="text-bold">Spring</span> — это фреймворк с открытым исходным кодом для разработки приложений на Java. Основные функции Spring Framework можно использовать при разработке любого приложения Java, также имеются расширения для создания веб-приложений на основе платформы Java EE. Фреймворк Spring нацелен на упрощение использования J2EE в разработке, и улучшение практики программирования путем включения модели на основе POJO (Plain Old Java Object).<h3>2. Какова область действия по умолчанию у bean-компонента в Spring framework?</h3>Ответ:

Область действия bean-компонента по умолчанию — <span class="text-bold">Singleton</span> (шаблон проектирования).<h3>3. Что такое Bean wiring?</h3>Ответ:

<span class="text-bold">Bean wiring</span> (подключение Bean) — это действие по созданию ассоциаций между компонентами приложения (beans) в контейнере Spring.<h3>4. Что такое Spring Security?</h3>Ответ:

Spring Security — это отдельный модуль инфраструктуры Spring, который фокусируется на предоставлении методов аутентификации и авторизации в приложениях Java. Он также устраняет большинство распространенных уязвимостей безопасности, таких как атаки CSRF.

Чтобы использовать Spring Security в веб-приложениях, можно начать с простой аннотации: @EnableWebSecurity.<h3>5. Что содержится в определении bean-компонента?</h3>Ответ:

Определение bean-компонента содержит информацию, называемую метаданными конфигурации, которая необходима контейнеру, чтобы знать следующее:<ul>
<li>Как создать bean;</li>
<li>Подробности жизненного цикла bean;</li>
<li>Зависимости bean.</li>
</ul><h3>6. Что такое Spring Boot?</h3>Ответ:

Spring Boot — это проект, который предоставляет предварительно настроенный набор фреймворков для уменьшения шаблонной конфигурации, чтобы вы могли запускать и запускать приложение Spring с минимальным объемом кода.<h3>7. Что такое DispatcherServlet и для чего он используется?</h3>Ответ:

DispatcherServlet — это реализация шаблона проектирования Front Controller, который обрабатывает все входящие веб-запросы к приложению Spring MVC. Шаблон Front Controller (шаблон проектирования корпоративного приложения) — это распространенный шаблон в веб-приложениях, задача которого заключается в получении всего запроса и его маршрутизации в различные компоненты приложения для фактической обработки.

В Spring MVC DispatcherServlet используется для поиска правильного контроллера для обработки запроса. Это делается с помощью сопоставления обработчиков: например, аннотации @RequestMapping.<h3>8. Нужен ли spring-mvc.jar в пути к классам или он является частью spring-core?</h3>Ответ:

Spring-mvc.jar является частью spring-core, что означает, что если вы хотите использовать инфраструктуру Spring MVC в своем проекте Java, то вы должны включить ее spring-mvc.jar в путь к классам вашего приложения. В веб-приложении Java spring-mvc.jar обычно помещается в папку /WEB-INF/lib.<h3>9. Каковы преимущества использования Spring?</h3>Ответ:

Ниже приводится список некоторых преимуществ использования Spring Framework:<ul>
<li><span class="text-bold">Легкость</span> — Spring относительно легкий, когда дело касается размера и прозрачности. Базовая версия Spring Framework составляет около 2 МБ.</li>
<li><span class="text-bold">Инверсия управления (Inversion of control, IOC)</span> — Слабая связанность (loose coupling) достигается в Spring с использованием техники инверсии управления. Объекты предоставляют свои зависимости вместо того, чтобы создавать или искать зависимые объекты.</li>
<li><span class="text-bold">Аспектно-ориентированность</span> — Spring поддерживает аспектно-ориентированное программирование и обеспечивает согласованную разработку, отделяя бизнес-логику приложения от системных служб.</li>
<li><span class="text-bold">Контейнеры</span> — Spring Container создаёт объекты, связывает их вместе, настраивает и управляет ими от создания до момента удаления.</li>
<li><span class="text-bold">MVC Framework</span> — веб-фреймворк Spring — это хорошо спроектированный веб-фреймворк MVC, который обеспечивает альтернативу таким веб-фреймворкам, как Struts или другим излишне спроектированным или менее популярным веб-фреймворкам.</li>
<li><span class="text-bold">Управление транзакциями</span> — Spring имеет согласованный интерфейс управления транзакциями, который может масштабироваться до локальной транзакции (например, с использованием одной базы данных) или глобальных транзакций (например, с использованием JTA).</li>
<li><span class="text-bold">Обработка исключений</span> — Spring предоставляет удобный API для преобразования исключений, связанных с конкретной технологией (например, вызванных JDBC, Hibernate или JDO) в согласованные, непроверенные исключения.</li>
</ul><h3>10. Что такое Spring beans?</h3>Ответ:

Spring beans — это экземпляры объектов, которыми управляет Spring Container. Они создаются и подключаются фреймворком и помещаются в «мешок объектов» (контейнер), откуда вы можете их позже извлечь.

«Связка» (wiring) — это то, что является внедрением зависимостей. Это означает, что вы можете просто сказать: «Мне нужна эта вещь», и фреймворк будет следовать определенным правилам для получения этого объекта.<h3>11. Какова цель модуля Core Container?</h3>Ответ:

Контейнер ядра обеспечивает основные функции платформы Spring. Первичным компонентом основного контейнера является BeanFactory — реализация шаблона Factory. BeanFactory применяет Инверсию управление для разделения конфигурации и зависимостей спецификации приложения от фактического кода приложения.<h3>12. Что такое контекст приложения (Application Context)?</h3>Ответ:

На первый взгляд, контекст приложения такой же, как и фабрика компонентов (bean factory). Оба загружают определения bean-компонентов, объединяют bean-компоненты вместе и распределяют их по запросу. Но он также обеспечивает:<ul>
<li>Средство для разрешения текстовых сообщений, включая поддержку интернационализации.</li>
<li>Общий способ загрузки файловых ресурсов.</li>
<li>События для beans, которые зарегистрированы как слушатели (listeners).</li>
</ul><h3>13. Как интегрировать Java Server Faces (JSF) с Spring?</h3>Ответ:

JSF и Spring действительно имеют одни и те же функции, особенно в области сервисов Инверсии управления. Объявляя управляемые компоненты JSF в файле конфигурации faces-config.xml, вы позволяете FacesServlet создавать экземпляр этого bean-компонента при запуске. Ваши страницы JSF имеют доступ к этим bean-компонентам и всем их свойствам. JSF и Spring можно интегрировать двумя способами:

<span class="text-bold">DelegatingVariableResolver</span>: Spring поставляется с преобразователем переменных JSF, который позволяет вам использовать JSF и Spring вместе. DelegatingVariableResolver сначала делегирует поиск значений интерпретатору по умолчанию базовой реализации JSF, а затем — «бизнес-контексту» Spring WebApplicationContext. Это позволяет легко внедрять зависимости в JSF-управляемые компоненты.

<span class="text-bold">FacesContextUtils</span>: настраиваемый VariableResolver хорошо работает при отображении своих свойств на bean-компоненты в faces-config.xml. Но если потребуется захватить bean-компонент, то класс FacesContextUtils это упрощает. Он похож на WebApplicationContextUtils, за исключением того, что принимает параметр FacesContext, а не параметр ServletContext.

<pre class="language-java line-numbers"><code>
ApplicationContext ctx = FacesContextUtils.getWebApplicationContext (FacesContext.getCurrentInstance ());
</code></pre><h3>14. Что такое Spring MVC framework?</h3>Ответ:

Инфраструктура <span class="text-bold">Spring Web MVC</span> предоставляет архитектуру model-view-controller и готовые компоненты, которые можно использовать для разработки гибких и слабосвязанных веб-приложений. Шаблон MVC приводит к разделению различных аспектов приложения (логика ввода, бизнес-логика и логика пользовательского интерфейса), обеспечивая при этом слабую связь между этими элементами.<h3>15. Как происходит обработка событий в Spring?</h3>Ответ:

Обработка в <em>ApplicationContext</em> обеспечивается через <em>ApplicationEvent</em> класса и <em>ApplicationListener</em> интерфейса. То есть если bean-компонент реализует <em>ApplicationListener</em>, то каждый раз, когда <em>ApplicationEvent</em> публикуется в <em>ApplicationContext</em>, этот bean-компонент регистрируется.

Спасибо за чтение и удачи в вашем техническом собеседовании!