Вопрос-ответ: почему пароль в Java лучше хранить в массиве символов, а не в String? 
<p>----------------------------------------</p>
Вы вполне можете услышать такой вопрос на интервью на позицию Java Junior. Но вот моему приятелю его задали на собеседовании на должность Technical Lead ...
<p>----------------------------------------</p>
Вы вполне можете услышать такой вопрос на интервью на позицию Java Junior. Но вот моему приятелю его задали на собеседовании на должность Technical Lead. 

<div class='row justify-content-center jr-image-wrap'><div class='col-12 col-sm-10 col-md-8'><img data-id="5ce23145-a61f-45d3-978d-3572e1495e17" data-max-width="710" alt="Вопрос-ответ: почему пароль в Java лучше хранить в массиве символов, а не в String?  - 1" src="https://cdn.javarush.com/images/article/5ce23145-a61f-45d3-978d-3572e1495e17/1024.jpeg"></div></div>
И <code>String</code>, и массив символов можно использовать для хранения текстовых данных. Но осознанный выбор одного или другого для конкретной задачи — сложен, если вы ещё не сталкивались с подобной ситуацией.  Однако, как заметил мой друг, любой вопрос, связанный с <code>String</code>, обычно связан с таким особенным свойством строк, как неизменяемость (<code>Immutable</code>), и он воспользовался этим на собеседовании.

Итак, давайте разберём пару причин, почему для хранения пароля нужно использовать <code>char []</code>, а не <code>String</code>.

<h3>Причина 1. Строки — неизменны</h3>Так как строки в Java являются неизменными, то ваш пароль в виде обычного текста будет доступен в памяти, пока сборщик мусора не очистит её. И поскольку <code>String</code> используются в <code>String pool</code> для повторного использования, существует довольно высокая вероятность того, что пароль останется в памяти надолго, что совсем не безопасно. 

<table>
<tr>
<td>
<em><strong>Java String pool</strong></em> — это пул или набор объектов (строк), который расположен в специальном месте — куче (Heap). String в Java — один из самых распространённых типов данных. Это не примитивный тип, а объект, поскольку весьма ресурсозатратен. Так, для хранения строки из четырёх символов необходимо выделить 56 байт памяти. Вот почему строки, как и другие объекты, хранятся в куче. 
</td>
</tr>
</table>
Любой, у кого есть доступ к дампу памяти, может найти пароль в текстовом виде, и это — серьезная причина, чтобы использовать зашифрованный пароль, а не простой текст.

Поскольку строки являются неизменными, их содержимое нельзя изменить. Любое изменение приведет к созданию новой строки. А вот в случае с <code>char []</code>, вы можете заменить любой его элемент нулем или пустым символом. Таким образом, хранение пароля в массиве символов явно снижает риск перехвата пароля.

<h3>Причина 2. Рекомендации авторов</h3>Java сама по себе (ну, через своих создателей, разумеется) рекомендует использовать метод <code>getPassword ()</code> из класса <code>JPasswordField</code>, который возвращает <code>char []</code>. Можно также попробовать устаревший (deprecated) метод <code>getText ()</code>. Почему бы не последовать рекомендациям авторов языка?

<h2>Причина 3. Печать</h2>С типом <code>String</code> всегда существует опасность того, что текст, хранящийся в строке будет напечатан в файле логов или в консоли. В то же время в случае использования <code>Array</code>, вы не будете печатать содержимое массива, а только его расположение в памяти. Конечно, это не то чтобы серьезная причина, но всё-таки в этом тоже есть смысл.

<pre class='lang-java line-numbers'><code>
String strPassword = "Unknown";
char [] charPassword = new char [] {'U', 'n', 'k', 'w', 'o', 'n'};
System.out.println ("String password:" + strPassword);
System.out.println ("char password:" + charPassword);

String password: Unknown
Character password: [C@110b053
</code></pre>
Разумеется, использование <code>char []</code> для хранения паролей в Java само по себе не является панацеей. Вам нужно озаботится о безопасности, например, работать с хэшами и шифровать пароли, а не хранить их в текстовом виде. И, конечно, удалять его из памяти сразу после процедуры аутентификации.

<em><strong>По материалам <a href='http://javarevisited.blogspot.sg/' target='_blank'>Javarevisited</a></strong></em>
 
<table>
<tr><th>Что еще почитать?</th>
</tr>
<tr>
<td>
<p><a href='https://javarush.com/groups/posts/404-khitrihe-voprosih-po-java-kotorihe-chasto-zadajut-na-sobesedovanijakh-' target='_blank'>Хитрые вопросы по Java, которые часто задают на собеседованиях</a></p>
<p><a href='https://javarush.com/groups/posts/392-kak-v-java-napechatatjh-chisla-ot-1-do-100-bez-ciklov-i-usloviy-' target='_blank'>Как в Java напечатать числа от 1 до 100 без циклов и условий?</a></p>
<p><a href='https://javarush.com/groups/posts/416-ispoljhzovanie-java-arrayssort-dlja-ljubogo-spiska-obhhektov-' target='_blank'>Использование Java Arrays.sort() для любого списка объектов</a></p>
</td>
</tr>
</table>