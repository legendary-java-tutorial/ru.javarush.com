Кофе-брейк #36. 6 полезных инструментов командной строки, которые должен знать Java-разработчик. Jbang: полезный инструмент для тестирования библиотек Java
<p>----------------------------------------</p>
Java — один из наиболее популярных языков программирования. Одной из причин столь высокого внимания...
<p>----------------------------------------</p>
<h2>6 полезных инструментов командной строки, которые должен знать Java-разработчик</h2>Источник: <a href="https://www.technotification.com/2019/08/6-useful-command-line-tools-every-java-developer-should-know.html" rel="nofollow" target="_blank">Technotification</a>

Java — один из наиболее популярных языков программирования. Одной из причин столь высокого внимания к этому языку является то, что Java Runtime Environment позволяет запускать Java-приложения на разных платформах. Запуск и компиляцию можно осуществлять, в том числе, из командной строки. Используя инструменты командной строки, разработчик может упростить процесс создания приложений и выполнение многих других задач.<img data-max-width="800" data-id="7b4bae7d-e714-4113-bf34-184968ca9bf1" src="/images/article/7b4bae7d-e714-4113-bf34-184968ca9bf1/800.jpeg" alt="Кофе-брейк #36. 6 полезных инструментов командной строки, которые должен знать Java-разработчик. Jbang — создание сценариев оболочки для Java - 1">Сегодня я расскажу о шести полезных инструментах командной строки, которые должен знать Java-разработчик.<h3><a href="https://docs.oracle.com/javase/9/tools/jstat.htm#JSWOR734" rel="nofollow" target="_blank">Агрегатор статистики Java (jstat)</a></h3>Агрегатор статистики Java или команду jstat используют, когда возникает проблема со скоростью запуска приложения. Это служебный инструмент, который отображает статистику производительности Java Virtual Machine (JVM). Используйте его, когда вам нужно узнать размер динамической памяти или алгоритм автоматической сборки мусора JRE.<h3><a href="https://docs.oracle.com/javase/9/tools/jdeps.htm#JSWOR690" rel="nofollow" target="_blank">Диспетчер зависимостей Java (jdeps)</a></h3>Jdeps — это анализатор зависимостей классов Java, полезный для быстрого определения статических зависимостей приложений и библиотек. Jdeps также предлагает варианты более новой и предпочтительной API, которую вы можете использовать для замены существующей версии.<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html" rel="nofollow" target="_blank">Компилятор Java (javac)</a></h3>Javac — один из самых полезных инструментов командной строки для разработчиков. Он входит в состав JDK из первой версии и включен в сборку многих популярных IDE. Javac используется для устранения любых проблем, возникающих в процессе сборки и развертывания проекта.<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html" rel="nofollow" target="_blank">Профилировщик Java (javap)</a></h3>Он отменяет компиляцию, разделяет файлы классов и показывает, что внутри них. Его также называют дизассемблером (Java Class File Disassembler). Вы можете использовать Javap, чтобы узнать, как работает конкретный оператор Java. Также с помощью профилировщика вы можете увидеть методы, доступные в классе, если у вас нет доступа к исходному коду.<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html" rel="nofollow" target="_blank">Утилита архивирования Java (jar)</a></h3>Утилита Java Archive или команда jar используется для создания сжатого архивного файла. Это еще один полезный инструмент, которым регулярно пользуются многие разработчики. Jar также может пригодиться, когда вы хотите сравнить одну версию выпуска кода с другой или указать точку входа для встроенных JAR-файлов или других исполняемых файлов.<h3><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/share/jps.html" rel="nofollow" target="_blank">Инструмент состояния процесса JVM (jps)</a></h3>Этот инструмент работает независимо от операционной системы и предоставляет удобный способ определения идентификатора процесса (PID). Предположим, вы запустили программу и хотите связать ее с Java Memory-Map (jmap). Для того чтобы сделать это, нужен PID, и именно здесь на помощь приходит jps.

В большинстве случаев полезно применять комбинацию флагов «-mlv». Она распечатывает аргументы основного метода, аргументы полных имен пакетов, передаваемые JVM.<h3>Заключение</h3>Это лишь несколько из полезных инструментов командной строки, которые должен знать каждый Java-разработчик. Со временем почти все инструменты, применяемые в создании софта на Java, значительно улучшились. Но многие разработчики все еще полагаются на командную строку для решения важных задач.

Кроме того, если вы новичок, всегда рекомендуется иметь хотя бы базовые представления о популярных инструментах командной строки. Это поможет вам не только в учебе, но и в карьере.<h2>Jbang: полезный инструмент для тестирования библиотек Java</h2>Источник: <a href="https://dzone.com/articles/jbang-the-power-of-shell-scripting-for-java" rel="nofollow" target="_blank">DZone</a>

Всякий раз, когда выходит новая библиотека Java, разработчикам интересно с ней ознакомиться. Но иногда это бывает сложно из-за проблем с настройкой проекта в IDE или Maven. Конечно, пути к классам можно прописать и в командной строке, но для некоторых ленивых разработчиков это слишком громоздко.

И вот здесь на помощь приходит <a href="https://jbang.dev/" rel="nofollow" target="_blank">jbang</a>! С ним исчезнут проблемы с настройкой проекта для тестирования библиотеки или запуском Java-файла!<img data-max-width="800" data-id="e004199d-ceb9-476a-8284-a31bdbf7ec0e" src="/images/article/e004199d-ceb9-476a-8284-a31bdbf7ec0e/800.jpeg" alt="Кофе-брейк #36. 6 полезных инструментов командной строки, которые должен знать Java-разработчик. Jbang — создание сценариев оболочки для Java - 2">Разумеется, в Java есть JShell, но jbang кажется лучше во многих отношениях. Jbang — это небольшой аккуратный инструмент, написанный Максом Ридалом Андерсеном (maxandersen), который:<ul><li>позволяет запускать java-файлы в качестве сценария где угодно — с Java 8+ или jshell;</li>
<li>помогает опробовать любую Java API без необходимости установки, настройки или конфигурации проекта для Maven, Gradle или любой другой системы сборки.</li></ul>Краткий список возможностей jbang:<ul><li>Поддерживает Java 8 или выше, но рекомендуется Java 11;</li>
<li>Объявления зависимостей через <code>//DEPS group:artifact:version</code> или <code>@Grab</code> аннотации;</li>
<li>Параметры компиляции и выполнения с помощью <code>//JAVAC_OPTIONS<flags></flags></code> и <code>//JAVA_OPTIONS<flags></flags></code>;</li>
<li>Поддерживает работу в Windows, Linux и Mac;</li>
<li>Запуск приложения JavaFX на Java 8 и выше без необходимости перекодировки;</li>
<li>И многое другое...</li></ul>Теперь давайте разберемся, в чем же заключаются преимущества jbang. Для этого возьмем хорошую библиотеку — Jsoup. Это библиотека Java, которая предоставляет очень удобные API для получения URL-адресов, извлечения и управления содержимым HTML с помощью методов DOM и селекторов CSS или, проще говоря, JQuery-подобного синтаксиса для работы с DOM.

Для начала нам нужно будет запустить класс <code>jbang</code>, используя <code>jbang init hellojsoup.java</code>. Это создаст <code>hellojsoup.java</code> файл с <code>hellojsoup</code> классом и основным методом. В верхней части файла также есть команды для <code>Unix !shebang</code> и <code>DEPS</code> объявления. Это объявление является комментарием, где мы указываем Gradle-подобные зависимости от формата — <code>groupId:artifactId:version</code>. В нашем случае это будет <code>org.jsoup:jsoup:1.13.1</code>.

Вот код, который выполняет простой вызов Википедии и отображает заголовки в разделе новостей. Это немного измененная версия, представленная на сайте Jsoup.

<pre class="lang-java line-numbers"><code>
//usr/bin/env jbang "$0" "$@" ; exit $?
//DEPS org.jsoup:jsoup:1.13.1
import static java.lang.System.*;
import org.jsoup.nodes.Document;
import org.jsoup.Jsoup;
import org.jsoup.select.Elements;
import org.jsoup.nodes.Element;
public class hellojsoup {
        public static void main(String... args) throws Exception {
              Document doc = Jsoup.connect("https://en.wikipedia.org/").get();
              out.println(doc.title());
              Elements newsHeadlines = doc.select("#mp-itn b a");
              for (Element headline : newsHeadlines) {
                    out.println(String.format("%s\n\t%s", headline.attr("title"),                     headline.absUrl("href")));
          }
     }
}
</code></pre>
 Чтобы запустить код, вам нужно будет ввести следующую команду, где запуск является необязательной командой.

<pre class="lang-java line-numbers"><code>
jbang run hellojsoup.java
</code></pre>
При запуске этой программы заголовки дня будут отображаться в разделе новостей. На момент написания этой статьи получены следующие заголовки.

Shell
<pre class="lang-java line-numbers"><code>
Wikipedia, the free encyclopedia
2020 Twitter bitcoin scam
https://en.wikipedia.org/wiki/2020_Twitter_bitcoin_scam
2020 Armenian?Azerbaijani skirmishes
https://en.wikipedia.org/wiki/2020_Armenian%E2%80%93Azerbaijani_skirmishes
C/2020 F3 (NEOWISE)
https://en.wikipedia.org/wiki/C/2020_F3_(NEOWISE)
Portal:Current events
https://en.wikipedia.org/wiki/Portal:Current_events
Deaths in 2020
https://en.wikipedia.org/wiki/Deaths_in_2020
Wikipedia:In the news/Candidates
https://en.wikipedia.org/wiki/Wikipedia:In_the_news/Candidates
</code></pre>
Самое замечательное в jbang — это то, насколько он простой и легкий. Он нужен не просто для тестирования библиотек, но и как инструмент, который в будущем будет широко использоваться в производственной среде, особенно в микросервисах и бессерверных приложениях. Никакой сложной настройки сервера, только один-единственный файл Java, который отлично справляется со своей задачей. Jbang поддерживает работу с vertx, undertow, JavaFX, resteasy, ratpack, со всеми основными IDE, включая IntelliJ IDEA, и многими другими технологиями.

Если вы хотите узнать более подробную информацию о jbang и ознакомиться с его документацией, посетите страницу этого инструмента на <a href="https://github.com/jbangdev/jbang" rel="nofollow" target="_blank">GitHub</a>. Jbang выглядит очень перспективно, поэтому я не удивлюсь, если в будущем он появится в JDK!