Операции над примитивными типами в Java
<p>----------------------------------------</p>
Большинство операций над примитивными типами выполняется не с помощью методов, а с помощью специальных символов, называемых знаком операции. Присвоение переменной значения константы, другой переменной или выражения (переменных и/или констант ...
<p>----------------------------------------</p>
Большинство операций над примитивными типами выполняется не с помощью методов, а с помощью специальных символов, называемых <strong>знаком операции</strong>.
<div class='row justify-content-center jr-image-wrap'><div class='col-12 col-sm-10 col-md-8'><img data-id="7fead672-c08e-4007-9c49-30f0967654c5" data-max-width="710" alt="Операции над примитивными типами в Java - 1" src="https://cdn.javarush.com/images/article/7fead672-c08e-4007-9c49-30f0967654c5/1024.jpeg"></div></div><h2>Операция присваивания</h2>Присвоение переменной значения константы, другой переменной или выражения (переменных и/или констант, разделенных знаками операций), называется <strong>операцией присваивания</strong> и обозначается знаком "<strong>=</strong>", например:

<pre class='lang-java line-numbers'><code>
x = 3; y = x; z = x;
</code></pre>
В Java допустимо многократное использование операции присваивания в одном выражении, например:

<pre class='lang-java line-numbers'><code>
x1 = x2 = x3 = 0;
</code></pre>
Эта операция выполняется справа налево, т.е. сначала переменной <code>x3</code> присваивается значение <code>0</code>, затем переменной <code>x2</code> присваивается значение переменной <code>x3</code> (<code>0</code>), и, наконец, переменной <code>x1</code> присваивается значение переменной <code>x2</code> (<code>0</code>).

Знаки операций, аргументами которых являются числа, разделяются на две категории: <em>унарные</em> (unary) знаки операций с одним аргументом и <em>бинарные</em> (binary) с двумя аргументами.
<h2>Унарные операции</h2>В Java определены следующие <code>унарные операции</code>:<cut>
<ul>
<li>унарный минус "<code>-</code>" – меняет знак числа или выражения на противоположный;</li>
<li>унарный плюс "<code>+</code>" – не выполняет никаких действий над числом или выражением;</li>
<li>побитовое дополнение "<code>~</code>" (только для целых) – инвертирует все биты поля числа (меняет 0 на 1 и 1 на 0);</li>
<li>инкремент "<code>++</code>" (только для целых) – увеличивает значение переменной на 1;</li>
<li>декремент "<code>--</code>" (только для целых) – уменьшает значение переменной на 1.</li>
</ul>Примеры унарных операций "<code>+</code>" и "<code>-</code>":

<pre class='lang-java line-numbers'><code>
int i = 3, j, k;
j= -i; // j = -3
k = +i; // k = 3
</code></pre>
Пример операции побитового дополнения:

<pre class='lang-java line-numbers'><code>
int a = 15;
int b;
b = ~a; // b = -16
</code></pre>
Числа <code>a</code> и <code>b</code> являются числами типа <code>int</code>, т.е. представляются внутри компьютера как двоичные целые числа со знаком длиной 32 бита, поэтому двоичное представление чисел <code>a</code> и <code>b</code> будет выглядеть следующим образом:

<pre class='lang-java line-numbers'><code>
a = 00000000 00000000 00000000 00001111
b = 11111111 11111111 11111111 11110000
</code></pre>
Как видно из этого представления, все нулевые биты в числе a изменены на единичные биты в числе <code>b</code>, а единичные биты в a изменены на нулевые биты. Десятичным представлением числа <code>b</code> будет <code>–16</code>.

Знаки операции инкремента и декремента могут размещаться как до, так и после переменной. Эти варианты называются соответственно <strong>префиксной</strong> и <strong>постфиксной</strong> записью этих операции. Знак операции в префиксной записи возвращает значение своего операнда <em>после</em> вычисления выражения. При постфиксной записи знак операции <em>сначала</em> воз­вращает значение своего операнда и только после этого вычисляет инкремент или декремент, например:

<pre class='lang-java line-numbers'><code>
int x = 1, y, z;
y = ++x;
z=x++;
</code></pre>
Переменная <code>y</code> будет присвоено значение <code>2</code>, поскольку сначала значение <code>x</code> будет увеличено на <code>1</code>, а затем результат будет присвоен переменной <code>y</code>. Переменной <code>z</code> будет присвоено значение <code>1</code>, поскольку сначала переменной <code>z</code> будет присвоено значение, а затем значение <code>x</code> будет увеличено на <code>1</code>. В обоих случаях новое значение переменной <code>x</code> будет равно <code>2</code>.

Следует отметить, что в Java, в отличие от языка C, операции декремента и инкремента могут применяться и к вещественным переменным (типа <code>float</code> и <code>double</code>).

<strong>Бинарные знаки операций</strong> подразделяются на операции с числовым результатом и операции сравнения, результатом которых является булевское значение.
<h2>Арифметические бинарные операции</h2>В Java определены следующие <strong>арифметические бинарные операции</strong>:
<ul>
<li>сложение "<code>+</code>";</li>
<li>вычитание "<code>-</code>";</li>
<li>умножение "<code>*</code>";</li>
<li>деление "<code>/</code>";</li>
<li>вычисление остатка от деления целых чисел "<code>%</code>" (возвращает остаток от деления первого числа на второе, причем результат будет иметь тот же знак, что и делимое), например, результат операции <code>5%3</code> будет равен <code>2</code>, а результат операции (-7)%(-4) будет равен <code>-3</code>. В Java операция может использоваться и для вещественных переменных (типа <code>float</code> или <code>double</code>).</li>
</ul>
<strong>Примеры бинарных арифметических операций:</strong>

<pre class='lang-java line-numbers'><code>
int x = 7, x1, x2, x3, x4, x5;

x1 = x +10; // x1 = 17

x2 = x – 8; // x2 = -1

x3 = x2 * x; // x3 = -7
</code></pre>
<pre class='lang-java line-numbers'><code>
x4 = x/4; // x4 = 1 (при делении целых чисел

// дробная часть отбрасывается)

x5 = x%4 // x5 = 3 (остаток от деления

// 7 на 4)
</code></pre><h2>Побитовые операции</h2><ul>
<li><code>Побитовые операции</code> рассматривают исходные числовые значения как поля битов и выполняют над ними следующие действия:</li>
<li>установка бита в <em>i</em>-ой позиции поля результата в <code>1</code>, если оба бита в <em>i</em>-ых позициях операндов равны <code>1</code>, или в <code>0</code> в противном случае – <code>побитовое И</code> ("<code>&</code>");</li>
<li>установка бита в <em>i</em>-ой позиции поля результата в <code>1</code>, если хотя бы один бит в <em>i</em>-ых позициях операндов равен <code>1</code>, или в <code>0</code> в противном случае – <code>побитовое ИЛИ</code> ("<code>|</code>");</li>
<li>установка бита в <em>i</em>-ой позиции поля результата в <code>1</code>, если биты в <em>i</em>-ых позициях операндов не равны друг другу, или в <code>0</code> в противном случае – <code>побитовое исключающее ИЛИ</code> ("<code>^</code>");</li>
<li>сдвиг влево битов поля первого операнда на количество битов, определяемое вторым операндом (бит знака числа при этом не меняется) – <code>побитовый сдвиг влево с учетом знака</code> "<code><<</code>";</li>
<li>сдвиг вправо битов поля первого операнда на количество битов, определяемое вторым операндом (бит знака числа при этом не меняется) – <code>побитовый сдвиг вправо с учетом знака</code> "<code>>></code>";</li>
<li>сдвиг вправо битов поля первого операнда на количество битов, определяемое вторым операндом (бит знака числа при этом также сдвигается) – <code>побитовый сдвиг вправо без учета знака</code> "<code>>>></code>".</li>
</ul>
<strong>Примеры побитовых операций:</strong>
<ol>
<li><p><strong>Побитовое И</strong></p>
<pre class='lang-java line-numbers'><code>
int x = 112;
// x: 00000000 00000000 00000000 01110000
int y = 94;
// y: 00000000 00000000 00000000 01011110
int z;
z = x & y;
// z=80: 00000000 00000000 00000000 01010000
</code></pre></li>
<li><p><strong>Побитовое ИЛИ</strong></p>
<pre class='lang-java line-numbers'><code>
int x = 112;
// x: 00000000 00000000 00000000 01110000
int y = 94;
// y: 00000000 00000000 00000000 01011110
int z;
z =x | y;
// z = 126: 00000000 00000000 00000000 01111110
</code></pre></li>
<li><p><strong>Побитовое исключающее ИЛИ</strong></p>
<pre class='lang-java line-numbers'><code>
int x = 112;
// x: 00000000 00000000 00000000 01110000
int y = 94;
// y: 00000000 00000000 00000000 01011110
int z;
z =x ^ y;
// z = 46: 00000000 00000000 00000000 00101110
</code></pre></li>
<li><p><strong>Сдвиг влево с учетом знака</strong></p>
<pre class='lang-java line-numbers'><code>
int x = 31, z;
// x: 00000000 00000000 00000000 00011111
z = x << 2;
// z = 124: 00000000 00000000 00000000 01111100
</code></pre></li>
<li><p><strong>Сдвиг вправо с учетом знака</strong></p>
<pre class='lang-java line-numbers'><code>
int x = -17, z;
// x: 11111111 11111111 11111111 11101111
z = x >> 2;
// z = -5: 11111111 11111111 11111111 11111011
</code></pre></li>
<li><p><strong>Сдвиг вправо без учета знака</strong></p>
<pre class='lang-java line-numbers'><code>
int x = -17, z;
// x: 11111111 11111111 11111111 11101111
z = x >>> 2;
// z = 1073741819
// z: 00111111 11111111 11111111 11111011
</code></pre></li></ol><h2>Комбинированные операции</h2>В Java для бинарных арифметических операций можно использовать <strong>комбинированные</strong> (составные) знаки операций:

<code>идентификатор операция = выражение</code>
Это эквивалентно следующей операции: <code>идентификатор = идентификатор операция выражение</code>

Примеры:
<ol>
<li>Выражение <code>x += b</code> означает <code>x = x + b</code>.</li>
<li>Выражение <code>x -= b</code> означает <code>x = x - b</code>.</li>
<li>Выражение <code>x *= b</code> означает <code>x = x * b</code>.</li>
<li>Выражение <code>x /= b</code> означает <code>x = x / b</code>.</li>
<li>Выражение <code>x %= b</code> означает <code>x = x % b</code>.</li>
<li>Выражение <code>x &= b</code> означает <code>x = x & b</code>.</li>
<li>Выражение <code>x |= b</code> означает <code>x = x | b</code>.</li>
<li>Выражение <code>x ^= b</code> означает <code>x = x ^ b</code>.</li>
<li>Выражение <code>x <<= b</code> означает <code>x = x << b</code>.</li>
<li>Выражение <code>x >>= b</code> означает <code>x = x >> b</code>.</li>
<li>Выражение <code>x >>>= b</code> означает <code>x = x >>> b</code>.</li>
</ol><h2>Операции сравнения</h2>В Java определены следующие операции сравнения:
<ul>
<li>"<code>==</code>" (равно), "<code>!=</code>" (не равно),</li>
<li>"<code>></code>" (больше), "<code>>=</code>" (больше или равно),</li>
<li>"<code><</code>" (меньше) "<code><=</code>" (меньше или равно)</li>
</ul>имеют два операнда и возвращают булевское значение, соответствующее результату сравнения (<strong>false</strong> или <strong>true</strong>). 

Следует обратить внимание, что при сравнении двух величин на равенство в Java, как и в C и в C++, используются символы "<strong>==</strong>" (два идущих без пробела друг за другом знака равенства), в отличие от оператора присваивания, в котором используется символ "<strong>=</strong>". Использование символа "<code>=</code>" при сравнении двух величин либо вызывает ошибку при компиляции, либо приводит к неверному результату.
 
<strong>Примеры операций сравнения:</strong>

<pre class='lang-java line-numbers'><code>
boolean isEqual, isNonEqual, isGreater,
isGreaterOrEqual, isLess, isLessOrEqual;
int x1 = 5, x2 = 5, x3 = 3, x4 = 7;
isEqual = x1 == x2; // isEqual = true
isNonEqual = x1 != x2; // isNonEqual = false
isGreater = x1 > x3; // isGreater = true
// isGreaterOrEqual = true
isGreaterOrEqual = x2 >= x3;
isLess = x3 < x1; // isLess = true
isLessOrEqual = x1 <= x3; // isLessOrEqual = false
</code></pre><h2>Булевские операции</h2><strong>Булевские операции</strong> выполняются над булевскими переменными и их результатом также является значение типа <strong>boolean</strong>. В Java определены следующие булевские операции:
<ul>
<li>отрицание <code>"!"</code> – замена <code>false</code> на <code>true</code>, или наоборот;</li>
<li>операция <code>И</code> <code>"&"</code> – результат равен <code>true</code>, только, если оба операнда равны <code>true</code>, иначе результат – <code>false</code>;</li>
<li>операция <code>ИЛИ</code> "<code>|</code>" – результат равен <code>true</code>, только, если хотя бы один из операндов равен <code>true</code>, иначе результат – <code>false</code>.</li>
<li>операция исключающее <code>ИЛИ</code> "<code>^</code>" – результат равен <code>true</code>, только, если операнды не равны друг другу, иначе результат – <code>false</code>.</li>
</ul>Операции "<code>&</code>", "<code>|</code>" и "<code>^</code>" можно, также как и соответствующие побитовые операции использовать в составных операциях присваивания: "<code>&=</code>", "<code>|=</code>" и "<code>^=</code>"

Кроме того, к булевским операндам применимы операции "<code>==</code>" (равно) и "<code>!=</code>" (не равно).

Как видно из определения операций ИЛИ и И, операция ИЛИ приводит к результату <code>true</code>, когда первый операнд равен <code>true</code>, незави­симо от значения второго операнда, а операция И приводит к результату <code>false</code>, когда первый операнд равен <code>false</code>, независимо от значения второго операнда.

В Java определены еще две булевские операции: вторые версии булевских операций И и ИЛИ, известные как укороченные (short-circuit) логические операции: укороченное И "<code>&&</code>" и укороченное ИЛИ "<code>||</code>". При использовании этих операций второй операнд вообще не будет вычисляться, что полезно в тех случаях, когда правильное функционирование правого операнда зависит от того, имеет ли левый операнд значение <code>true</code> или <code>false</code>.
 
<strong>Примеры булевских операций:</strong>

<pre class='lang-java line-numbers'><code>
boolean isInRange, isValid, isNotValid,
isEqual, isNotEqual;
int x = 8;
isInRange = x > 0 && x < 5; // isInRange = false
isValid = x > 0 || x > 5; // isValid = true
isNotValid = !isValid; // isNotValid = false
isEqual = isInRange == isValid; // isEqual = false
// isNotEqual = true
isNotEqual = isInRange != isValid
</code></pre><h2>Условная операция</h2>Условная операция записывается в форме <code>выражение-1?выражение-2:выражение-3</code>.

При этом сначала вычисляется выражение <code>выражение-1</code>, которое должно дать булевское значение, а затем, если <code>выражение-1</code> имеет значение <code>true</code>, вычисляется и возвращается <code>выражение-2</code> как результат выполнения операции, либо (если <code>выражение-1</code> имеет значение <code>false</code>), вычисляется и, как результат выполнения операции, возвращается <code>выражение-3</code>.
 
<strong>Пример условной операции:</strong>

<pre class='lang-java line-numbers'><code>
x=n>1?0:1;
</code></pre>
Переменной x будет присвоено значение <code>0</code>, если <code>n>1</code> (выражение <code>n>1</code> имеет значение <code>true</code>) или <code>1</code>, если <code>n≤1</code> (выражение <code>n>1</code> имеет значение <code>false</code>).
<h2>Старшинство операций</h2>Операции в выражениях выполняются слева направо, однако, в соответствии со своим приоритетом. Так операции умножения в выражении

<pre class='lang-java line-numbers'><code>
y = x +z*5;
</code></pre>
будет выполнена раньше, чем операция сложения, поскольку приоритет операции умножения выше, чем приоритет операции сложения.

Приоритеты операций (в порядке уменьшения приоритета) в Java приведены в табл. 1.
<img data-id="7bb245f1-14f4-4c3d-bf37-8a4f533c60e3" data-max-width="701" alt="Операции над примитивными типами в Java - 2" src="https://cdn.javarush.com/images/article/7bb245f1-14f4-4c3d-bf37-8a4f533c60e3/1024.jpeg">
Круглые скобки повышают старшинство операций, которые находятся внутри них. Так, если в приведенное выше выражение вставить скобки:

<pre class='lang-java line-numbers'><code>
y = (x +z)*5;
</code></pre>
то сначала будет выполнена операция сложения, а затем операция умножения.

Иногда скобки используют просто для того, чтобы сделать выражение более читаемым, например:

<pre class='lang-java line-numbers'><code>
(x > 1) && (x <= 5);
</code></pre><h2>Преобразование и приведение типов при выполнении операций</h2>В операции присваивания и арифметических выражениях могут использоваться литералы, переменные и выражения разных типов, например:

<pre class='lang-java line-numbers'><code>
double y;
byte x;
y = x + 5;
</code></pre>
В этом примере выполняется операция сложения переменной <code>x</code> типа <code>byte</code> и литерала <code>5</code> (типа <code>int</code>) и результат присваивается переменной <code>y</code> типа <code>double</code>.

В Java, как и в языке C, преобразования типов при вычислении выражений могут выполняться автоматически, либо с помощью оператора приведения типа. Однако правила приведения типов несколько отличаются от правил языка C, и в целом являются более строгими, чем в языке C.

При выполнении операции присваивания преобразование типов происходит автоматически, если происходит <em>расширяющее преобразование</em> (widening conversion) и <em>два типа совместимы</em>.

Расширяющими преобразованиями являются преобразования <strong>byte</strong>®<strong>short</strong>®<strong>int</strong>®<strong>long</strong>®<strong>float</strong>®<strong>double</strong>.

Для расширяющих преобразований числовые типы, включая целый и с пла­вающей точкой, являются совместимыми друг с другом. Однако числовые типы не совместимы с типами <code>char</code> и <code>boolean</code>. Типы <code>char</code> и <code>boolean</code> не совмес­тимы также и друг с другом.

В языке Java выполняется автоматическое преобразование типов также и при сохранении литеральной целочисленной константы (которая имеет по умолчанию тип <code>int</code>) в перемен­ных типа <code>byte</code>, <code>short</code> или <code>long</code> (однако если литерал имеет значение вне диапазона допустимых значений для данного типа, выдается сообщение об ошибке: возможная потеря точности).

Если преобразование является сужающим (narrowing conversion), т. е. выполняется преобразование <code>byte</code>¬<code>short</code>¬<code>char</code>¬<code>int</code>¬<code>long</code>¬<code>float</code>¬<code>double</code>, то такое преобразование может привести к потере точности числа или к его искажению. Поэтому при сужающих преобразованиях при компиляции программы выводится диагностическое сообщение о несовместимости типов и файлы классов не создаются. Такое сообщение будет выдано и при попытке преобразование выражений типа <code>byte</code> или <code>short</code> в переменную типа <code>char</code>.

Если все же необходимо выполнить такие преобразования, используется операция приведения (cast) типа, которая имеет следующий формат: (<em>тип-преобразования</em>) <em>значение</em>, где <em>тип-преобразования</em> определяет тип, в который необходимо преобразовать заданное <em>значение</em>, например, в результате выполнения операторов:

<pre class='lang-java line-numbers'><code>
byte x = 71;
char symbol = (char) x;
</code></pre>
переменная <code>symbol</code> получит значение '<code>G</code>'.

Если значение с плавающей точкой присваивается целому типу, то (если значение с плавающей точкой имеет дробную часть) при явном преобразовании типа происходит также <strong>усечение</strong> (truncation) числа. Так, в результате выполнения оператора

<pre class='lang-java line-numbers'><code>
int x = (int) 77.85;
</code></pre>
переменная x получит значение <code>77</code>. Если же присваиваемое значение лежит вне диапазона <em>типа-преобразования</em>, то результатом преобразования будет остаток от деления значения на модуль диапазона присваиваемого типа (для чисел типа <code>byte</code> модуль диапазона будет равен <code>256</code>, для <code>short – 65536</code>, для <code>int – 4294967296</code> и для <code>long – 18446744073709551616</code>). Например, в результате выполнения оператора

<pre class='lang-java line-numbers'><code>
byte x = (byte) 514;
</code></pre>
переменная x получит значение <code>2</code>.

При преобразовании целых или вещественных чисел в данные типа <code>char</code>, преобразование в символ происходит, если исходное число лежит в диапазоне от 0 до 127, иначе символ получает значение '<code>?</code>'.

При выполнении арифметических и побитовых преобразований все значения <code>byte</code> и <code>short</code>, а также <code>char</code> расширяются до <code>int</code>, (при этом в вычислениях для <code>char</code> используется числовое значение кода символа) затем, если хотя бы один операнд имеет тип <code>long</code>, тип целого выражения расширяется до <code>long</code>. Если один из операндов имеет тип <code>float</code>, то тип полного вы­ражения расширяется до <code>float</code>, а если один из операндов имеет тип <code>double</code>, то тип результата будет <code>double</code>. Так, если объявлены переменные

<pre class='lang-java line-numbers'><code>
byte a, c;
short b;
</code></pre>
то в выражении

<pre class='lang-java line-numbers'><code>
a + b*c – 15L + 1.5F + 1.08 - 10;
</code></pre>
сначала, перед вычислением <code>a + b*c</code> значения переменных будут расширены до <code>int</code>, затем, поскольку константа <code>15</code> имеет тип <code>long</code>, перед вычитанием результат вычисления будет увеличен до <code>long</code>. После этого, поскольку литерал <code>1.5</code> имеет тип <code>float</code> перед сложением с этим литералом результат вычисления <code>a + b*c – 15L</code> будет расширен до <code>float</code>. Перед выполнением сложения с числом <code>1.08</code> результат предыдущих вычислений будет расширен до <code>double</code> (поскольку вещественные константы по умолчанию имеют тип <code>double</code>) и, наконец, перед выполнением последнего сложения литерал 10 (по умолчанию <code>int</code>) будет расширен до <code>double</code>. Таким образом, результат вычисления выражения будет иметь тип <code>double</code>.

Автоматические расширения типов (особенно расширения <code>short</code> и <code>byte</code> до <code>int</code>) могут вызывать плохо распознаваемые ошибки во время компиляции. Например, в операторах:

<pre class='lang-java line-numbers'><code>
byte x = 30, y =5;
x = x + y;
</code></pre>
перед выполнением сложения значение переменных <code>x</code> и <code>y</code> будет расширено до <code>int</code>, а затем при выполнении попытки присвоения результата вычисления типа <code>int</code> переменной типа <code>byte</code> будет выдано сообщение об ошибке.

Чтобы этого избежать надо использовать во втором операторе явное преобразование типов:

<pre class='lang-java line-numbers'><code>
x = (byte) (x + y);
</code></pre>
Выражение <code>x + y</code> необходимо заключит в скобки потому, что приоритет операции приведения типа, заключенной в скобки, выше, чем приоритет операции сложения. Кстати, если записать второй оператор в виде:

<pre class='lang-java line-numbers'><code>
x += y;
</code></pre>
то сообщения об ошибке не будет.

<em>Ссылка на первоисточник: <a href="http://www.znannya.org/?view=Java_PrimitiveTypesOp" rel="nofollow" >Операции над примитивными типами в Java</a></em>