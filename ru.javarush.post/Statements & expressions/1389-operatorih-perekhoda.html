Операторы перехода
<p>----------------------------------------</p>
Java поддерживает три оператора перехода — break, continue и return. Они передают управление в другую часть вашей программы. Рассмотрим каждый из операторов подробно.Оператор break в Java используется в трех случаях. Во-первых, как вы уже видели, он заканчивает ...
<p>----------------------------------------</p>
Java поддерживает три оператора перехода — <code>break</code>, <code>continue</code> и <code>return</code>. Они передают управление в другую часть вашей программы. Рассмотрим каждый из операторов подробно.
<img data-id="4704d67c-4ddf-41c7-badb-8c4f4b342143" data-max-width="850" alt="Операторы перехода - 1" src="https://cdn.javarush.com/images/article/4704d67c-4ddf-41c7-badb-8c4f4b342143/1024.jpeg"><h2>Использование оператора <code>break</code></h2>Оператор <code>break</code> в Java используется в трех случаях. Во-первых, как вы уже видели, он заканчивает последовательность операторов в ветвях оператора <code>switch</code>. Во-вторых, его можно использовать для выхода из цикла. В-третьих, он может применяться как "цивилизованная" форма оператора безусловного перехода <code>goto</code>. В этом разделе объясняются два последних случая.

Использование <code><strong>break</strong></code> для выхода из цикла

Используя <code>break</code>, вы можете форсировать немедленное завершение цикла, обходя условное выражение и любой остающийся код в теле цикла. Когда оператор <code>break</code> встречается внутри цикла, второй заканчивается и программное управление передается оператору, следующему за ним. 

Простой пример:

<pre class='lang-java line-numbers'><code>
// Использование break для выхода из цикла.
public class BreakLoop {

  public static void main(String[] args) {
    for (int i = 0; i &lt; 100; i++) {
      if (i == 4) {
        break; // завершить цикл, если i = 4
      }
      System.out.println("i: " + i);
    }
    System.out.println("Цикл завершен.");
  }
}
</code></pre>
<strong>Эта программа генерирует следующий вывод:</strong>

<pre class='lang-java line-numbers'><code>
i: 0
i: 1
i: 2
i: 3
Цикл завершен.
</code></pre>
Хотя цикл <code>for</code> разработан здесь для выполнения своих операторов от 0 до 99 раз, оператор <code>break</code> заставляет его завершиться раньше, когда i равно 4.

Оператор <code>break</code> может использоваться с любым из циклов Java, включая преднамеренно бесконечные циклы. Например, ниже показана предыдущая программа, закодированная при помощи цикла <code>while</code>. Вывод этой программы такой же, как у ее предшественницы.

<pre class='lang-java line-numbers'><code>
// Использование break для выхода из while-цикла.
public class BreakLoop2 {

  public static void main(String[] args) {
    int i = 0;
    while (i &lt; 100) {
      if (i == 4) {
        break; // закончить цикл, если i = 4
      }
      System.out.println("i: " + i);
      i++;
    }
    System.out.println("Цикл завершен.");
  }
}
</code></pre>
При использовании внутри набора вложенных циклов оператор <code>break</code> будет выходить только из самого внутреннего цикла.

Например:

<pre class='lang-java line-numbers'><code>
// Использование break во вложенных циклах.
public class BreakLoop3 {

  public static void main(String[] args) {
    for (int i = 0; i &lt; 3; i++) {
      System.out.print("Итерация " + i + ": ");
      for (int j = 0; j &lt; 10; j++) {
        if (j == 4) {
          break; // закончить цикл, если j = 4
        }
        System.out.print(j + " ");
      }
      System.out.println();
    }
    System.out.println("Цикл завершен.");
  }
}
</code></pre>
<strong>Эта программа генерирует следующий вывод:</strong>

<pre class='lang-java line-numbers'><code>
Итерация 0: 0 1 2 3 
Итерация 1: 0 1 2 3 
Итерация 2: 0 1 2 3
Цикл завершен.
</code></pre>
Как вы видите, оператор <code>break</code> во внутреннем цикле вызывает завершение только этого цикла. Внешний цикл не затрагивается. Сделаем еще два замечания относительно <code>break</code>. Во-первых, в цикле может появиться несколько операторов <code>break</code>. Однако будьте осторожны. Слишком большое их количество создает тенденцию к деструктуризации вашего кода. Во-вторых, <code>break</code>, который завершает оператор <code>switch</code>, воздействует только на данный <code>switch</code>-оператор (но не на включающие его циклы).

<mark>Замечание:</mark> <code>Break</code> не проектировался в качестве нормального средства завершения цикла. Эту цель обслуживает условное выражение заголовка цикла. Оператор <code>break</code> следует использовать для прерывания цикла только тогда, когда возникают некоторые специальные ситуации.
<h2>Использование <code>break</code> как формы <code>goto</code></h2>В дополнение к применению в операторах <a href='https://javarush.com/groups/posts/1832-operator-switch-v-java' target='_blank'>switch</a> и циклах <code>break</code> можно также использовать отдельно, в качестве "цивилизованной" формы оператора <code>goto</code>. Java не содержит оператора <code>goto</code>, потому что он выполняет переход произвольным и неструктурированным способом. Код, интенсивно использующий <code>goto</code>, обычно трудно понять и поддерживать. Он также отменяет некоторые оптимизации компилятора. Существует, однако, несколько мест в программе, где <code>goto</code> — ценная и законная конструкция управления потоком выполнения. Например, <code>goto</code> может быть полезен, когда вы выходите из глубоко вложенного набора циклов. Чтобы обрабатывать такие ситуации, Java определяет расширенную форму оператора <code>break</code>. Используя ее, вы можете выйти из одного или большего количества блоков кода. Этим блокам не нужно быть частью цикла или оператора <code>switch</code>. Это может быть любой блок. Далее, вы можете определить точно, где выполнение будет продолжено, потому что данная форма <code>break</code> работает с меткой и обеспечивает преимущества <code>goto</code>, минуя его проблемы. Оператор <code>break</code> с меткой имеет следующую общую форму: <code>break label;</code>

Здесь <code>label</code> — имя метки, которая идентифицирует некоторый блок кода. Когда эта форма <code>break</code> выполняется, управление передается из именованного блока кода (чья метка указана в операторе <code>break</code>) на следующий за этим блоком оператор. Помеченный блок кода обязательно должен включать данный оператор <code>break</code>, но не требуется, чтобы это включение было непосредственным (т. е. <code>break</code> может включаться не прямо в блок со своей меткой, а во вложенный в него блок, возможно, тоже помеченный). Это означает, что вы можете использовать помеченный оператор <code>break</code>, чтобы выйти из набора вложенных блоков. Но вы не имеете возможности использовать <code>break</code> для передачи управления блоку кода, который не включает оператор <code>break</code>.

Для именования блока поместите метку в его начале (перед открывающей блок фигурной скобкой). Метка — это любой допустимый идентификатор Java, за которым следует двоеточие. После маркировки блока, его метку можно использовать как аргумент оператора <code>break</code>. Это приведет к тому, что выполнение будет продолжено с конца помеченного блока. Например, следующая программа содержит три вложенных блока, причем каждый имеет свою собственную метку. Оператор <code>break</code> осуществляет переход вперед, за конец блока, маркированного меткой <code>second</code>, пропуская два оператора <code>println()</code>.

<pre class='lang-java line-numbers'><code>
// Использование break как цивилизованной формы goto.
public class Break {

  public static void main(String[] args) {
    boolean t = true;
    first:
    {
      second:
      {
        third:
        {
          System.out.println("Перед оператором break.");
          if (t) {
            break second; // выход из блока second
          }
          System.out.println("Данный оператор никогда не выполнится");
        }
        System.out.println("Данный оператор никогда не выполнится ");
      }
      System.out.println("Данный оператор размещен после блока second.");
    }
  }
}
</code></pre>
<strong>Выполнение этой программы генерирует следующий вывод:</strong>

<pre class='lang-java line-numbers'><code>
Перед оператором break.
Данный оператор размещен после блока second.
</code></pre>
Одним из наиболее частых применений помеченного оператора <code>break</code> является выход из вложенных циклов. Например, в следующей программе внешний цикл выполняется только один раз:

<pre class='lang-java line-numbers'><code>
// Использование break для выхода из вложенных циклов. 
public class BreakLoop4 {

  public static void main(String[] args) {
    outer:
    for (int i = 0; i &lt; 3; i++) {
      System.out.print("Итерация " + i + ": ");
      for (int j = 0; j &lt; 100; j++) {

        if (j == 10) {
          break outer; // выйти из обоих циклов
        }
        System.out.print(j + " ");
      }
      System.out.println("Эта строка никогда не будет выведена");
    }
    System.out.println("Цикл завершен.");
  }
}
</code></pre>
<strong>Программа генерирует следующий вывод: </strong>

<pre class='lang-java line-numbers'><code>
Итерация 0: 0 1 2 3 4 5 6 7 8 9 Цикл завершен.
</code></pre>
Нетрудно заметить, что при прерывании внутреннего цикла до конца внешнего заканчиваются оба цикла. Имейте в виду, что вы не можете сделать <code>break</code>-переход к любой метке, которая не определена для включающего блока. Например, следующая программа недопустима и не будет компилироваться:

<pre class='lang-java line-numbers'><code>
// Эта программа содержит ошибку.
public class BreakErr {

  public static void main(String[] args) {
    one:
    for (int i = 0; i &lt; 3; i++) {
      System.out.print("Итерация " + i + ": ");
    }
    for (int j = 0; j &lt; 100; j++) {
      if (j == 10) {
        break one; //He верно!
      }
      System.out.print(j + " ");
    }
  }
}
</code></pre>
Так как цикл, помеченный как one, не включает оператор <code>break</code>, передать управление этому блоку невозможно.
<h2>Использование оператора <code>continue</code></h2>Иногда полезно начать очередную итерацию цикла пораньше. То есть нужно продолжить выполнение цикла, но прекратить обработку остатка кода в его теле для данной частной итерации. На самом деле это — <code>goto</code>-переход мимо следующих операций тела в конец блока цикла. Такое действие выполняет оператор <code>continue</code>. В циклах <code>while</code> и <code>do while</code> оператор <code>continue</code> вызывает передачу управления непосредственно условному выражению, которое управляет циклом. В цикле <code>for</code> управление переходит сначала к итерационной части оператора <code>for</code> и затем к условному выражению. Для всех трех циклов любой промежуточный код обходится.

Пример программы, которая использует <code><strong>continue</strong></code> для печати двух чисел на каждой строке, приведен ниже:

<pre class='lang-java line-numbers'><code>
// Демонстрирует continue.
public class Continue {

  public static void main(String[] args) {
    for (int i = 0; i &lt; 10; i++) {
      System.out.print(i + " ");
      if (i % 2 == 0) {
        continue;
      }
      System.out.println("");
    }
  }
}
</code></pre>
Этот код использует операцию <code>%</code> (остаток по модулю), чтобы проверять, является ли <code>i</code> четным. Если это так, цикл продолжается без печати символа новой строки (newline).

<strong>Вывод программы:</strong>

<pre class='lang-java line-numbers'><code>
0 1 
2 3 
4 5 
6 7 
8 9
</code></pre>
Как и в операторе <code>break</code>, в <code>continue</code> можно определить метку, указывающую, какой включающий цикл следует продолжить. Пример программы, которая использует <code>continue</code> для печати треугольной таблицы умножения от 0 до 9.

<pre class='lang-java line-numbers'><code>
// Использование continue с меткой.
public class ContinueLabel {

  public static void main(String[] args) {
    outer:
    for (int i = 0; i &lt; 10; i++) {
      for (int j = 0; j &lt; 10; j++) {
        if (j > i) {
          System.out.println();
          continue outer;
        }
        System.out.print(" " + (i * j));
      }
    }
    System.out.println();
  }
}
</code></pre>
Оператор <code>continue</code> в этом примере завершает цикл, вычисляющий <code>j</code>, и продолжает со следующей итерации цикла, управляемого <code>i</code>. Вывод этой программы:

<pre class='lang-java line-numbers'><code>
0
 0 1
 0 2 4
 0 3 6 9
 0 4 8 12 16
 0 5 10 15 20 25
 0 6 12 18 24 30 36
 0 7 14 21 28 35 42 49
 0 8 16 24 32 40 48 56 64
 0 9 18 27 36 45 54 63 72 81
</code></pre>
В использовании <code>continue</code> полезен крайне редко. Одна из причин этого заключается в том, что Java обеспечивает богатый набор операторов цикла,которые устраивают большинство приложений. Однако, для тех специальных ситуаций, в которых необходимо досрочное прекращение итерации, оператор <code>continue</code> обеспечивает структурный способ выполнения этой задачи.
<h2>Оператор <code>return</code></h2>Последний оператор управления — <code>return</code>. Он используется для явного возврата из метода, т. е. передает программное управление обратно в вызывающую программу. Оператор <code>return</code> относят к категории операторов перехода. Хотя его полное обсуждение должно подождать до обсуждения методов, здесь представлен краткий обзор <code>return</code>.

Оператор <code>return</code> можно использовать в любом месте метода для выполнения перехода обратно в вызывающую этот метод программу. Оператор <code>return</code> немедленно заканчивает выполнение метода, в котором он находится. Это иллюстрирует следующий пример:

<pre class='lang-java line-numbers'><code>
// Демонстрирует return.
public class Return {

  public static void main(String[] args) {
    boolean t = true;
    System.out.println("Перед оператором return.");
    if (t) {
      return; // возврат в вызывающую программу
    }
    System.out.println("Этот оператор никогда не выполнится.");
  }
}
</code></pre>
Здесь <code>return</code> выполняет возврат к Java-системе во время выполнения, т. к. именно эта система вызывает метод <code>main()</code>. 

<strong>Вывод этой программы:</strong>

<pre class='lang-java line-numbers'><code>
Перед оператором return.
</code></pre>
Можно заметить, что заключительный оператор <code>println()</code> не выполняется. В момент выполнения <code>return</code> управление передается обратно в вызывающую программу.

И последнее замечание. В предыдущей программе оператор <code>if</code> (t) необходим. Без него Java-компилятор выдал бы ошибку "недостижимый код", потому что он знал бы, что последний оператор <code>println()</code> никогда не будет выполняться. Чтобы предотвратить указанную ошибку, как раз и используется оператор <code>if</code> (t)он обманывает компилятор ради данной демонстрации.

<strong>Ссылка на первоисточник:</strong> <a href='http://akarak.ucoz.ru/publ/java_prilozhenija/java/operatory_perekhoda/7-1-0-63' rel='nofollow' target='_blank'>Операторы перехода</a>