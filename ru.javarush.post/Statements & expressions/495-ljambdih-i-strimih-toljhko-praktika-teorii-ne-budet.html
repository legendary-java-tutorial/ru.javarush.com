Лямбды и стримы, только практика, теории не будет
<p>----------------------------------------</p>
Всем привет. По случаю конкурса я решил написать тут не статью, но небольшой урок. Он будет про лямбды и стримы (stream) в java. Если вы уже знакомы и используете их, то мотайте сразу к концу статьи, там будет небольшая подборка задач с JavaRush на которых можно ...
<p>----------------------------------------</p>
Всем привет. По случаю конкурса я решил написать тут не статью, но небольшой урок. Он будет про лямбды и стримы (stream) в Java. Если вы уже знакомы и используете их, то мотайте сразу к концу статьи, там будет небольшая подборка задач с JavaRush на которых можно потренироваться.

Нужна java 8 и выше, закалка от JR, будет мало подробностей и много непонятного, сильное желание разобраться.

Начнем с того, что я не буду объяснять историю появлений лямбд и стримов, просто сам её не знаю. Знаю только то, что пришли они из функционального стиля программирования, в наш ООП’шный. За мой короткий опыт обучения, просто показывал, как и что, некоторым людям сложновато понять идею, поэтому просто запоминайте, как пишется, поймете потом.

<h2>Лямбды</h2><img data-id="7fd8a424-2f83-4382-b73e-7da1e2f5d080" data-max-width="270" alt="Лямбды и стримы, только практика, теории не будет - 1" src="https://cdn.javarush.com/images/article/7fd8a424-2f83-4382-b73e-7da1e2f5d080/1024.jpeg"><img data-id="587a5ea5-5a9e-4759-ab41-c9c426f922c1" data-max-width="344" alt="Лямбды и стримы, только практика, теории не будет - 2" src="https://cdn.javarush.com/images/article/587a5ea5-5a9e-4759-ab41-c9c426f922c1/1024.jpeg"><strong>Если вы совсем не знаете что такое лямбды, то:</strong>

Лямбда выглядит так:

<pre class="lang-java line-numbers"><code>
(a, b) -&gt; a.compareTo(b)
(переменные) -&gt; действие</code></pre>
Этого пока достаточно.

Почитать теорию можно тут: <a href="https://javarush.com/groups/posts/264-populjarno-o-ljambda-vihrazhenijakh-v-java-s-primerami-i-zadachami-chastjh-1-" target="_blank" rel="nofollow">ссылка раз</a>, <a href="https://javarush.com/groups/posts/283-populjarno-o-ljambda-vihrazhenijakh-v-java-s-primerami-i-zadachami-chastjh-2-" target="_blank" rel="nofollow">ссылка два</a>, но мне кажется практика гораздо веселее.

Предлагаю вам решить такую задачку:

Напишите калькулятор 1 методом. Метод должен принимать 2 цифровых значения и кое-что ещё. Код ваш будет выглядеть примерно так:

<pre class="lang-java line-numbers"><code>
class Lambda{
    public static void main (String[] args) {
	}
	
    public static double calculate(){
       	return null;
    }
}
</code></pre>
Вам надо вписать 3 параметра в сигнатуру метода <code>calculate</code>, дописать 1 команду в <code>return</code> и протестировать вызов этого метода в <code>main</code>. 

<strong>Что должен уметь этот метод</strong>
<ul>
<li>Складывать;</li>
<li>умножать;</li>
<li>делить;</li>
<li>вычитать;</li>
<li>вычислять корень;</li>
<li>возводить в степень;</li>
<li>возводить в степень сумму аргументов поделенную на первое число + 117;</li>
<li>и все любые другие операции, которые сможете придумать.</li>
</ul><strong>Что нельзя использовать:</strong>
<ul>
<li><code>if-else</code>;</li>
<li><code>char</code> как указатель операции;</li>
<li><code>switch-case</code>;</li>
<li>и все остальное что вам придет в голову.</li>
</ul><strong>Что можно использовать:</strong>
<ul>
<li>Только лямбды, задание то на них.</li>
</ul>— Что? И это все?
— Да это все, потому что дописать надо буквально 3 строки, если я подскажу хоть одну, остальные будут написаны на автомате. А при желании вы сможете нагуглить примеры, попытаться понять. Проверять конечны вы будете себя сами и если схитрите никто не узнает, но тогда зачем?

Решив такую простенькую задачку, все мои 1,5 ученика обрели примерное понимание, что такое лямбды и как ими пользоваться. Это будет очень нужно для стримов.

Если есть желание похвастаться результатом и узнать правильно ли вы сделали, код кидайте в личку. В комментарии не надо, туда можете кинуть интересные подсказки (но так, чтобы не слишком облегчать задачу). Повторюсь, решив этот пример, вы должны уже примерно понять, как пользоваться лямбдами.
<div class="row justify-content-center jr-image-wrap"><div class="col-12 col-sm-10 col-md-8"><img data-id="229db17e-518b-4e20-a9ed-e216ddd0f96d" data-max-width="650" alt="Лямбды и стримы, только практика, теории не будет - 3" src="https://cdn.javarush.com/images/article/229db17e-518b-4e20-a9ed-e216ddd0f96d/1024.jpeg"></div></div>Теперь перейдем к стримам (java streams).

Это не те стримы о которых ты, читатель возможно подумал. Нет это не <code>inputStream</code> и не <code>OutputStream</code>. Это другое, это интереснее.

Стримы пришли на замену циклам, не полностью, но все же. Подаются они с девизом «не объясняй, как делать, объясняй что делать». 

Небольшой пример стрима:

<pre class="lang-java line-numbers"><code>
	List&lt;String&gt; myList = Arrays.asList("a1", "a2", "b1", "c2", "c1");

	myList.stream()
	    .filter(s -&gt; s.startsWith("c"))
	    .map(String::toUpperCase)
	    .sorted()
	    .forEach(System.out::println);
</code></pre>
Что тут происходит? Добавим комментарии:

<pre class="lang-java line-numbers"><code>
	myList.stream() // получить поток
	    .filter(s -&gt; s.startsWith("c")) //отфильтровать значения, оставить те, что начинаются с «с»
	    .map(String::toUpperCase)  // преобразовать все значения, перевести в верхний регистр
	    .sorted() // отсортировать по порядку (дефолтный порядо)
	    .forEach(System.out::println); // вывести каждый элемент на экран
</code></pre>
Сравним с обычным циклом:

<pre class="lang-java line-numbers"><code>
List&lt;String&gt; toSort = new ArrayList&lt;&gt;();
for(String s : myList){
     if(s.startsWith("c")){
         toSort.add(s.toUpperCase());
     }
}

Collections.sort(toSort);

for(String s : toSort){
     System.ouy.println(s);
}
</code></pre>
Когда читаешь код, все выглядит страшно, а с комментариями проще так? Это нормально, я их тоже долго не понимал. Ключ к пониманию – практика. Поэтому начинаем читать сторонние статьи и искать ответы на свои вопросы, можете их так же задавать тут в комментарии, полноценный ответ не дам, но укажу направление.

<strong>Список задач от JavaRush, которые, я считаю, отлично подходят для практики стримов:</strong>
<ul>
<li><p>2208 — можно решить 1 стримом и 1 return, т.е. тело метода будет начинаться с <code>return</code> и дальше будет 1 целый стрим. Требование <code>StringBuilder</code> опустим.</p></li>
<li><p>1908 — так же можно решить 1 стримом и 1 return. Начиная с чтения файла. Запись в файл через стримы как сделать я не знаю (если это возможно), пока делаем ручками. Т.е. Открываем только 2 потока (консоль и запись в файл). Чтение файла производим через методы, которые вернут нам либо лист, либо сразу стрим (google и javadoc).</p></li>
<li><p>1907 — по идее тоже можно решить в один стрим. На входе стрима имя файла, на выходе количество слов world.</p></li>
</ul>На этом все. Если смогу напишу ещё уже просто рассказ. На мой взгляд, читать про что-то крутое без возможности это попробовать, как-то скучно, что ли.  А после калькулятора и 3 задачек думаю вы уже неплохо ладите с лямбдами и стримами, чтобы почитать уже обо всех возможностях, если ещё не прочитали.

UPD:
<ul>
<li><p>1016 — немного извращенным способом можно решить в 1 стрим и 1 return;</p></li>
<li><p>1821 — очень легко и в 1 стрим и 1 return.</p>
<p>Эти 2 задачи познакомят вас с ещё одним методом стримов и ещё одним коллектором.</p></li>
<li><p>1925 — можно одним стримом получить строку со словами и потом записать её в файл (можно ли писать в файл из стрима я не знаю)</p></li>
</ul>